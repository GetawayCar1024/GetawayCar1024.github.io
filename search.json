[{"title":"2026 年 2 月日祭","url":"/article/diary/2026/02/","content":"\n梦熊集训是什么打板子大赛吗。\n\n选择性地记录了部分题目。\n\n[Link](https://www.mxoj.net/training/listForGroup?groupId=1477)\n\n### Day 1 : 分块思想 & 莫队\n\n其实这天是 1 月 31 日。\n\n分块是会的，莫队是不会的。后者是，对于一些静态问题，若支持 $O(1)$ 增删点，那么可以 $O(n \\sqrt n)$ 处理所有询问。具体地，按照询问左端点所属块的编号为第一关键字，询问右端点为第二关键字，对所有询问排序并依次处理。考虑分析时间复杂度，两个询问之间，左端点只会移动 $O(\\sqrt n)$ 次；对于左端点所属块的编号相同的询问，右端点总共只会移动 $O(n)$ 次，而块数是 $O(\\sqrt n)$ 的。所以总时间复杂度是 $O(n \\sqrt n)$。\n\n一个经典 trick 是，对于一些题目，我们需要 $O(\\log n)$ 增删点并 $O(\\log n)$ 查询，但 $O(n \\sqrt n \\log n)$ 或 $O(n \\sqrt{n \\log n})$ 难以通过，此时需要考虑换一种数据结构维护答案。我们要求修改是 $O(1)$ 的，但查询允许达到 $O(\\sqrt n)$，而这恰好就是分块。对于这类问题，用分块维护就能够与莫队的时间复杂度平衡。\n\n- C - 教主的魔法\n\n  考虑分块。区间加是容易的，直接做即可。查询 $\\ge C$ 是困难的，考虑有什么东西能够维护这东西，容易想到排序与二分，实时维护对每个块排序的结果即可。时间复杂度 $O(n \\sqrt n \\log n)$ 或 $O(n \\sqrt{n \\log n})$。\n\n- D - Range Set Query\n\n  区间数颜色，可以莫队草过。考虑 $\\log$ 做法，显然先离线下来，发现对于右端点 $r$，左端点的答案从右往左显然是单调不降的，而能带来贡献的点的颜色一定没在右侧出现。所以拿树状数组维护维护每个位置的贡献即可。\n\n- E - Range Shuffle Query\n\n  使用经典 trick 即可。\n\n- G - 异或序列\n\n  类似于小 Z 的袜子，直接莫队即可。\n\n- H - 弹飞绵羊\n\n  经典分块维护动态树。\n\n- I - 蒲公英\n\n  经典分块维护众数，以块为单位，预处理出每个区间的众数与每个元素在前缀的出现次数，那么每个询问的答案要么是零散块中的数，要么是整块的答案，随便处理一下即可。\n\n- J - 由乃打扑克\n\n  经典题，类似于教主的魔法，在外面再套一层二分即可，需要卡常。\n\n### Day 2 : 线段树进阶 1\n\n这是线段树基础吧。\n\n- B - Takoyaki and Flip\n\n  需要维护加、翻转、清零的标记，注意一下几个标记的优先级与下放顺序即可。\n\n- C - Transformation\n\n  大概是屎吧，大力维护一下即可，不想写。\n\n- D - 大魔法师\n\n  直接做是困难的，发现只有矩阵能维护这东西，然后做完了，需要卡常。\n\n- F - Maximize The Value\n\n  对于每个元素单独考虑，发现此时只用维护一下最大子段和。扫描线即可。\n\n- G - 火灾 / Fire\n\n  感谢这道题占掉了我一下午，不然没事干了。\n\n  考虑初始每个数最终在 $n \\times n$ 矩阵上的覆盖区域。发现是一个平行四边形，它的长宽可以单调栈求出。平行四边形是困难的，将其拆成三个三角形，发现这三个三角形都是等腰直角三角形且有一条直角边在 $x$ 轴（$T = 0$）上。考虑询问，线段是困难的，射线是容易的，将一条线段拆成两条向左的射线。令三角形按右上角定位，射线按端点定位。考虑一个三角形对一条射线的贡献，可以分成两类。若三角形在射线左侧，那么三角形的贡献可以放到 $y$ 轴（$i = 0$）上，是一个带权的加；否则，三角形的贡献可以斜着（向左下）放到 $x$ 轴上，也是带权的加。把所有三角形和射线按位置排序，用两个树状数组（或线段树）维护两侧的三角形的贡献即可。\n\n### Day 3 : 线段树进阶 2\n\n- B - Rmq Problem / mex\n\n  主席树或莫队即可。\n\n- D - Clearance\n\n  简单的势能分析题。\n\n- E - DZY Loves Colors\n\n  好像不太熟悉有关颜色段的势能分析。考虑线段树维护，查询是容易的；对于修改，若当前区间颜色不同，那么暴力递归处理儿子；否则直接修改。考虑一次修改覆盖的区间，除了两侧可能有 $O(1)$ 个零散的颜色段，中间的颜色段都是完整的，而一个颜色段只会被插入一次删除一次，插入和删除的时间复杂度是 $O(\\log n)$，所以总时间复杂度是 $O(n \\log n)$。\n\n- F - 市场\n\n  经典势能分析题，维护并讨论极差即可。\n\n- G - 楼房重建\n\n  经典 trick，$O(\\log n)$ 合并即可。\n\n### 模拟赛 1\n\n- A - 北极星（[QOJ2402](https://qoj.ac/problem/2402)）\n\n  正难则反即可。\n\n- B - 太空沙（[洛谷 P3573](https://www.luogu.com.cn/problem/P3573)）\n\n  想不到拓扑序，是不是可以退役了。考虑直接算出删掉每个点之后的最长路。对于当前点，删掉它后剩下了三种路径：起点与终点拓扑序均比当前点小；起点与终点拓扑序均比当前点大；起点拓扑序比当前点小，终点拓扑序比当前点大。对所有点按拓扑序排序，前两种直接前后缀和即可，第三种拿个 multiset 维护一下即可。\n\n- C - 排列（[洛谷 P14419](https://www.luogu.com.cn/problem/P14419) 加强版）\n\n  拿棵势能线段树维护一下 $\\min(l_i, r_i)$ 即可。\n\n- D - 昔在、今在、永在的剧目\n\n  发现 $\\ge v$ 与 $\\ge k$ 的限制都是在使区间变长，有且仅有 $\\max a_i$ 最小的限制在使区间变短，因此考虑从 $a_i$ 的角度入手。对于每个 $i$，钦定 $a_i$ 是最大值，那么直接选择 $i$ 在笛卡尔树上管辖的区间即可，若这个区间的或和 $\\ge v$，那么把 $(len_i, a_i)$ 甩到一个树状数组上维护后缀最小值即可，这也顺便解决了 $\\ge k$ 的限制。考虑修改，直接在笛卡尔树上跳即可，如果当前操作没有影响就停止。因为一个点最多被修改 $O(\\log V)$ 次，所以时间复杂度 $O(n \\log V)$。\n\n### Day 4 : 树上问题 1\n\n- F - Beautiful Pair\n\n  哦哦每个节点的贡献是独立的，我在想什么。\n\n  枚举最大值，那么显然有了左右两个区间。在较小的区间中暴力枚举，在另一个区间中查询。这东西复杂度是 $O(n \\log^2 n)$ 的，因为本质上是一个启发式合并的过程。\n\n- G - 黑暗幻想\n\n  太牛了。发现 Alice 很容易赢，那就讨论一下 Alice 什么时候能赢。发现 $k$ 较小时 Alice 可以二分图染色，只要染完较少的一半还能再染一次就一定能赢，此时要求 $k \\le \\frac n 3$；若 Alice 只能操作 $2$ 次，即 $\\frac n 3 \\lt k \\le \\frac n 2$，讨论一下发现依然是 Alice 必胜；若 Alice 只能操作一次，即 $k \\gt \\frac n 2$，那么当且仅当 $deg_t \\gt k$ 时 Bob 胜。\n\n### Day 5 : 树上问题 2\n\n- B - Tree Destruction\n\n  一个显然的贪心是保留直径，做完了。\n\n- C - Tenzing and Tree\n\n  太牛了。考虑拆绝对值，发现若根是带权重心就能拆掉绝对值。枚举带权重心，发现错解不优，于是贪心即可。\n\n- D - 聚会 2\n\n  太牛了，把重心和直径结合在了一起。考虑取 $x$ 个点的情况（$x$ 是偶数）。考虑到重心在一条 $u$ 到 $v$ 的路径上，使得所有带权点都在以 $u$ 为根 $v$ 的子树中或以 $v$ 为根 $u$ 的子树中，且两个连通块中的带权点数相同。令重心为根，讨论 $u, v$ 的关系并放缩，转化为 $\\min(sz_u, sz_v) \\ge \\frac x 2$，于是按子树大小从大到小排序并动态维护直径即可。\n\n- E - 捉迷藏\n\n  唐。\n\n- F - Dynamic Diameter\n\n  唐。\n\n- G - 幻想乡战略游戏\n\n  略屎。考虑到重心只与点权有关，于是先动态维护一下重心。具体地，重心 $x$ 是 dfs 序最大的满足 $2sz_x \\ge sz_1$ 的点。考虑维护答案，拆一下式子过后发现维护链加链和即可。\n\n### Day 6 : 图论杂题选讲 1\n\n图论板题选讲 1。不过反正我图论菜。\n\n### 模拟赛 2\n\n- A - Sing Alive\n\n  唐。\n\n- B - 旅行\n\n  唐。\n\n- C - 地砖\n\n  屎。对形态打表即可。\n\n- D - 简单修路题\n\n  牛但典。考虑 ST 表优化建图，若第 $j$ 层的点 $u$ 与点 $v$ 连通则说明 $[u, u + 2^j)$ 与 $[v, v + 2^j)$ 一一连通。考虑合并第 $j$ 层的 $u$ 与 $v$，若这两点本身连通则结束合并；否则合并并暴力下放到儿子；下放到第 $0$ 层时计算贡献。因为每个点只会被合并一次，所以时间复杂度 $O(m \\log m + n \\log n \\alpha(n))$。\n\n### Day 7 : 图论杂题选讲 2\n\n都并非困难，但有些题怎么就是想不到呢。\n\n- C - 归程\n\n  容易想到双 $\\log$ 做法，直接建出可持久化并查集即可。考虑如何单 $\\log$，尝试找到一个结构能把加边的过程复原出来，容易想到 Kruskal 重构树。因为树上的点权满足堆的性质，并保留了每个时刻点之间连通的信息，所以查询时直接树上倍增即可。\n\n- E - 旅行者\n\n  发现以点为主体计算是困难的，考虑将主体变为边。钦定一条边在最短路上，求出离两个端点最近的关键点是容易的，那就做完了。\n\n- G - Modulo Shortest Path\n\n  容易想到对所有点按照 $b_i$ 排序，这样就变成了对前缀和后缀连边。容易想到令 $pre_i \\overset{0} \\longrightarrow pre_{i - 1}, pre_i \\overset{b_i} \\longrightarrow i$，$suf$ 同理，点数和边数就变成 $O(n)$ 的了，但这样会产生负权边。为了不产生负权边，我们需要对后缀的部分进行修改。设我们要对 $i$ 到 $[j, n]$ 连边，显然需要满足 $a_i + b_j \\ge M$，那我就令 $i \\overset{a_i + b_j - M} \\longrightarrow suf_j, suf_j \\overset{0}\\longrightarrow j$。考虑 $[j + 1, n]$ 的元素如何处理，发现直接令 $suf_j \\overset{b_{j + 1} - b_j} \\longrightarrow suf_{j + 1}$ 即可。\n\n- I - Elaxia 的路线\n\n  首先容易求出哪些有向边同时在两个人路线中出现，显然不可能出现环，那么这些边就形成了一个 DAG，直接跑最长路即可。\n\n### Day 8 : DP 优化 1\n\n- G - Hitchhiking in the Baltic States\n\n  太牛了。设 $dp_i$ 表示长度为 $i$ 的子序列，最后一项的最小值，发现新加入一项对 $dp$ 的影响是：区间加、删除元素、插入元素。因为进行区间加之后 $dp$ 数组依然是有序的，所以可以使用平衡树维护。\n\n### Day 9 : DP 优化 2\n\nCDQ 分治、斜率优化、决策单调性、WQS 二分等。\n\n准备放到 DP 优化与数据结构专题一起补。\n\n### 模拟赛  3\n\n- D - 最长直径（[洛谷 P9846](https://www.luogu.com.cn/problem/P9846)）\n\n  数据好水，直接钦定带权直径是不带权直径也能过。一个简单的 $O(n^5)$ 做法是枚举直径，再在直径上 DP。考虑把区间 DP 搬到树上，同样设 $dp_{i, l, r}$ 表示选了 $i$ 条边，当前直径端点为 $[l, r]$ 的最大权值。但这样可能会把某个端点本来想走的点当成废点用了，所以额外加两个 01 维表示左端点和右端点是否已经确定即可。代码是屎的。感觉这东西难点在于样例太弱导致容易误认为答案在原直径上。\n\n### Day 10 : 字符串\n\n- B - Isomorphic Strings\n\n  考虑对于每个字符出现的位置进行哈希，那么查询两个区间是否相等，只需要判断第一个区间中每个字符的哈希值是否与第二个区间中每个字符的哈希值一一相等即可。把哈希值取出来再排序比较即可。\n\n- C - 集合\n\n  首先考虑对于每个左端点预处理出最大的合法的右端点，这一部分使用双指针实现。考虑如何判断两个区间相等，与上一题类似，对于每个字符出现的位置进行哈希，那么现在只需要判断集合相等，再哈希一次即可。\n\n- D - First! G\n\n  建出字典树，枚举每个串，对于它的字典树上的每个结点，该结点字典序应当比它所有兄弟都小，于是建出图判一下环即可。\n\n- F - You Are Given Some Strings...\n\n  我咋这么唐，把 $s$ 的正反串各建一个自动机，再把 $t$ 的正反串丢到这两个自动机里即可。\n\n- H - 回响形态\n\n  不会 trick。border 一个有趣性质是，对于原串的一个 border，若我把原串正反相间插入形成一个新串 $s_1 s_n s_2 s_{n - 1} \\dots s_{n - 1} s_2 s_n s_1$，那么这个 border 在新串中就是一个回文串。那么本题做完了。\n\n### Day 11 : 组合计数 1\n\n从二项式反演讲到了莫比乌斯反演（？）。\n\n选的题除了 $O(1)$ 道都是板。\n\n- J - BBQ Hard\n\n  太牛了。要求的相当于是 $\\sum \\limits_{i = 1}^n \\sum \\limits_{j = 1}^n \\binom{a_i + a_j + b_i + b_j}{a_i + a_j}$，考虑后面那东西的组合意义，即从 $(0, 0)$ 走到 $(a_i + a_j, b_i + b_j)$ 的方案数。发现这样依然很难做，充分发扬人类智慧，把矩形平移一下，变为 $(-a_i, -b_i)$ 走到 $(a_j, b_j)$ 的方案数。这样，起点只有 $n$ 个，终点也只有 $n$ 个，于是直接格路计数即可。\n\n- M - 修行 / Asceticism\n\n  原来容斥两遍就做完了吗。第一遍把恰好 $k - 1$ 个容斥为至少 $k - 1$ 个，第二遍把 $k$ 个非空段容斥为 $k$ 个段。这样是 $O(n^2)$ 的，大力推式子就变成 $O(n)$ 或 $O(n \\log V)$ 了。","tags":["日祭"],"categories":["OI","记录"]},{"title":"[CF2183F] Jumping Man 题解","url":"/article/CF2183F-Jumping-Man-题解/","content":"\n只能说我对树形 DP 的理解还是太狭隘了，甚至没想过可以两维都表示点。\n\n设 $\\mathrm{tr}(x)$ 表示 $x$ 子树内的点（不含 $x$）。求平方是难受的，考虑经典 trick，转化为求有多少对串串相同。设 $dp_{i, j}$ 表示 以 $c_i$ 开头的串串 和 以 $c_j$ 开头的串串 匹配的方案数，显然它当且仅当 $c_i = c_j$ 时有值，且有 $dp_{i, j} = 1 + \\sum \\limits_{p \\in \\mathrm{tr}(x), q \\in \\mathrm{tr}(y)} dp_{p, q}$。因为涉及到子树，所以这个转移在 dfs 序上就是一个矩形的形式，做一下二维后缀和即可，详见代码。时间复杂度 $O(n^2)$。\n\n[Submission](https://codeforces.com/contest/2183/submission/356896930)。","tags":["DP","DP 优化","树形 DP"],"categories":["OI","题解"]},{"title":"[CF2183E] LCM is Legendary Counting Master 题解 & 被路由器做局了","url":"/article/CF2183E-LCM-is-Legendary-Counting-Master-题解-被路由器做局了/","content":"\n菜完了，1:33 才写完 E，然后网络炸了没交上去，1:35 网络又好了，后来才知道是路由器 1:30 自动重启，被路由器做局了。\n\n因为 $a$ 单增，所以若 $n \\gt m$ 显然无解。考虑一种特殊情况，即 $n = m$，此时原式恰好等于 $1$。考虑把 $a$ 序列看成是从 $[1, 2, \\dots, m]$ 中删了一些数，那么对于相邻两项 $a_{i - 1}$ 和 $a_i$，若不删除它们中间的数，那么贡献是 $\\frac{a_i - a_{i - 1}}{a_{i - 1}a_i}$；若删除它们中间的数，那么贡献是 $\\frac{\\gcd(a_{i - 1}, a_i)}{a_{i - 1}a_i}$。为了让删数过后原式 $ \\ge 1$，我们需要让 $\\gcd(a_{i - 1}, a_i) \\ge a_i - a_{i - 1}$。简单推导得出，当且仅当 $a_i - a_{i - 1} \\mid a_{i - 1}$ 时上式取等。即 $a$ 是好的的一个必要条件是 $\\forall i \\in [2, n], a_i - a_{i - 1} \\mid a_{i - 1}$，显然容易 DP。因为因数个数是 $O(n \\ln n)$ 的，所以时间复杂度是 $O(n^2 \\ln n)$。\n\n注意还有一个必要条件是 $a_1 = 1$。\n\n[Submission](https://codeforces.com/contest/2183/submission/356889945)。","tags":["DP","计数","数论"],"categories":["OI","题解"]},{"title":"数据删除","url":"/article/数据删除/","content":"\n叠甲：这东西挺糖的，请不要太在意。\n\n### 2026.1.1\n\n如何呢，出乎意料。\n\n好神奇啊。\n\n好激动，已经在幻想未来的甜蜜了（）。\n\n算是给一年开了个好头（）。\n\n### 2026.1.2\n\n还是没有缓过来。\n\n说了一些事情，解决了之前的一个误解。\n\n> 既然两个人都对一个事情充满了愿景那就试一下，行就行不行则算。\n>\n> 其实有些时候那种对得不到的事情的执念会占很大因素。\n\n第二句话真的很牛吧。\n\n注意到，在过程中若出现了难以调和的矛盾或难以解决的问题，应当及时停止，而没有必要为对方做出巨大的改变。\n\n今天比昨天似乎理性了一点。\n\n感觉自始至终她的 idea 都很好。包括之前。\n\n另外我咋这么菜，又菜又不努力。/dk\n\n### 2026.1.4\n\n并不知道是不是来找我的。\n\n### 2026.1.6\n\n还在等呜呜呜。\n\n### 2026.1.7\n\n最漫长的一周（），甚至已经快要忘记自己有 npy（）。\n\n另外这两天还恰好有点发病（？）。\n\n### 2026.1.8\n\n终于收到了一封信，但是并没有讲什么有用的东西。\n\n话说这真的很神人吧，开始谈的第一步是先变熟。\n\n另外不可避免地，也许已经有一车人知道这件事情了。\n\n但是不管，考虑下周开始一起吃饭，熟了再说。\n\n### 2026.1.9\n\n回了一封信。\n\n### 2026.1.10\n\n聊天。/cf\n\n并非有一车人知道。\n\n### 2026.1.12\n\n注意到 /cf 也是吃饭，A 与 B 对我来吃饭提出了一些疑问。\n\n并不知道什么时候能坐一起。\n\n### 2026.1.13\n\n她疑似有点吃醋（）。回了封信，然后她把这封信还回来了。hyw。\n\n### 2026.1.14\n\n果然是拿错了，我又回了一封信。另外感觉依然不是很熟（？）。\n\n然后晚上就坐一起吃饭了（）。\n\n### 2026.1.15\n\n第一次当面给信（）。\n\n另外晚上吃饭的时候有几分钟有且仅有我们两个（）。\n\n然后就疑似被一些人看到了。\n\n### 2026.1.16 ~ 18\n\n写信。\n\n### 2026.1.19\n\n线下第一次说话，甚至还是她开口的（？）。\n\n呜呜呜教室座位被调开了虽然我本来也看不到她但就是不开心（）。\n\n### 2026.1.20 ~ 23\n\n写信。\n\n### 2026.1.24\n\n中午只有我们两个吃饭，怎么会是呢。\n\n原来是 C 不吃饭而另外几个被学校的饭菜做局回家了。\n\nThe End.\n\n「我不知道你想好意义没有。但是我觉得我们都还没有做好准备。或者说，也不能给彼此带来快乐。」\n\n『从我的角度上讲，因为我本身也不是一个积极的人，并且没有什么爱好，所以无论是谁可能都难以给我带来快乐，我也难以给别人快乐』\n\n「我觉得不是的。你找到合适的人一定会的。现在太不合时宜了。我连让别人看见的勇气都没有」\n\n……\n\n『所以你觉得怎样』\n\n『是停止吗』\n\n「呃」\n\n「嗯」\n\n『嗯』\n\n『再随便说几句话    \n并没有什么需要挽回的也并没有什么值得遗憾的    \n可惜并没有像你最后一封信说的那样有很多收获 甚至也没有什么体验    \n我前几天想 我获得不了快乐 那我就尝试获得陪伴吧    \n但现在这样（或许应当用 之前那样）也确实是累的 也很不自在    \n但是我想知道 这之后 我们还是朋友吧    \n之前的误会已经解开 我们能回到 25 年上半年的关系吗    \n前几天我也突然间想到 在 24 年年底你给我的一封信里    \n你说 像现在这样（指当时）就挺轻松的，没有什么负担    \n其实今晚本来想给你说很多事情的    \n虽然我依然可以作为朋友的身份说 但我认为以朋友的身份说那些事情是不太对的    \n另外 我莫名奇妙地来（这桌吃饭） 是应当同样莫名其妙地走还是怎样呢    \n其实来这桌吃饭 我也算是找到了一个归属（？）虽然我还是没完全融入进来    \n若我还是坐这桌吃饭，你认为我是否需要再和 C 换回去还是就这样不变 或者是你介意我坐这桌但我觉得你应该不会    \n最后 祝我们两个都能找到合适的人（？）\n\n算了说点真心话吧 上面的有一两句话是比较假的    \n就算我获得不了快乐 我也很需要心理上的陪伴    \n我知道 谈 反而会扰乱我们两个的生活 但是能让我有一些精神上的依靠    \n但既然对于你来说 我无法为你带来什么（并且 谈 还扰乱了生活）那么停止也是理智的选择    \n我今晚本想给你说一些我内心里的话的 我曾经只和 D 有聊得这么深过    \n但是很遗憾 我还没给你说    \n为什么我不作为朋友的身份说呢 或许是光是以朋友的身份讲 我们的关系还不至于我主动给你讲那些吧    \n当然 如果你愿意听 我也可以讲    \n其实我也想过 我们可以假装我们是在网恋    \n但既然已经决定了那也没必要再多说了』\n\n……\n\n『又从头到尾想了一遍，发现对于我们两个谈和不谈并没有太大的区别』\n\n『之前我在寝室里说 某种意义上 谈 与 不谈 纯粹就是主观划分』\n\n『两个单纯关系很好的异性 可能在外人看来就像谈了一样』\n\n『或是两个人在外人看来谈了一样 但就是拒不承认』\n\n『（并不知道 A 和 B 是哪一类）』\n\n『而我们两个大概就是谈了跟没谈一样』\n\n『谈 与 不谈 一直都是主观划分的，某种意义上不能决定任何事情』\n\n『反而是对于我们两个 谈会给我们自己打上 tag 以及给自己一些额外的心理负担』\n\n『而我们在所谓 谈 的状态下做的事情 同样可以在 不谈 的状态下完成』\n\n*『可惜并没有像你最后一封信说的那样有很多收获』*$\\to$『并非 这就是收获吧』\n\n……\n\n『做朋友才是最好的选择』","tags":["记录"],"categories":["ESSAY"]},{"title":"祭我的 2025","url":"/article/祭我的-2025/","content":"\n本文内容和自述的内容有少许重叠。\n\n这次我会 **尝试** 写得不那么屎。话说祭我的 2024 是真唐吧。\n\n阅读时请不要对号入座。\n\n---\n\n当初我选择离开 15 班显然很有原因，但是选择回到 15 班又是为了什么呢。也许是为了更好地搞 OI，以及对 whk 显然没有负面作用。但是当时我更追求的其实是 15 **班**，于是就有了比较高的期望。\n\n我已经记不清当时我理想中的 15 班是怎样的，所以似乎无法进行理想与现实的比较，也不能非常明确地说出到底是什么让我失望。简而言之，也许是 15 班并没有我想象中的那么团结，以及学习氛围没有想象中的那么好。于是心理上的落差就让我讨厌身边的一切。\n\n另一方面，回到 15 班后，我并没有变得比之前快乐。我原本认为 15 班能给我提供情绪价值（无论是以哪种方式提供），但事实上并没有。我自己也完全找不到情绪价值，说人话就是没什么事情能让我真正的快乐（？）。\n\n于是我只剩下负能量，负能量积累久了自然就会崩溃。那一段时间抑郁的情绪较多吧，也有一些消极的想法。当时经常会毫无理由地心情低落，感觉一天天过得很艰难。有时太难受了就只有出去走两圈，上课的时候就只能咬自己，有天晚上把寝室里窗户的钉子给拆了。\n\n不过好在我胆小没跳吧。\n\n话说前几天看了看我之前手写的日记，感觉我能活下来也算是奇迹了。感谢胆小救了我一万次。\n\n---\n\n六月底或七月初，我有一天晚上突然觉得学 OI 好累，可 OI 是之前唯一可以让我提起兴趣的东西。我忽然觉得，现在似乎更没有什么东西能够让我快乐了。那天晚上我心情很闷，要不是胆小可能都不会回寝室了。我不知道，当世界上再也没有能让我感到快乐的事情，活着还有什么意义（这句话也是 自述 最初的名字）。\n\n于是七月份的集训，除了前几天，后面的时间我似乎都是额头靠在桌子上，什么都不干，脑海中似乎空荡荡的。平时情绪也极其低下，完全没有做任何事情的动力。\n\n恰好那几天看到了洛谷上的 [某篇文章](https://www.luogu.com.cn/article/qrq7sodx)，这似乎说的就是我，我想说些什么，可是我又什么都说不出。我想要改变我的现状，可是我又无能为力。\n\n---\n\n以下这段话比较废话。\n\n长期的抑郁，似乎身体上也有了反应。上学期我有一两个月反复生病（包括感冒、发烧、麦粒肿、角膜炎等），虽然我并不认为这与抑郁直接相关，但我认为这也许是我（因为抑郁）免疫力下降的表现。\n\n后来七月份集训的时候，我毫无征兆的就发烧了，印象中并没有着凉或者热着了。后来倒是两天左右就好了，也许就只是一次普通感冒。只能说我身体此时已经差到什么程度了。\n\n---\n\n接下来的故事都是新近发生的，所以内容会相对详细。\n\n只能说抑郁和焦虑根本无法比较，因为两者都极其折磨人。\n\n某天晚上，我本来不应当打 CF (Div. 3)，但还是和（新）初三的一起去了机房。话说由于暑假开始时我就已经极其厌恶 whk，所以整个暑假两三周的时间，我几乎什么作业都没写。那咋办呢，尽管再不愿意，在确定停课之前，还是只有补呗。于是那天晚上我在写英语字帖。\n\n突然，我心跳加速了一下，就像是即将公布成绩时紧张的感觉。随后几分钟内我又反复心慌了几次。我很疑惑，当时想着也许是熬夜导致的。可是后来几天，随着离开学越来越近，我心慌的频率越来越高。\n\n一天晚上，我在寝室闻到了一种奇怪的味道，大概是一种熏臭味，具体难以形容，让人很难受。我以为是我感冒了，于是就忍着臭味睡觉了。可是后来几天，同样是反复地、间歇性地出现这样的症状，并且不在相同的地方出现，那就很奇怪了。上网搜了一下，学到了一个新的名词：\n\n幻嗅。\n\n话说这个症状似乎比较小众。下面节选自一篇知乎上的文章：\n\n> 幻嗅的发生通常与多种病因相关，包括神经系统疾病、精神障碍以及其他健康问题。常见的原因包括但不限于：\n>\n> 神经系统疾病：如帕金森病、阿尔茨海默病、癫痫等。\n>\n> 精神障碍：如精神分裂症、抑郁症等。\n>\n> 药物或毒物的影响：某些药物或化学物质的摄入可能引发幻嗅。\n>\n> 脑部损伤或疾病：如脑肿瘤、脑血管病等。\n\n第一、三、四条显然不太可能，所以呢。\n\n再结合心慌的症状，哦，原来这是焦虑啊。\n\n到最后两天，我焦虑已经达到怎样的程度了呢。心慌一次让我喘不过气，同时感到极其疲倦。然而我一天要心慌若干次。到了晚上，我只能给同学说，我太累了。\n\n话说这两周我依然不想写 whk 作业，但是还没想好开学后如何面对，所以也还没有完全放弃 whk 作业。直到最后一两天我才彻底放弃，并且想好了：我要停课。\n\n---\n\n似乎我拖到了开学前一天才告诉我家长我想停课，因为出于各种各样的原因，我并不愿意给我的家长说我的内心想法。告诉他们我想停课的同时，我也说了上学期我过得很不好，同时我已经厌倦甚至是反感 whk 了。那天晚上比较急，于是和我爸吵了一架。\n\n话说其实我最初并没有说我想停课，我说的是我想休息一段时间，随后我家长说，为什么不直接停课呢，于是就开始讨论关于停课的事情。\n\n题外话是，吵了一架后，第二天我爸给我说，要坚强一些，没什么大不了的，有些事情现在看着很困难，以后看来就屁事没有。看来他们似乎并不认为我可能有心理问题，或是并不认为心理问题多么难以解决。\n\n但是无论如何，cjx 在帮我争取停课，并且很快就与 wj 达成了一致，话说还带上了 zcy 和 cdo 一起停课。可是开学那天还没能确定停课，于是我还是只有回到班上。开学那天我状态特别差，因为害怕，极其害怕，害怕任何事情。\n\n接下来的一段故事，如果不是因为一位神人，许多人都应当知道。这位神人是谁呢，这位神人就是 drl。开学那天，他在 tx 问道我去哪里了时他莫名其妙却毫无波澜地说我在高一机房并且没有引起 tx 一点怀疑。\n\n当时是，tx 开始收作业了，我实在是坐立不安，于是就偷偷溜出了教室。我该去哪里呢，也许可以出去乱逛，但一是这样可能会被班上的人看到（班上的人可以看到我出去），二是可能会被外面的老师看到并询问。那咋办呢，于是我去了厕所。\n\n然后，我 就 在 厕 所 的 一 个 隔 间 里 待 了 接 近 两 个 小 时。这期间，我掐了自己，并且还掐破了皮，也许还咬了自己，因为实在是太难受了。这些行为看着似乎很神经，我现在看来也是，但是当时确实心里极其难受。\n\n我出来过后碰到了几个班上的人，但是似乎没有人问我去哪里了。直到吃完饭后碰到 zcy 询问他后才知道，这个神人 drl 说我去高一机房了，然后糖糖 tx 还信了。\n\n以上是一个小插曲。吃完饭后，我陪 zcy 去门卫室给他家长打了个电话，同时也得知，我们第二天参加完开学典礼就可以直接到机房停课了。我终于如释重负。\n\n---\n\n停课过后，我的症状好了很多。抑郁的症状渐渐消失了，焦虑的症状在之后的一段时间还偶有出现，但是到现在也基本消失了。只是遇到一些事情的时候焦虑还是会发作。\n\n接下来我会先按照时间顺序讲一些停课过后发生的事情，比较流水账，再讲一些我的思考。\n\n九月时我还经常 emo，但总体而言这个月十分轻松。这段时间训练压力不大，机房里就几个人，咔咔、企鹅、阿凉、mz 以及我们初三的几个。\n\n十月和十一月压力还是不小，一周三至四次模拟赛也是有办法。后来虽然阿凉走了，但是之前的好朋友又回来了，十一月的时候又在和 jmr 一起写 Gemmer（虽然这是不对的）。只能说这两个月过得比较平淡吧。可惜的是，CSP-S 和 NOIP 都没考好，或许可以说 CSP-S 是发挥不好，但 NOIP 只能说是比上不足比下有余和策略问题。但策略这东西只能说很难绷吧。\n\n十二月比较难绷吧，上上下下地跑，两边的效率都不是特别高，但是主观上讲也比补文化好多了。\n\n---\n\n其实这几个月，感觉我一直都是得过且过的状态。虽说我喜欢 OI，但是也如同我之前说的那样，OI 并不能很容易让我感到快乐。只是相比之前，我几乎没有了负面情绪，于是这几个月整体情绪还比较正常。每天晚上走出教学楼时，我又会想，到底有什么事情能让我快乐呢，似乎每天依然过得很空虚。\n\n另外，停课过后，我变得怕人了。说人话就是，在许多场合下非常害羞。虽然那些人并不会吃了我，但是我就像那些人要吃我一样尝试避而远之。至于到底为什么怕我也不知道，总之就是极其不愿意和 和我半生不熟的人 或 不认识的人 接触（不过最近回班一段时间过后感觉好一些了）。因此，我的交际圈在不断缩小。\n\n写一些心里话，可能戾气有点重。其实我觉得很多时候，我总是不被注意的，或是说存在感很低甚至几乎没有。当我发现我被遗忘时，我想找人诉说，但我又什么话都说不出，最多憋出一句“存在感这一块”这样的话。经常，我说一句心里话，却没有人回应。因此，我渐渐地养成了把话憋回去的习惯，因为我说的话得不到回应，显得我跟小丑一样。我在线下也许还算是有那么几个 **好** 朋友，可是这些好朋友似乎只是表面上的好朋友？只是平时打打闹闹以及聊些很日常或学术的话题而已。我线上也曾有几个好朋友，可是因为各种原因，现在也不怎么联系，平时也没有人会找我聊天。总之就是觉得挺孤独的。不过似乎这也比上学期好一些了，不至于影响状态。\n\n但是我写这些又是为了什么呢？其实我想 **说明** 我渴望被注意，我并不认为我应当成为那个被孤立的人。但是这很矛盾：我既不愿意和人接触，又和别人没有任何共同语言，还想被别人注意。其实我很早就发现这个问题了，但是我也无能为力。曾经有一个人主动来帮助我，当时我很惊喜，因为似乎从某个时候开始就再也没有人关心我了，我在这里真心感谢他，尽管他大概率看不到。可是后来因为一些原因和他失去了联系。\n\n---\n\n这一部分主要讲我对于恋爱的一些想法。这似乎算是个新话题（？）。首先说明我现在想谈女的（）。\n\n也许是因为孤独，也许还因为其他一些因素，这学期的某一天开始，我就极其想谈恋爱。之前，我“想谈”也许更多是因为对一个人的喜欢。但是这次我却没有目标，也不知道我应当做些什么。我在寝室里重复说着我想谈恋爱，某人也给出了一些建议（），但是似乎都被我以各种理由否了（）。其实归根结底，原因还是我不愿意和人接触，或者说是内向（？）。于是在某一天，我意识到 就算我在寝室里说我想谈恋爱 我也谈不到恋爱，于是在此之后我就很少再在寝室里说我想谈恋爱。\n\n以上是我的现状，【数据删除】。接下来我会讲我对恋爱的一些思考。\n\n首先，我认为中学时期的恋人难以走到最后，所以我现在想谈恋爱更多是为了当下。\n\n在我意识到我似乎谈不到恋爱的同时，我也开始思考，我到底为什么想谈恋爱。更准确地，我谈恋爱到底是为了什么。也许是因为孤独，想要得到陪伴，可是单纯的朋友也可以给我陪伴（？）。另外我也曾得到过陪伴，但我并不清楚那到底是不是我想要的。那么我到底想要什么，我也不知道。\n\n说人话就是我在追求一个完全未知的东西。\n\n另外，考虑到我的性格，也是找得到哈。就算找到了，能否正常地在线下聊天是第一个问题。\n\n说人话就是明知自己谈不成又想谈。\n\n也是有办法。\n\n---\n\n我渴望被人关注，于是我渴望表达，因为这是让别人关注我的唯一方式，于是才有了自述以及这篇文章。写这篇文章之前，我本想表达很多想法，但最后因为各种原因并没有完全表达出来。有的是因为想法比较抽象，有的是因为一些事情涉及到隐私，有的是因为一些事情可能带有个人主观的攻击性言论。\n\n以上所有，似乎还是写得挺屎的，但是不管了。\n\n---\n\n> \"Oh, my, love is a lie,\"\n>\n> shit my friends say to get me by.\n>\n> It hits different,\n>\n> it hits different this time.\n\n随便写的一句歌词，没有任何实际含义。","tags":["记录"],"categories":["记录"]},{"title":"2026 年日祭","url":"/article/diary/2026/","content":"\n- [2026 年 1 月日祭](/article/diary/2026/01/)\n- [2026 年 2 月日祭](/article/diary/2026/02/)\n- [2026 年 3 月日祭](/article/diary/2026/03/)\n- [2026 年 4 月日祭](/article/diary/2026/04/)\n- [2026 年 5 月日祭](/article/diary/2026/05/)\n- [2026 年 6 月日祭](/article/diary/2026/06/)\n- [2026 年 7 月日祭](/article/diary/2026/07/)\n- [2026 年 8 月日祭](/article/diary/2026/08/)\n- [2026 年 9 月日祭](/article/diary/2026/09/)\n- [2026 年 10 月日祭](/article/diary/2026/10/)\n- [2026 年 11 月日祭](/article/diary/2026/11/)\n- [2026 年 12 月日祭](/article/diary/2026/12/)","tags":["日祭"],"categories":["OI","记录"]},{"title":"2026 年 1 月日祭","url":"/article/diary/2026/01/","content":"\n### 容斥、计数专题\n\n[Link](/article/diary/2025/12/#容斥、计数专题)\n\n### Hello 2026\n\n[Link](https://codeforces.com/contest/2183)\n\n这场 ABC 做得过于不顺了。\n\n- D - Tree Coloring\n\n  考虑到一个 naive 的按照 mex 的构造，发现显然假了。为了在新的一层不产生新的颜色，考虑让每个点都继承它一个儿子的颜色，再循环移位一下，然后就做完了。实现上有一些细节，比如某些情况依然需要按照 mex 构造。\n\n- E - LCM is Legendary Counting Master\n\n  [Solution](/article/CF2183E-LCM-is-Legendary-Counting-Master-题解-被路由器做局了/)。\n\n- F - Jumping Man\n\n  [Solution](/article/CF2183F-Jumping-Man-题解/)。\n\n- G - Snake Instructions\n\n  牛牛题，考虑询问 `L` `R` `LR` 这题就变成了构造题。发现 `L` 答案的集合和 `LR` 的答案集合显然是一样的，因为 `L` 把能创飞的都创飞了，所以 `L` 中的蛇和 `LR` 中的蛇是一一对应的，并且可以求出这些蛇的速度。考虑剩下的蛇的速度，均可以通过 `L` 和 `R` 讨论出来。注意到无解当且仅当存在 `010` 或 `020` 的结构，构造出来过后再判断即可。\n\n### USACO 2026 JAN\n\n金银铜都是唐，那我为啥不会金二。\n\n话说我赛时发现了金二的经典结论但是以为是假的。\n\n另外我甚至还做过金二的原。\n\n### 春季测试 2023\n\n- D - 密码锁\n\n  $k = 1, 2$ 是容易的，考虑 $k = 3$。首先二分答案 $x$。固定全局最小值所在行数（设为 A 行），枚举全局最大值所在行数（设为 B 行），设剩下一行是 C 行。对于第 $i$ 列，枚举每种状态，判断 A、B 行是否合法，若合法则以颜色 $i$ 把 C 行 $i$ 列的数的数涂到数轴上。现在只需要判定数轴上是否存在 $a$ 满足 $[a, a + x]$ 中有每种颜色的点，随便维护一下即可。考虑 $k = 4$，只是多了一行，变成了二维问题，即求是否存在 $(a, b)$ 满足以 $(a, b)$ 为左下角、长宽均为 $x$ 的矩形中有每种颜色的点。随便处理一下之后用线段树维护即可。\n\n### Codeforces Round 1073 (Div. 1)\n\n[Link](https://codeforces.com/contest/2190)\n\n依然下分嘟嘟嘟。\n\n- B - Sub-RBS\n\n  充要条件是存在 `)(...(` 的结构，随便 DP 一下即可，赛时不知道为什么重构了好多次才写出来。\n\n### Codeforces Round 1075 (Div. 2)\n\n[Link](https://codeforces.com/contest/2189)\n\n- F - Zhora the Vacuum Cleaner\n\n  好奇怪的题。设 $mn_u$ 表示在对某个点操作 $mn_u$ 次后 $u$ 始终是空的，那么答案是显然的。考虑计算 $mn_u$，若点 $u$ 自己为空且有不超过两棵子树非空，那么 $mn_u = 0$（$u$ 始终为空）；否则，$mn_u$ 是任意一颗以 $u$ 为根的子树的带权大小的最小值。\n\n### 数据结构专题\n\n[Link](https://vjudge.net/contest/736939)\n\n- A - ふたつのアンテナ (Two Antennas)\n\n  太牛了，没想到打个 tag 就可以达到删除的效果。显然离线下来做扫描线，用线段树维护一下区间最大值、最小值和最大答案，那么加点和删点就是单点更新，其中删点是把最大值设为极小值最小值设为极大值；新增一个点 $r$，相当于对于一个区间，用 $a_r$ 与最小值或最大值作差并更新最大答案，这也是可以维护的。时间复杂度 $O((n + q) \\log n)$。\n\n- B - middle\n\n  太牛了，原来中位数也能用 $\\pm 1$ 技巧。考虑二分，把大于等于答案的设为 $+1$，小于答案的设为 $-1$，那么合法当且仅当总和 $\\ge 0$。取 $[a, b)$ 的最大后缀、$[b, c]$ 的全部与 $(c, d]$ 的最大前缀加起来即可。因为每个数都要一棵线段树，所以可持久化一下即可。\n\n- E - 城市建设\n\n  考虑 CDQ 分治，发现一个节点的左儿子对右儿子并没有贡献，而是儿子可以继承父亲的部分信息。称静态边为当前节点之外的已确定的边，动态边为当前节点修改的边。若一条静态边未出现在所有静态边的最小生成森林中，那么一定可以舍弃这条边；若强制选择尽可能多的动态边（将动态边的边权临时设为 `ninf`）但最小生成森林中依然存在一些静态边，那么这样的边是必选的，可以用并查集将这条边所连接的两个点合并起来。因为缩点后处理每个节点时的点数都是区间长度级别的，所以时间复杂度是 $O(n \\log^2 n)$。注意整个过程（包括并查集）需要支持撤销。\n\n- F - 第七学区\n\n  太牛了。显然有一个 $O(n \\log V)$ 的暴力，可惜过不了。发现过程中我们维护了一个长度为 $\\log V$ 值域为 $n$ 的数组 $cnt$，其中 $cnt_i$ 表示第 $i$ 位连续有几个 $0$。$cnt$ 数组的本质其实是一个 $\\log V \\times \\log n$ 的 01 矩阵，考虑转置为 $\\log n \\times \\log V$ 的 01 矩阵，即维护一个长度为 $\\log n$ 值域为 $V$ 的数组 $cnt'$，发现对于新增的一个数，恰好可以 $O(\\log n)$ 维护 $cnt'$。时间复杂度 $O(n \\log n)$，只用跑 1s。\n\n- O - String Set Queries\n\n  太牛了。删除可以看成是添加了一个权值为 $-1$ 的串。一个简单的在线做法是当前串长每达到 $\\sqrt n$ 就建一个自动机，时间复杂度 $O(n \\sqrt n |\\Sigma|)$，不太能过。考虑二进制分组，因为合并两个自动机的时间复杂度是线性的，一个串最多被合并 $\\log n$ 次，一次查询只用在 $\\log n$ 个自动机上查，所以时间复杂度是 $O(n \\log n |\\Sigma|)$ 的。\n\n### Codeforces Round 1077 (Div. 1)\n\n[Link](https://codeforces.com/contest/2187)\n\nYeah 及时止损。\n\n### 晚练\n\n[Link](https://vjudge.net/contest/782776)\n\n- No Change G (20260120)\n\n  随便状压 DP 一下即可。\n\n- Emiya 家今天的饭 (20260121)\n\n  随便容斥再 DP 一下即可。\n\n- 逛公园 (20260122)\n\n  一个 naive 的想法是，对于判无解，跑两遍 dij，再找找零环，然而发现 DP 似乎很难写。DP 的设计和转移是显然的，但是转移顺序是困难的，那就搜索即可。\n\n- Grass Cownoisseur G (20260125)\n\n  不能逆向是容易的，所以缩点后枚举逆向哪条边即可。\n\n- 消防 (20260126)\n\n  易证答案一定在直径上。双指针即可。\n\n- 飞扬的小鸟 (20260128)\n\n  随便 DP 一下即可，细节比较多。","tags":["日祭"],"categories":["OI","记录"]},{"title":"[CF2182F1 / 2] Christmas Reindeer 题解","url":"/article/CF2182F1-2-Christmas-Reindeer-题解/","content":"\n为啥上紫过后上了 max 就要下分，这场罚时吃饱了。\n\n另外这场 F1 / 2 都是糖糖题吧，赛时切的人少只是时间原因，感觉跟 Good Bye 2025 的 F 是一个难度的。\n\n可是我赛时差一点切 F1 / 2 导致晚上失眠了。\n\n---\n\n不妨令 $q = n + m, V = 60$，设 $cur$ 表示当前权值的系数（$\\frac 1 {2^k}$），称一只权值为 $2^c$ 的鹿的实际权值为 $cur \\cdot 2^c$。\n\n对于修改，直接拿个桶 $cnt_i$ 存一下即可，于是考虑询问。观察这个式子：$c'_1 + \\lfloor\\frac{c'_2}{2}\\rfloor + \\lfloor\\frac{c'_3}{4}\\rfloor + \\dots + \\lfloor\\frac{c'_k}{2^{k - 1}}\\rfloor$，因为 $c'$ 不增，所以显然有 $\\lfloor \\frac{c'_i}{2^{i - 1}} \\rfloor \\gt \\lfloor \\frac{c'_{i + 1}}{2^i} \\rfloor + \\ldots + \\lfloor\\frac{c'_k}{2^{k - 1}}\\rfloor$，即第 $i$ 项严格大于第 $i$ 项后面的项之和。于是，每次选的鹿的权值应当 **严格大于** 当前 $x$ 的一半，否则无解。\n\n考虑先把权值相同的鹿视为一种，统计答案时再计算贡献。从大到小枚举鹿的权值 $2^c$，此时分为两种情况。\n\n1. $x \\le cur \\cdot 2^c$：此时若选了权值为 $2^c$ 的鹿，那么已经满足条件，统计答案。若不选权值为 $2^c$ 的鹿，那么继续考虑权值为 $2^{c - 1}$ 的鹿。\n2. $\\lfloor \\frac x 2 \\rfloor \\lt cur \\cdot 2^c \\lt x$，此时 **必须** 选权值为 $2^c$ 的鹿，并更新 $x$ 与 $cur$，且继续考虑权值为 $2^c$ 的鹿。若不选，显然有 $cur \\cdot 2^{c - 1} \\le \\lfloor \\frac x 2 \\rfloor$，这会导致接下来无解。\n\n考虑如何统计答案。假设在上述模拟过程中，选了一只权值为 $2^c$ 的鹿过后满足条件，这说明这只鹿之前的每只鹿都满足第二种情况。所以我们可以对于 $(c, V]$ 中的任意 $i$ 确定选了多少只权值为 $2^i$ 的鹿，记为 $now_i$，以及 **至少** 选了多少只权值为 $2^c$ 的鹿，记为 $now_c$。之所以是“至少”，是因为在满足条件过后我还可以额外选择一些权值为 $2^c$ 的鹿。同理，我还可以额外选择一些权值小于 $2^c$ 的鹿。设 $pre_i = \\sum \\limits_{j = 0}^i cnt_j$，$f_{i, j}$ 表示从 $i$ 个物品中选至少 $j$ 个物品的方案数，那么此时的答案就是：\n\n$$\n(\\prod \\limits_{i = c + 1}^V \\binom{cnt_i}{now_i}) \\cdot f_{cnt_i, now_i} \\cdot 2^{pre_{i - 1}}\n$$\n\n三部分分别表示前、中、后的贡献。前和后都是好算的，问题在于如何计算 $f_{i, j}$。\n\n{% folding title=\"F1\" class=blue open=true %}\n\n单次 $O(q)$ 计算 $f_{i, j}$，时间复杂度 $O(q^2V)$。\n\n{% endfolding %}\n\n考虑如何快速计算 $f_{i, j}$，显然有 $f_{i, j} = f_{i - 1, j - 1} + f_{i - 1, j}, f_{i, 0} = 2^i$。\n\n{% folding title=\"F1.5\" class=blue open=true %}\n\n$O(q^2)$ 把 $f_{i, j}$ 预处理出来，时间复杂度 $O(q^2 + qV)$。\n\n{% endfolding %}\n\n{% folding title=\"F2\" class=green open=true %}\n\n容易发现，若不考虑额外选的没有用的鹿，每选一只鹿会让 $x$ 至少减半，所以最多只会选 $V$ 只鹿，因此 $f_{i, j}$ 的第二维最多取到 $V$，于是 $O(qV)$ 预处理即可，时间复杂度 $O(qV)$。\n\n[Submission](https://codeforces.com/contest/2182/submission/355822069)。\n\n{% endfolding %}","tags":["计数","组合数学"],"categories":["OI","题解"]},{"title":"[CF2180E] No Effect XOR 题解","url":"/article/CF2180E-No-Effect-XOR-题解/","content":"\n~~ABED hyw？~~\n\n赛时观察样例一发就过了。\n\n显然，这个异或操作是一个 $[l, r] \\to [l, r]$ 的映射。发现大体上可以分为两种情况：一种是 $[0, 2^k)\\ (k \\in \\mathbb{Z}^+)$，那么 $x$ 可以取 $[0, 2^k)$ 中的任意值；另一种是 $[l, r]$ 满足 $l \\gt 0 \\land l \\oplus r = 2^k - 1\\ (k \\in \\mathbb{Z}^+)$，那么 $x$ 可以取 $0$ 或 $2^k - 1$。对于低位考虑第一种情况，再对剩下的高位考虑第二种情况即可。\n\n[Submission](https://codeforces.com/contest/2180/submission/354541107)。","tags":["计数","Ad-hoc","分类讨论"],"categories":["OI","题解"]},{"title":"热烈祝贺【队伍名称】在 THUPC2026 初赛中以 inf 项优势领跑我队！","url":"/article/热烈祝贺【队伍名称】在-THUPC2026-初赛中以-inf-项优势领跑我队！/","content":"\n## 队员\n\n- @Getaway_Car，简直太菜了。\n- @_O_v_O_，简直太强了。\n- @Mary3327，简直太强了。\n\n## 喜报\n\n- @_O_v_O_ 场切 2 题（GM），切题数量领跑我队！\n- @Mary3327 场切 L 题，切题难度领跑我队！\n- 我队共切 4 题（GJLM），切题数量领跑我队！\n- 我队共吃 9 发罚时，罚时数量领跑我队！\n- 在我队范围内，我队首 A GJLM 四题，首 A 数量领跑我队！\n- 在 GJLM 范围内，我队荣耀 AK！\n  - 同时，在我队范围内，我队首个 AK，领跑我队！\n  - 值得一提的是，我队仅花了不到一半的比赛时间就已经 AK，充分展示出了 @_O_v_O_ 与 @Mary3327 的超强实力！\n- 在我队范围内，我队勇夺第一并（疑似）成功摘铜，领跑我队！","tags":["ACM","THUPC"],"categories":["OI","游记"]},{"title":"[AT TTPC2024 D1C] Segment Tree 题解","url":"/article/AT-TTPC2024-D1C-Segment-Tree-题解/","content":"\n把原图放到线段树上。首先拿一棵类似线段树的东西维护一下从区间左端点向右走到区间右端点的最短路。考虑把 $s \\to t$ 拆成 $s \\to p \\to q \\to t$，其中 $s \\to p$ 是向上走的，$p \\to q$ 是横着走的（允许 $p = q$），$q \\to t$ 是向下走的，向上和向下走的过程中允许横着走。设 $f(x) = 2^n$，特别地，$f(2^n) = 2^{n + 1} - 1$，表示点 $x$ 对应树上的结点 $f(x)$。容易发现，$s \\to p$ 上可能经过的点一定是 $f(x)$ 所有的祖先（包括其本身）的左右端点，设这个点集为 $S$，显然 $|S|$ 是 $O(n)$ 的，且容易通过 DP 求出 $s$ 到 $S$ 中每个点的距离。$q \\to t$ 同理，于是处理出路径上可能到达的点，再根据一些可能的情况更新答案即可，详见代码。时间复杂度 $O(nq)$。\n\n[Submission](https://atcoder.jp/contests/ttpc2024_1/submissions/71645179)。","tags":["数据结构","模拟"],"categories":["OI","题解"]},{"title":"[CF2173E] Shiro's Mirror Duel 题解","url":"/article/CF2173E-Shiro-s-Mirror-Duel-题解/","content":"\n我是智障吧，赛时代码删一行就过了。\n\n设 $pos_i$ 表示 $i$ 在 $p$ 中的下标。\n\n若 $n$ 是奇数，首先把 $\\frac{n + 1}{2}$ 放到位置 $\\frac{n + 1}{2}$ 上，期望 $O(1)$ 次询问。\n\n容易注意到，对于 $i$，若 $pos_i + pos_{n + 1 - i} = n + 1 - i$，即 $i$ 与 $n + 1 - i$ 的位置关于中点对称，此时若询问一次 $(1, pos_i)$，一定能把 $i$ 与 $n + 1 - i$ 中的一个复原。但是既然都复原了一个，为什么不把另一个也复原了呢？设复原 $i$ 与 $n + 1 - i$ 之前的 $pos_i$ 为 $x$，那么考虑反复询问 $(1, x)$ 直到 $i$ 与 $n + 1 - i$ 复原。算一下这个东西的期望，有 $T = 1 + \\frac 1 2 + \\frac 1 2 (1 + T)$，解得 $T = 4$，所以这一部分需要 $2n$ 次询问。\n\n考虑如何使 $pos_i + pos_{n + 1 - i} = n + 1 - i$，显然只用询问一次 $(pos_i, n + 1 - pos_{n + 1 - i})$ 即可，所以这一部分需要 $\\frac 1 2 n$ 次询问。\n\n然后就做完了，总共是 $\\frac 5 2 n$ 次询问，多给了 $800$ 是因为随机化。\n\n[Submission](https://codeforces.com/contest/2173/submission/352141704)。","tags":["Ad-hoc","交互"],"categories":["OI","题解"]},{"title":"2025 年 12 月日祭","url":"/article/diary/2025/12/","content":"\n### DP 专题\n\n[Link](https://vjudge.net/contest/735365)\n\n- A - Matching\n\n  唐。\n\n- B - 乘积，欧拉函数，求和\n\n  类似 G。\n\n- C - 互不侵犯\n\n  唐。\n\n- D - Eat The Trees\n\n  插头 DP 模板弱化版。\n\n- E - Tree Planting\n\n  屎。考虑分治，对于 $k$ 较小和较大的情况分开讨论，两种情况的暴力都是好写的，只需要再剪剪枝卡卡常就能过了。\n\n- F - 游园会\n\n  DP 套 DP 板子。设 $f_{i, j}$ 表示文本串的前 $i$ 位与模式串的前 $j$ 位的 LCS，$dp_{i, st, j}$ 表示考虑到了文本串的第 $i$ 位，$f_i = st$，且匹配 $\\texttt{NOI}$ 匹配了 $j$ 位的方案数。发现 $f_i - f_{i - 1} \\in \\{0, 1\\}$，所以 $st$ 只用记录 $f$ 的差分数组。直接转移即可，时间复杂度 $O(nk2^k)$。\n\n- G - 寿司晚宴\n\n  考虑如何方便地表示出一个数质因数。发现对于任意一个数，它至多拥有一个 $\\gt \\sqrt n$ 的质因数，于是考虑把 $\\le \\sqrt n$ 的质数状压一下，再单独记录 $\\gt \\sqrt n$ 的质因数（若有）。考虑按照 $\\gt \\sqrt n$ 的质因数分类，没有 $\\gt \\sqrt n$ 的质因数的数每个数单独分为一类。容易发现，对于每一类数，要么只有 A 取，要么只有 B 取，要么都不取。除此之外，还有最基础的 $\\le \\sqrt n$ 的质因数不交的限制。于是考虑设 $dp_{i, st1, st2}$ 表示考虑了 $i$ 类，当前 A 和 B 的状态分别是 $st1, st2$，直接转移即可。\n\n- H - 集合选数\n\n  发现建图过后这东西就是若干个残缺的网格图，对于每个网格图 DP 一下即可。\n\n- I - 一双木棋 chess\n\n  记搜即可。\n\n- K - 滚榜\n\n  哦哦看错题了。\n\n  首先容易写出 $O(n!n)$ 暴力，发现判断合法时只关注相邻的两个队，于是考虑拆拆贡献，就彻底只与相邻两个队有关了。设 $dp_{st, i, j}$ 表示当前选了 $st$，其中最后选的一个队是 $i$，当前花了 $j$ 费的方案数，转移枚举下一个选的队即可。\n\n- L - 卡牌\n\n  类似 B 和 G，但是加了个容斥就不会了呜呜呜。\n\n  发现容斥过后，每部分是独立的，所以可以直接相乘。然后直接暴力容斥即可。\n\n- M - V\n\n  原。\n\n- N - 巧克力\n\n  绷，不会博弈论。会了博弈论之后就是一个简单数位 DP 了，需要卡常。\n\n- O - XOR Triangle\n\n  扫码题。\n\n- P - 同类分布\n\n  唐题。\n\n- Q - Minecraft\n\n  唐题，进位数量是 $O(n)$ 的，所以 $O(nk)$ DP 即可。\n\n- S - NRE\n\n  唐题，设 $dp_{i, j}$ 表示考虑到 $i$ 并且向后覆盖了 $(i, j]$ 的最小值，线段树搞搞即可。\n\n- T - Isolation\n\n  分块优化 DP 倒是第一次见。转化一下题意，变成区间 $\\mathrm{key} \\pm 1$，查询前缀 $\\mathrm{key} \\le k$ 的 $\\mathrm{val}$ 之和。对于每个块，维护 $\\mathrm{res}$ 表示块内的答案，$\\mathrm{lz}$ 表示懒惰标记，$\\mathrm{sum}_i$ 表示 $\\mathrm{key} = i$ 的 $\\mathrm{val}$ 之和。对于修改，只需要同时维护 $\\mathrm{sum}_i$ 与 $\\mathrm{res}$ 即可，查询可以直接查。\n\n### Codeforces Round 1068 (Div. 2)\n\n[Link](https://codeforces.com/contest/2173)\n\n差点切 E Round。\n\n- E - Shiro's Mirror Duel\n\n  [Solution](/article/CF2173E-Shiro-s-Mirror-Duel-题解/)。\n\n- F - Isla's Memory Thresholds\n\n  不难想到，对于一次询问，出现的不同步长的数量是 $O(\\sqrt n)$ 级别的，并且步长是单增的，于是不难想到根分。设阈值 $B$，对于步长 $\\le B$ 的部分，我们可以把询问离线下来，并且预处理出对于每个 $x$ 与每个步长，可以走到最右侧的位置；对于步长 $\\gt B$ 的部分直接暴力二分即可。理论上，当 $B = \\sqrt {n \\log n}$ 时，时间复杂度为 $O(n \\sqrt {n \\log n})$。实际上，因为第二部分显然跑不满，所以 $B$ 小一些还跑得更快。\n\n### Codeforces Round 1069 (Div. 1)\n\n[Link](https://codeforces.com/contest/2174)\n\n傻逼 Round。\n\n- C1 / C2 - Beautiful Patterns\n\n  傻逼题吧，只能说是我没见过这样的 trick。\n\n  题意可以转化为选两个回文串的方案数。考虑枚举两个回文串各自的长度再计算，此时又分为两种情况，一种是两个串的回文中心相同，另一种是不同。注意到对于后者，无论两个串是否相交，两个串是回文串的期望是独立的，所以可以直接算。再随便搞搞就 $O(n)$ 了。\n\n- D - Secret Message\n\n  为啥赛时过的人这么少。\n\n  注意到如果最小的 $n - 1$ 条边不构成树就直接做完了，所以考虑最小的 $n - 1$ 条边构成树的情况。发现此时可以删掉一条边再加一条边，具体地，若删掉 $(fa_u, u)$，新增 $(p, q)$，那么要么 $p, q$ 都在 $u$ 的子树中，要么都不在 $u$ 的子树中，这一部分可以用 LCA 和扫描线实现。但是可能不止删一条边，那么贪心地，考虑删掉第 $n - 2, n - 1$ 小的边并加上第 $n, n + 1$ 小的边，这种情况错解不优，所以就做完了。时间复杂度 $O((n + m) \\log n)$。\n\n### NOIP 模拟赛 20251213\n\n[Link](https://junior.local.cwoi.com.cn:8443/contest/C0452)\n\nNOIP- 模拟赛。\n\n- A - 平均\n\n  唐。\n\n- B - 逃离奶龙\n\n  板。\n\n- C - 碰大碰车战\n\n  [Link](https://atcoder.jp/contests/ttpc2024_1/tasks/ttpc2024_1_c)。[Solution](/article/AT-TTPC2024-D1C-Segment-Tree-题解/)。\n\n- D - 和求\n\n  [Link](https://www.luogu.com.cn/problem/P10175)。这是真模数技巧。考虑把原式变成 $\\prod \\limits_{v \\in S} (a_v + |S|) = \\prod \\limits_{v \\in S} (xU + (y + a_v))$，其中 $|S| = xU + y\\ (0 \\le y \\lt U)$。暴力把这个式子拆开，变成一堆乘积的和，发现对于一坨乘法，若其中有 $\\ge V$ 个 $xU$，这个式子在模意义下就是 $0$，于是只用关注 $\\lt V$ 个 $xU$ 的式子。设 $dp_{i, j, k}$ 表示连通块以 $i$ 为根、大小为 $j$、取了 $k$ 个 $xU$ 的答案，这个 DP 是 $O(n^2V^2)$ 的。发现 $xU$ 显然可以最后再计算，并不影响 DP 过程，所以这个 DP 只与 $y$ 有关，而 $y$ 的取值只有 $V$ 个，所以对于每个 $y$ 做一次 DP，时间复杂度 $O(n^2UV^2)$\n\n### 容斥、计数专题\n\n[Link](https://vjudge.net/contest/763708)\n\n基本原理：$f(S) = \\sum \\limits_{T \\subseteq S} g(T) \\Leftrightarrow g(S) = \\sum \\limits_{T \\subseteq S} (-1)^{|S| - |T|} f(T)$\n\n主要类型：\n\n- 一般容斥\n  - 子集容斥（SOSDP / 高维前缀和）\n  - 通过 DP 与组合数学进行计数\n  - 在 DP 中直接计算容斥系数\n- 反射容斥\n- 人工容斥\n\n- A - 810975\n\n  推式子题。\n\n- B - 硬币购物\n\n  人工容斥题。\n\n- C - 旋转排列\n\n  推式子题。\n\n- E - Timber\n\n  推式子题。\n\n- K - 染色问题\n\n  反复容斥题。\n\n- L - 游戏\n\n  容斥之后转化为树上背包。\n\n- M - 唱、跳、rap和篮球\n\n  考虑容斥，难点在于计算 $\\sum \\limits_{a + b + c + d = n} \\frac{n!}{a!b!c!d!}$，发现本题 $O(n^3)$ 可过，然后就做完了。\n\n  考虑 $O(n^2)$ 做法，把上式拆成 $\\sum \\limits_{x + y = n} (\\sum \\limits_{a + b = x} \\binom{x}{a}) (\\sum \\limits_{c + d = y} \\binom{y}{b})$，发现里面的式子可以 $O(n^2)$ 预处理，所以整体就可以 $O(n^2)$ 了。\n\n- N - At Most 2 Colors\n\n  设 $dp_i$ 表示考虑前 $i$ 位的答案。发现转移有两种，第一种是前 $k - 1$ 个位置颜色不同，那么当前这个位置有且仅有两种选择；第二种是前 $k - 1$ 个位置颜色相同，那么当前这个位置可以涂任意颜色。所以有 $dp_i = 2 dp_{i - 1} + (c - 2) \\cdot dp_{\\max(1, i - k + 1)}$，初始状态是 $dp_1 = c$。\n\n- O - Square Constraints\n\n  个人感觉是严格小于员工招聘的。把图画出来是环形的四分之一，我们对前一半，令 $l \\leftarrow l - 1$；对后一半，令 $l \\leftarrow r$。考虑对前一半容斥。首先对所有位置按照 $l$ 排序。我们称一个位置被选了，当且仅当它初始在前一半并最后系数为 $1$。枚举 $k$ 表示共有 $k$ 个位置被选，设 $dp_{i, j}$ 表示前 $i$ 位置有 $j$ 个被选的方案数，转移是容易的，讨论一下当前位置是否被选即可。\n\n- P - Road of the King\n\n  有趣题，并非很困难，那我咋不会。整个图的信息显然是冗余的，尝试减少信息量。考虑这条路径在做什么，发现它是先经过一些点，再把这些点“带回”$1$ 所在的 SCC。于是容易设 $dp_{i, j, k}$ 表示当前经过了 $i$ 条边，$1$ 所在的 SCC 大小为 $j$，总共经过的点数是 $k$ 的方案数。对于转移，分讨下一个点的类型即可。\n\n- Q - Pass to Next\n\n  好困难。转化一下题意，即对于所有满足 $\\forall i \\in [1, n], 0 \\le x_i \\le a_i\\ \\land\\ \\min \\limits_{i = 1}^n \\{x_i\\} = 0$ 的 $x$，求出 $\\sum \\limits_x \\prod \\limits_{i = 1}^n (a_i - x_i + x_{i - 1})$。首先把最小值为 $0$ 的条件人工容斥掉。接下来，可以对这个式子直接暴力拆开求解递推式，也可以状物求出递推式。对于断环为链，只需要修改 DP 的初始值即可。\n\n- R - Good Division\n\n  困难题，做这题时感觉被降智了一样。首先容易转化成每个区间没有绝对众数，并写出一个 $O(n^2)$ 的 DP。发现有效的转移数量是 $O(n^2)$ 的，于是直接优化没什么前途。考虑人工容斥，求出所有位置的 DP 值之和与不合法的位置的 DP 值之和，其中前者显然是好维护的，考虑如何维护后者。考虑新加一个元素对后者产生的影响，发现暴力枚举还是 $O(n^2)$ 的。尝试减少枚举次数，对于每个位置，处理出当它作为区间左端点或右端点时，有哪些数可能成为区间的绝对众数，而这个东西的总和是 $O(n)$ 的。于是拿桶维护即可，时间复杂度 $O(n \\log n)$。\n\n- S - First Come First Serve\n\n  牛牛题。考虑第 $i$ 个人，他有 $2$ 的贡献，当 $(A_i, B_i)$ 里面没数时有额外的 $-1$ 的贡献。设第 $p$ 个人到第 $q$ 个人的一个端点在 $(A_i, B_i)$ 中，那么要让第 $i$ 个人有 $-1$ 的贡献，显然可以确定 $[p, q]$ 的安排，于是令 $dp_q - dp_{p - 1} \\to dp_q$ 即可。\n\n- T - LEQ and NEQ\n\n  原题。\n\n- U - MST on Line++\n\n  拆贡献题，讨论一条边什么时候出现即可，有点无聊。\n\n- V - Colorful Balls\n\n  唐唐题，发现最多只有一个 $\\gt 1$ 的连通块，找一下这个连通块中的点即可。\n\n- W - A Nameless Counting Problem\n\n  牛牛题。单调不降是困难的，因为存在相同的数。发现相同的数可以消掉，所以可以转化为单调递增，从而又转化为互不相同。设 $g_i$ 表示长度为 $i$、值域为 $[0, M]$、异或和为 $x$ 且元素互不相同的序列数量，那么答案可以用 $g_i$ 表示出。可是求 $g_i$ 又是困难的，考虑先求出允许相同的方案数，这可以 $O(n^3 \\log m)$ 求出。考虑容斥，对于当前长度 $i$，枚举 $x$ 表示出现奇数次的数值的数量，$y$ 表示出现奇数次的元素的数量，$z$ 表示出现偶数次数值的数量，那么令 $g_i$ 减去一个系数乘 $g_x$ 即可，系数分两次计算即可做到 $O(n^3)$。\n\n- X - 局部极小值\n\n  考虑暴力容斥，枚举所有可能的情况。对于每一种情况，用状压 DP 即可。\n\n- Y - 图腾\n\n  牛牛题。通过一些想象力进行人工容斥，答案可以变成几个好求的东西。树状数组维护即可。\n\n- Z - Yet Another ABC String\n\n  牛牛题。难点在于不合法子串可能合一起，所以难以对不合法子串进行容斥。既然不合法子串可能合一起，那就定义不合法子串是极长的，这样就可以容斥了。枚举不合法子串数量 $i$，其他字符的方案数是好算的，把 $i$ 个不合法子串插进去，因为串是极长的，所以除了开头的串，每个串都只有两种方案（不能和前面接上）。稍微讨论一下是否有串在开头即可。\n\n#### 反射容斥\n\n1. 求从 $(0, 0)$ 向上或向右走到 $(x, y)$ 且不触碰直线 $y = x + a$ 的方案数。设 $(x', y')$ 与 $(x, y)$ 关于 $y = x + a$ 对称。考虑人工容斥，用总方案数减去触碰直线的方案数，后者是 $(0, 0)$ 走到 $(x', y')$ 的方案数。\n\n2. 求从 $(0, 0)$ 向上或向右走到 $(x, y)$ 且不触碰直线 $y = x + a$ 和直线 $y = x + b$ 的方案数。考虑容斥，设 $f(A)$ 表示触碰过一次 $y = x + a$ 的方案数（连续触碰也只算一次），$f(B)$ 同理，那么答案应为 $f(\\varnothing) - f(A) - f(B) + f(AB) + f(BA) - f(ABA) - f(BAB) + \\ldots$，时间复杂度 $O(\\frac{n + m}{|a - b|})$，因为翻折那么多次后就没有贡献了。\n\n- D - 骗我呢\n\n  转化一下限制即可。\n\n- F - count\n\n  牛牛题。首先考虑用什么东西来刻画区间最值，想到了笛卡尔树，那么两个序列同构当且仅当笛卡尔树的结构相同，所以考虑对不同的树计数。考虑把好的序列的限制放到树上，第二条限制是 $n \\ge m$，第一条限制是左链长度（点数）$\\le m$。发现限制左链很难受，所以把每条左链拆下来，形成一棵新树，限制转化为深度（边数）$\\le m$，容易发现新树和原树形成双射。再把新树转为括号序列，就可以反射容斥了。\n\n- G - Bessie and Cards\n\n  画一个函数，$x$ 轴是抽卡次数，$y$ 轴是当前剩余摸卡次数。抽 $0$ 卡和特殊卡相当于 $-1$；抽 $1$ 卡相当于 $0$，完全没用，不用考虑；抽 $2$ 卡相当于 $+1$。画出来过后将其旋转 $45^\\circ$ 即可。\n\n- H - Again Counting Arrays (Easy Version)\n\n  显然容易把数 $a$ 转化为数 $b$ 再算算贡献，反射容斥是 $O(\\frac{n^2}{m})$ 的，而直接 DP 是 $O(nm)$ 的，根分一下即可。\n\n- I - No Streak\n\n  牛牛题。暂不考虑第四个条件，即去掉反射容斥，此时可以 $O(n)$ 组合意义搞搞求出答案。我太菜了不会这一步。考虑如何反射容斥，发现碰到线的前一步一定是 Bob 胜，而接下来有以下三种情况：\n\n  - Alice 胜，反射后是 Bob 胜。因为不能连胜，所以需要强制插一个 Bob。\n  - 插一个平局，接下来 Alice 胜或平局。\n  - 插一个平局，接下来 Bob 胜。因为不能连胜，所以需要强制插一个 Bob。\n\n  用总方案数减去这三者即可。\n\n- J - 生成字符串\n\n  转化一下限制即可。\n\n### NOIP 模拟赛 20251219\n\n[Link](https://junior.local.cwoi.com.cn:8443/contest/C0454)\n\n- A - 序列\n\n  [Link](https://codeforces.com/problemset/problem/1861/E)。DP 搞搞即可。\n\n- B - 公司\n\n  [Link](https://atcoder.jp/contests/cf16-exhibition-final/tasks/cf16_exhibition_final_e)。最终的形态一定是若干棵最小生成树。所以预处理出每个子集的最小生成树，再 DP 一下即可。\n\n- C - 种树\n\n  [Link](https://codeforces.com/problemset/problem/1884/E)。第一问是积木大赛，考虑第二问。重新定义 $a_i$ 后，$\\exists a_i = 0$。以这个位置为分界点，求出从这个位置开始的前缀与后缀的答案，就可以求出对于每个断点的答案。求前后缀答案的时候用单调栈维护一下即可。\n\n- D - 游戏\n\n  [Link](https://codeforces.com/problemset/problem/1534/H)。考虑以 $f$ 为根，设 $dp_u$ 表示确定 $u$ 子树内的端点或确定 $u$ 子树内没有端点的最小询问次数，有 $dp_u = \\max \\limits_{v_i \\in son(u)} \\{dp_{v_i} + i\\}$。为了最小化 $dp_u$，显然需要对它的儿子按照 $dp$ 值从大到小排序。因为我们需要以每个点为根求一次答案，所以换根 DP 即可。对于交互，按照 DP 的理解模拟即可。\n\n### Codeforces Global Round 31 (Div. 1 + Div. 2)\n\n[Link](https://codeforces.com/contest/2180)\n\nAd-hoc Round，ABED hyw？\n\n- C - XOR-factorization\n\n  讨论 $k$ 是偶数的情况。对于 $n$ 从高位到低位考虑，若第 $i$ 位是 $1$，则从 $a$ 中尽量选一个非 $n$ 的数异或上 $2^i$，这保证了 $a$ 的异或和为 $n$；否则从 $a$ 中选偶数个非 $n$ 的数（尽可能多）并将它们分别异或上 $2^i$，因为是从高到低考虑的，所以这之后每个数依然 $\\le n$，且最大化了 $a$ 之和。\n\n- D - Insolvable Disks\n\n  贪心 + 模拟，维护当前区间右端点的范围即可。\n\n- E - No Effect XOR\n\n  [Solution](/article/CF2180E-No-Effect-XOR-题解/)。\n\n- F - Control Car\n\n  傻逼题，不如玩原神。\n\n### NOIP 模拟赛 20251227\n\n[Link](https://junior.local.cwoi.com.cn:8443/contest/C0456)\n\n- A - 出关\n\n  求出 Z 函数之后优先队列优化 DP 即可。\n\n- B - 补天\n\n  按照题意模拟即可。\n\n- C - 理水\n\n  先缩个点，对于每个边双，若其中有 $1$ 边，那么这个边双内的点可以到达所有点。缩点过后形成一棵树，对于树上的两个点，若其简单路径上有 $1$ 边或 $1$ 点，那么这两个点可达。模拟即可。\n\n- D - 非攻\n\n  无聊推式子题。\n\n### Good Bye 2025\n\n[Link](https://codeforces.com/contest/2178)\n\n上分场，Hello 2026 能否送我上橙呢？\n\n- D - Xmas or Hysteria\n\n  $2m > n$ 时显然无解，$2m \\le n$ 时容易构造，$m = 0$ 的时候需要特判。\n\n- E - Flatten or Concatenate\n\n  显然二分一下，把数组分成两段，最大值一定在更短的那一侧出现，于是递归即可，次数是 $O(\\log^2 n)$ 的。\n\n- F - Conquer or of Forest\n\n  典中典中典中典中典中典中典中典中典中典中典。对于一棵子树，若其根是白色，其它点都是黑色，那么把它拆下来再安回去，它的根依然是黑色，其他点依然是白色，且不对外部产生影响。所以直接把所有白点断开，形成若干个连通块，剩下的数数是好做的。\n\n- G - deCH OR Dations\n\n  笑点解析：场切了 ABC424F 但是不会随机赋权的 trick。设 $f_i$ 表示以第 $i$ 条弦结尾的链的数量的奇偶性，设 $g_i$ 表示对于以第 $i$ 条弦结尾的所有链，每条链的弦的集合的异或和，那么问题就转化为了求 $\\forall \\ell \\in [1, n], [\\mathop{\\oplus} \\limits_{i = 1}^\\ell g_i = \\varnothing]$，于是只需要求出 $g_i$ 就可以求出答案。显然有 $g_i = (\\mathop{\\oplus} \\limits_{i \\text{ intersects with } j} g_j)\\ \\oplus [f_i]\\{i\\}$，对于每条弦随机赋权并集合哈希即可。\n\n- H - Create or Duplicate\n\n  感觉比较 Ad-hoc，看了 Tag 和两个 Hints 就会了。考虑只有 $a$ 的情况，显然直接同余最短路即可。发现「把一类物品翻倍」非常困难，只能考虑「把所有物品翻倍」。发现若初始时没有物品，我们可以通过后者达到前者的效果，但题目要求三个物品初始各有一个，于是再额外加一维表示当前选了哪些物品即可。\n\n- I - Numbers or Fireworks\n\n  嘟嘟嘟的非多项式时间复杂度题。考虑建图，可以证明这个图一定是二分图。钦定左侧的点更少。枚举左侧有哪些点是黑点，一一考虑右侧的点是黑点还是白点，设 $dp_{i, st}$ 表示考虑了右侧的前 $i$ 个点且左侧的白点中已匹配右侧黑点的点集为 $st$ 的方案数，转移是个 SOSDP 的形式，理论时间复杂度 $O(n^2 3^{\\lfloor \\frac n 2 \\rfloor})$，有小常数。\n\n### Educational Codeforces Round 186\n\n[Link](https://codeforces.com/contest/2182)\n\n下分场，主要是赛时 D 和 E 做太慢还吃了几发罚时。这下 Hello 2026 难以橙名了吧。\n\n这场好招笑啊，第一次独立订完一场 Div. 2，虽然我没场切 F1 / 2 更招笑。\n\n- F - Christmas Reindeer\n\n  [Solution](/article/CF2182F1-2-Christmas-Reindeer-题解/)。\n\n- G - Short Garland\n\n  之前没怎么写过长链剖分优化 DP，写这道题就当练板子了。设 $dp_{i, j}$ 表示以 $i$ 为根，$i$ 子树中最后一个点到 $i$ 的距离为 $j$ 的方案数，转移是显然的。因为第二维与深度有关，所以长链剖分即可。时间复杂度 $O(n \\log \\mathrm{Mod})$，$\\log$ 是因为快速幂。","tags":["日祭"],"categories":["OI","记录"]},{"title":"NOIP 2025 游寄","url":"/article/NOIP-2025-游寄/","content":"\nT2 放紫我死磕牛魔呢。\n\nT2 放紫我死磕牛魔呢。\n\nT2 放紫我死磕牛魔呢。\n\nT2 放紫我死磕牛魔呢。\n\nT2 放紫我死磕牛魔呢。\n\nT2 放紫我死磕牛魔呢。\n\nT2 放紫我死磕牛魔呢。\n\nT2 放紫我死磕牛魔呢。\n\nT2 放紫我死磕牛魔呢。\n\nT2 放紫我死磕牛魔呢。\n\n---\n\n你说得对，但是：\n\n![](/images/NOIP-2025-%E6%B8%B8%E5%AF%84/pic1.jpg)\n\n![](/images/NOIP-2025-%E6%B8%B8%E5%AF%84/pic2.jpg)\n\n![](/images/NOIP-2025-%E6%B8%B8%E5%AF%84/pic3.jpg)\n\n![](/images/NOIP-2025-%E6%B8%B8%E5%AF%84/pic4.jpg)\n\n![](/images/NOIP-2025-%E6%B8%B8%E5%AF%84/pic5.jpg)\n\n![](/images/NOIP-2025-%E6%B8%B8%E5%AF%84/pic6.png)\n\n![](/images/NOIP-2025-%E6%B8%B8%E5%AF%84/pic7.jpg)\n\n![](/images/NOIP-2025-%E6%B8%B8%E5%AF%84/pic8.jpg)\n\n@[dpfs](https://www.luogu.com.cn/user/655119) 终于实现了 TA 的梦想。\n\n![](/images/NOIP-2025-%E6%B8%B8%E5%AF%84/pic9.jpg)\n\n请原谅这劣质的画质与劣质的 P 图。\n\n---\n\n后记：\n\n原来我赛时 T2 的做法基本是对的，似乎是一些细节写挂了导致没调出来。","tags":["NOIP","休闲娱乐"],"categories":["OI","游记"]},{"title":"[CF1586I] Omkar and Mosaic 题解","url":"/article/CF1586I-Omkar-and-Mosaic-题解/","content":"\n下文中：\n\n- 视题目中的两种颜色为黑色与白色。图示中所有颜色均只是为了表示颜色的相同或不同，且白色代表未填充。\n- 记 $(x, y)$ 表示第 $x$ 行第 $y$ 列的格子。\n- 认为两个格子“相等”或“不等”，当且仅当两个格子的颜色相同或不同。\n\n---\n\n难点在于观察性质。\n\n考虑在没有任何限制的情况下，一组合法解有哪些性质。有两个基本性质是：\n\n- 位于角落的格子的颜色与其相邻的格子颜色相同。\n- 对于一个不在边缘的格子，它的四联通中，恰好有 $2$ 个黑色格子与 $2$ 个白色格子。\n\n---\n\n初始我们没有进行任何涂色。\n\n![](/images/CF1586I-Omkar-and-Mosaic-%E9%A2%98%E8%A7%A3/pic1.png)\n\n---\n\n根据第一个性质，可以如下涂色。\n\n![](/images/CF1586I-Omkar-and-Mosaic-%E9%A2%98%E8%A7%A3/pic2.png)\n\n---\n\n根据第二个性质，可以不断扩展。\n\n![](/images/CF1586I-Omkar-and-Mosaic-%E9%A2%98%E8%A7%A3/pic3.png)\n\n---\n\n注意到，当 $n$ 为奇数时，中间格子的颜色一定会产生冲突，所以 $n$ 为奇数时一定不合法。\n\n![](/images/CF1586I-Omkar-and-Mosaic-%E9%A2%98%E8%A7%A3/pic4.png)\n\n{% folding title=\"为什么\" class=\"blue\" %}\n\n对于主对角线，有 $(4, 5) \\ne (5, 6)$；对于副对角线，有 $(4, 5) = (5, 6)$。\n\n{% endfolding %}\n\n---\n\n依然是由于第二个性质，对于如图所示的这些斜列，每个斜列的颜色都是黑白交替的。图中只展示了一个方向的斜列，另一个方向同理。\n\n![](/images/CF1586I-Omkar-and-Mosaic-%E9%A2%98%E8%A7%A3/pic5.png)\n\n{% folding title=\"为什么\" class=\"blue\" %}\n\n例如对于 $(4, 2)$，第二个性质要求 $(3, 2), (4, 1), (4, 3), (5, 2)$ 中两黑两白，又因为 $(3, 2) \\ne (4, 3)$，所以 $(4, 1) \\ne (5, 2)$。\n\n其余位置同理。\n\n{% endfolding %}\n\n---\n\n考虑网格的一个角落，有 $(1, 3) = (3, 1)$，又有 $(1, 3) = (1, 4), (3, 1) = (4, 1)$，故有 $(1, 3) = (1, 4), (3, 1) = (4, 1)$。依此类推，我们可以得到两个重要结论：\n\n- 网格关于主对角线与副对角线对称。\n- 有 $(1, 2x - 1) = (1, 2x)\\ (x \\in [1, \\frac n 2])$。\n\n{% folding title=\"为什么&nbsp;$(1,3)=(1,4),(3,1)=(4,1)$\" class=\"blue\" %}\n\n因为 $(1, 2) \\ne (2, 3)$，为了让 $(1, 3)$ 有两个相邻的格子与它颜色相同，我们只能让 $(1, 4)$ 与它颜色相同。\n\n$(3, 1) = (4, 1)$ 同理。\n\n{% endfolding %}\n\n![](/images/CF1586I-Omkar-and-Mosaic-%E9%A2%98%E8%A7%A3/pic6.png)\n\n{% folding title=\"如何“依此类推”\" class=\"blue\" %}\n\n上图的下一步会变成：\n\n![](/images/CF1586I-Omkar-and-Mosaic-%E9%A2%98%E8%A7%A3/step1.png)\n\n在上图中，颜色是这样确定的：\n\n- $(2, 5)$：因为 $(2, 3) \\ne (3, 4)$，所以 $(1, 4) \\ne (2, 5)$，也就是（部分）斜列颜色黑白交替的性质。\n- $(5, 2)$：与 $(2, 5)$ 同理，且显然有 $(2, 5) = (5, 2)$。\n- $(1, 6)$：与 $(1, 4)$ 同理，因为 $(1, 4) \\ne (2, 5)$，所以 $(1, 5) = (1, 6)$。\n- $(6, 1)$：与 $(1, 6)$ 同理，且显然有 $(1, 6) = (6, 1)$。\n\n下一步会变成：\n\n![](/images/CF1586I-Omkar-and-Mosaic-%E9%A2%98%E8%A7%A3/step2.png)\n\n最后会变成：\n\n![](/images/CF1586I-Omkar-and-Mosaic-%E9%A2%98%E8%A7%A3/step3.png)\n\n最后这图只能当成乐子看。\n\n{% endfolding %}\n\n---\n\n可以证明，上述条件是充要的。\n\n考虑题目中给的限制。我们可以根据斜列与对称的关系，将所有限制都转化到第一行，再根据 $(1, 2x - 1) = (1, 2x)\\ (x \\in [1, \\frac n 2])$ 尝试补全第一行。最后，若第一行被补全了，那么有唯一解；若第一行未被补全，那么有多解；若转化与补全过程中有矛盾，那么无解。\n\n若有唯一解，再根据第一行推出整个网格即可。\n\n代码是好写的，就不放了（实则是因为我的代码写得一坨）。","tags":["构造","Ad-hoc"],"categories":["OI","题解"]},{"title":"P14528 [BYOI R1] 雨后屋檐 题解","url":"/article/P14528-BYOI-R1-雨后屋檐-题解/","content":"\n{% folding title=\"题面&nbsp;&&nbsp;提示\" class=blue %}\n\n[P1318](https://www.luogu.com.cn/problem/P1318) 加强版，区别在于本题包含多个询问，每个询问给定查询的区间 $[l, r]$ 与最大水面高度 $H$，强制在线。[P1318](https://www.luogu.com.cn/problem/P1318) 的做法对本题有一些启发。\n\n{% endfolding %}\n\n设 $n, q$ 同阶。\n\n考虑本题的难点在哪里。发现屋顶的两侧不一定足够高，所以一些水会流出去。\n\n考虑特殊性质，此时没有水会流出去。考虑这时该怎么做。发现此时的答案为：\n\n$$\n\\sum_{i = l}^r \\max(H - h_i, 0)\n$$\n\n即：\n\n$$\n\\sum_{l \\le i \\le r, h_i \\le H} H - h_i\n$$\n\n发现这个问题相当于二维数点，于是考虑使用可持久化权值线段树解决，详见 [P10814](https://www.luogu.com.cn/problem/P10814)。\n\n去掉特殊性质，容易发现，只要一个区间两侧的屋顶高度 $\\ge H$，就可以用上述方法解决。于是我们尝试从询问的区间 $[l, r]$ 中找到一个两端高度都不小于 $H$ 的子区间。\n\n令 $H \\leftarrow \\min(\\max_{i = l}^r \\{h_i\\}, H)$，这对答案没有影响；令 $L$ 表示区间左侧第一个满足 $h_i \\ge H$ 的位置 $i$；同理，令 $R$ 表示区间右侧第一个满足 $h_i \\ge H$ 的位置 $i$。计算 $L, R$ 可以通过线段树二分解决。显然 $L, R$ 一定存在。\n\n此时问题被划分为了 $[l, L)$、$[L, R]$ 与 $(R, r]$ 三段。第二段是前文中已经讨论的情况，是容易算出水的体积的。一三段的问题是对称的，所以接下来讨论第一段。\n\n接下来是 [P1318](https://www.luogu.com.cn/problem/P1318) 的结论。\n\n设位置 $i$ 的水面相对地面高度为 $a_i$。特别地，若位置 $i$ 没有水，则令 $a_i = h_i$。容易注意到，$\\forall i \\in [l, L)$，有：\n\n$$\na_i = \\min(\\max_{j = l}^i\\{h_j\\}, H)\n$$\n\n注意到前者一定小于后者，于是我们就有了第一段的答案：\n\n$$\n\\sum_{i = l}^{L - 1} \\max_{j = l}^i \\{h_j\\} - \\sum_{i = l}^{L - 1} h_i\n$$\n\n后者是容易维护的，考虑如何维护前者。前者是区间前缀最大值之和，即 [P5648](https://www.luogu.com.cn/problem/P5648)。直接使用 [P5648](https://www.luogu.com.cn/problem/P5648) 的做法即可。\n\n直接把三段的答案加在一起就可以得到总答案。\n\n时间复杂度 $O(n \\log n)$，空间复杂度 $O(n \\log n)$，有巨大常数。\n\n{% folding title=\"一个常数优化\" class=blue %}\n\n考虑优化计算 $L$ 的过程。\n\n按照 [P5648](https://www.luogu.com.cn/problem/P5648) 的做法，我们利用单调栈建了一棵树。注意到在向右连边的树中，$L$ 一定是 $l$ 的父亲或其本身，所以可以通过树上倍增来计算 $L$。\n\n$R$ 同理。\n\n{% endfolding %}\n\n{% folding title=\"Code\" class=green %}\n\n我人傻常数大，跑得挺慢的。\n\n```cpp\n#include <bits/stdc++.h>\n\n#define rep(i, s, e) for(int i = s; i <= e; ++i)\n#define _rep(i, s, e) for(int i = s; i >= e; --i)\n\n#define uint unsigned int\n#define uint64 unsigned long long\n\nusing namespace std;\n\nconst uint N = 500000;\n\ntemplate <typename T>\ninline void read(T &x) {\n\tuint neg = 1; char ch;\n\twhile (ch = getchar(), !isdigit(ch)) if (ch == '-') neg = -1;\n\tx = ch - '0';\n\twhile (ch = getchar(), isdigit(ch)) x = (x << 3) + (x << 1) + (ch ^ '0');\n\tx *= neg;\n}\n\ntemplate <typename T>\ninline void write(T x) {\n\tif (x < 0) putchar('-'), x = -x;\n\tif (x > 9) write(x / 10);\n\tputchar(x % 10 + '0');\n}\n\n// 可持久化权值线段树 \nstruct Segtree {\n\tuint rt[N + 5], ls[N << 5], rs[N << 5], cnt[N << 5], cntnode = 0;\n\tuint64 sum[N << 5];\n\tvoid build(uint l, uint r, uint &p) {\n\t\tif (!p) p = ++cntnode;\n\t\tsum[p] = 0;\n\t\tif (l == r) return;\n\t\tuint mid = (l + r) >> 1;\n\t\tbuild(l, mid, ls[p]);\n\t\tbuild(mid + 1, r, rs[p]);\n\t}\n\tvoid insert(uint l, uint r, uint &p, uint rt, uint s, uint d) {\n\t\tif (!p) p = ++cntnode;\n\t\tsum[p] = sum[rt] + d;\n\t\tcnt[p] = cnt[rt] + 1;\n\t\tif (l == r) return;\n\t\tuint mid = (l + r) >> 1;\n\t\tif (s <= mid) {\n\t\t\tinsert(l, mid, ls[p], ls[rt], s, d);\n\t\t\trs[p] = rs[rt];\n\t\t} else {\n\t\t\tinsert(mid + 1, r, rs[p], rs[rt], s, d);\n\t\t\tls[p] = ls[rt];\n\t\t}\n\t}\n\tpair<uint64, uint> query(uint l, uint r, uint p, uint s, uint t) {\n\t\tif (s > t) return {0ull, 0};\n\t\tif (s <= l && r <= t) return {sum[p], cnt[p]};\n\t\tuint mid = (l + r) >> 1, ans2 = 0;\n\t\tuint64 ans1 = 0;\n\t\tpair<uint64, uint> tmp;\n\t\tif (s <= mid) tmp = query(l, mid, ls[p], s, t), ans1 += tmp.first, ans2 += tmp.second;\n\t\tif (t > mid)  tmp = query(mid + 1, r, rs[p], s, t), ans1 += tmp.first, ans2 += tmp.second;\n\t\treturn {ans1, ans2};\n\t}\n} tr;\n\nuint n, q, t, h[N + 5], to[N + 5], stk[N + 5], l, r, H, L, R, tp, tmp, lfa[N + 5][20], rfa[N + 5][20];\nuint64 xl, xr, xH, ans, xorans, s[N + 5], ldep[N + 5], rdep[N + 5];\npair<uint64, uint> tmp1, tmp2;\n\nsigned main() {\n\tread(n), read(q), read(t);\n\trep(i, 1, n) {\n\t\tread(h[i]);\n\t\tto[i] = h[i];\n\t\ts[i] = s[i - 1] + h[i];\n\t}\n\tsort(to + 1, to + n + 1);\n\t// 建可持久化权值线段树 \n\ttr.build(1, n, tr.rt[0]);\n\trep(i, 1, n) {\n\t\tuint pos = lower_bound(to + 1, to + n + 1, h[i]) - to;\n\t\ttr.insert(1, n, tr.rt[i], tr.rt[i - 1], pos, h[i]);\n\t}\n\th[0] = h[n + 1] = 1e9 + 7;\n\t// 建向右的树 \n\ttp = 0;\n\trep(i, 1, n + 1) {\n\t\twhile(tp and h[stk[tp]] < h[i]) {\n\t\t\trfa[stk[tp--]][0] = i;\n\t\t}\n\t\tstk[++tp] = i;\n\t}\n\t_rep(i, n, 1) {\n\t\trdep[i] = rdep[rfa[i][0]]; \n\t\trdep[i] += 1ull * h[i] * (rfa[i][0] - i - 1);\n\t\trdep[i] -= (s[rfa[i][0] - 1] - s[i]);\n\t}\n\trfa[n + 1][0] = n + 1;\n\trep(j, 1, 19) {\n\t\trep(i, 1, n) {\n\t\t\trfa[i][j] = rfa[rfa[i][j - 1]][j - 1];\n\t\t}\n\t}\n\t// 建向左的树 \n\ttp = 0;\n\t_rep(i, n, 0) {\n\t\twhile(tp and h[stk[tp]] < h[i]) {\n\t\t\tlfa[stk[tp--]][0] = i;\n\t\t}\n\t\tstk[++tp] = i;\n\t}\n\trep(i, 1, n) {\n\t\tldep[i] = ldep[lfa[i][0]];\n\t\tldep[i] += 1ull * h[i] * (i - lfa[i][0] - 1);\n\t\tldep[i] -= (s[i - 1] - s[lfa[i][0]]);\n\t}\n\tlfa[0][0] = 0;\n\trep(j, 1, 19) {\n\t\trep(i, 1, n) {\n\t\t\tlfa[i][j] = lfa[lfa[i][j - 1]][j - 1];\n\t\t}\n\t}\n\twhile (q--) {\n\t\tread(xl), read(xr), read(xH);\n\t\tif(!t) ans = 0;\n\t\tl = xl ^ ans, r = xr ^ ans, H = xH ^ ans;\n\t\tans = 0;\n\t\tif(h[L = l] < H) {\n\t\t\t// 倍增求 L\n\t\t\t_rep(i, 19, 0) {\n\t\t\t\tif(rfa[L][i] <= r and h[rfa[L][i]] < H) {\n\t\t\t\t\tL = rfa[L][i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(rfa[L][0] <= r) L = rfa[L][0];\n\t\t}\n\t\tR = r;\n\t\tif(h[R = r] < H) {\n\t\t\t// 倍增求 R\n\t\t\t_rep(i, 19, 0) {\n\t\t\t\tif(lfa[R][i] >= l and h[lfa[R][i]] < H) {\n\t\t\t\t\tR = lfa[R][i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(lfa[R][0] >= l) R = lfa[R][0];\n\t\t}\n\t\tH = min(H, max(h[L], h[R]));\n\t\t// 处理 [L, R] \n\t\tif (L + 1 <= R - 1) {\n\t\t\ttmp = upper_bound(to + 1, to + n + 1, H) - to - 1;\n\t\t\ttmp1 = tr.query(1, n, tr.rt[R - 1], 1, tmp);\n\t\t\ttmp2 = tr.query(1, n, tr.rt[L], 1, tmp);\n\t\t\tans += 1ull * (tmp1.second - tmp2.second) * H;\n\t\t\tans -= tmp1.first - tmp2.first;\n\t\t}\n\t\tif (l <= L) ans += rdep[l] - rdep[L]; // 处理 [l, L)\n\t\tif (R <= r) ans += ldep[r] - ldep[R]; // 处理 (r, R]\n\t\txorans ^= ans;\n\t}\n\twrite(xorans);\n\treturn 0;\n}\n```\n\n{% endfolding %}","tags":["数据结构"],"categories":["OI","题解"]},{"title":"SC CSP-S 2025 迷惑行为大赏","url":"/article/SC-CSP-S-2025-迷惑行为大赏/","content":"\nSC CSP-S 2025 共有 1704 个选手文件夹，6009 个文件。\n\n## 数据统计\n\n使用 vscode 进行统计，没有排除诈骗。\n\n- `freopen`：5807 文件中有 12004 个结果\n- `dp`：292 文件中有 3437 个结果\n- `ccf`：35 文件中有 990 个结果\n- `rand` / `mt19937`：115 文件中有 299 个结果\n- 形如 `//freopen`：149 文件中有 291 个结果\n- `trie`：28 文件中有 259 个结果\n- `mst`：47 文件中有 149 个结果\n- `114514`：50 文件中有 88 个结果\n- `csp`：60 文件中有 83 个结果\n- `最小生成树`：41 文件中有 72 个结果\n- `acam`：17 文件有 60 个结果\n- `串`：23 文件中有 58 个结果\n- `贪心`：36 文件中有 45 个结果\n- `AFO`：16 文件中有 30 个结果\n- `luogu`：25 文件中有 26 个结果\n- `mian`：12 文件中有 25 个结果\n- `总司令`：11 文件中有 11 个结果\n- `1919810`：6 文件中有 7 个结果\n- `f**k`（原文已打码）：4 文件中有 9 个结果\n- `f**k`（原文未打码）：3 文件中有 4 个结果\n- `f**k ccf`（原文未打码）：2 文件中有 2 个结果\n\n## 选手代码\n\n[投稿区](https://www.luogu.com.cn/article/hlpgp0pk)\n\n以下内容已经排除了诈骗。\n\n### SC-S00001\n\n~~1 号种子选手就坠机了。~~\n\nclub.cpp\n\n```cpp \n//freopen(\"club.in\",\"r\",stdin);\n//freopen(\"club.out\",\"w\",stdout);\n```\n\n### SC-S00085\n\n输出没了。\n\nroad.cpp\n\n```cpp \nfreopen(\"road.in\",\"r\",stdin);\n//freopen(\"road.out\",\"w\",stdout);\n```\n\n### SC-S00105\n\n神秘取值。\n\nreplace.cpp\n\n```cpp \nconst long long P=0x7fa4dad,Q=0xccfdadccfdad;\n```\n\n### SC-S00216\n\n只会第一题的选手。\n\nroad/replace/employ.cpp\n\n```cpp \n//freopen(\"club.in\",\"r\",stdin);\n//freopen(\"club.out\",\"w\",stdout);\ncin>>t;\n```\n\n### SC-S00254\n\n为什么我的眼里常含泪水\n\nreplace.cpp\n\n```cpp \n//为什么我的眼里常含泪水                                                                                                                                                                                \n//因为我对信息爱得深沉          \n//却要承受比赛保龄的风险 \n```\n\n### SC-S00286\n\n不可以，总司令。\n\nreplace.cpp\n\n```cpp \ncin>>n>>m;\nfor(int i=1;i<=m;i++) cout<<0<<'\\n';\n```\n\n### SC-S00296\n\n想吃面了。\n\nemploy.cpp\n\n```cpp \nint mian()\n```\n\n### SC-S00297\n\n似乎是把 pdf 放代码里了。\n\n{% folding title=\"Code\" class=green %}\n\n以下仅为代码片段，源代码长达 72KB。\n\nemploy.cpp\n\n```cpp \n#include <iostream>\n#include <cstdio>\nusing namespace std;\n\n\nint main(){\n\tfreopen(\"employ.out\", \"w\", stdout);\n\tcout << 2 << endl;\n}\n//%PDF-1.5\n//%äðíø\n//20 0 obj\n//<</Filter/FlateDecode/Length 3098>>\n//stream\n//xÚÅ›»Žì?†s?E‡»ÁÈ,\u0016¯Àb\u0002\u0003?g\n//ŸÌv KË‰7Øh_?IâM­–ºg\u000f?\u0010z\u000e›Ô_$?\u0016)õí??þÑÍë›w??þ‚‚¿ãúïË?ùvûóßè¦õíÛ|³®‹–o\u001f?gÜíÛô¯Ÿ”rƒR>®Ÿ\u001c>??”ê~½Ø}þç?p\u000fÞîAh?÷–ÖfŠF\u0019\u0013•±ŠÍ4\u0019Û[eõÈžY…‰\fM½¡Ùo÷°?>?ëí\n//Z\u001d…Í\u000eQs¤”e¥ŒÂ…Oç¤\f6)z´tg\u0017SçÃf\u0017“ÓÊŒ\u001aö˜?>Ù`X†´2z?©»t$ßœìR9RÇ†n\u001fÚvl×Ú?¡Ð+\u001e]îÞZÛØÍŒ?¯õXw*?™¾ßÝ?Hœïdµ\\?PèR\n//šø~qƒ}c?%Si¤áRŸÑ\u0013=?½ôj?Rol\u0017ôZý‡+V?îî?Š¾??Üî¯ß\u001e\bþõÖq\föö\u001b¸í?>t\u0010©_0Ðº3*æ’ÿÝþyû¹nÐEÌÖ \u0019ßù\u0018?\u0015èØ)Š[ýÕE”ŒG´vu”N\u001b-\n//uGnos\u001fƒžè®zžXi•Ì-j¤P[»Z?])’ÂT*n5õìîj\"MQ\n//4Ü4C?ûF3\u0017]jF?³ë?\fŸ™áww5óô¨©=\\Æ…Z?]iêÀ?»ÓÔˆ\"w?é™bÔšìLçÄ]‹f)ºÒd¯ºà\\«©?\u0010Ÿ¬??\u001e5?Mµd.i\u0014\u000f E?CCèV?Q‡Ðì}…¨\tð—p¨“È?¢¬ûAMÃp†hÖ«¨½P,ˆVšÊ\"ò[5?ÑË,\u0016½Bì•^Æóe½ÂaÖ«h½Ð+h¾¬W\u0018Ìz\u0015?z\u0005Ë—?€Y®@Z? ?\f?HnEÏ\fˆØÖVH:YùÝ5’Au\u00166-\u0011\f8??Å¬SÑù¨¤Q¬´?\u0016×]©èñiÎp,š…?ÍŒc£‰\u0004HE?\u0001‹YpgHfÍŠ?Í‚äƒf@\u001f£^û»hKßý\u0019¢Y¿¢öB?ÚŽ³Œï\\ô¥ÿ??] ®•\u000fpE\n//?V\\·¢'¸j…ÔŒ¹?õ­5×¸F\u0010€ð¾.\n//4?Ïw|hðHS???Ý†è½?|kí×ñ­4k¢Ï53¾æË?Í†èSÍ‚ïƒæÛ?ý†èSý‚o;Îoâ[¤k ‹?¾ÒÂæ\u0016\n//¾©?¾Út–¨??ëK|5? Á¯;\u0018cGF&m_E7k64ïUÑ­u÷è*²H???g­ôk²Ï?Æ­~‹ñ¹~A:?”Ÿêg?õ?·¥àmi??ã½›‹C¼ÏíÈ¨g3jø‹\u0015 ¨£…Ï-VÔ·¢g¨cçíªÝ˜Tt\n//:‡NYW@\u000f?\u0015ô¤Ø ¿Ó|‚y¥zŒù2?õî\fõlA\n//ÿ?\u0019ôÆ?ÐÏ,(d'\n//\u001aüÏ,(?Xp†ú?…ídM? g?ØÛ\u00199ýÌ’Œw2¤ö€HÏq—c?\u001bÜ·¢g?\n//ÃCÅ»1?×[;m}§¡¹ä?ÏÊØ^??äï‘FíÌ\u0018ÎN\"Šv?ê?ýJ;\n//Õ¹Ïn³†\bäÒa’œëœ9C±ªøÇ•U?¾³U?²U•Ï\\XU\\?[U?[UùÎ…UÅU¾³UÙG²QÅj?ÜÆq§œoÜf+z?AwÊ¸ÊmP_»ëí§ö®3?K§ý€?\u0004q\u0013„Kw?Y¯òžG?®Rk*\u000eë`»áóƒµC‰éq¡DŸºE± xÊ•\u0005?~?…÷lA?\u0017\u0016\u0014\u0017h,H ßrdÌü?…ïlE?\u0017V\u0014??d˜³\u0001\u0005øZÿ o´Ð¦Ù®¦?x³¢\u000eKM??s½]Õ˜q»îdšÅ`è•\u001c¶œ\u0010^$\u001bè÷¢O\b/²irOP®¤jºÏ?Ê{)\u000e'??ãS©Â?½Ê\u0014\u0016©†ÕS??½J?¥š?ôH ´0ºÙq¦¢g\u0004j…z?(õ¾Þq2!½w?ÁÑÎª·Ž\t???í†ÎSõŒb?šg\u001c\u0016?ÍsÄáµN??\\žêd\b¯u\n//Y§òT'\u0013x­“ñË25E? ?´Àn¤Áo+z> ºó^?¢æ?XÄçÉh3*Lö@f˜6y?\tÙrg\\kÑVôÌ!¼¸X?¨þB¾ÁÎuA­û\u0011?*3?±»¨ãQ/? ò¼ÛF??ö]??g?\u0019\fÈ™K%ëKÉ£ýÇ{Üº OŽrìºÃŠgùK?—\\Y]­±àð0çÄ‚âsÉ‚RraAq?\n//NsN?ž™?%\u0017?Wmgäì@çÄ’ì¼É\\PÛq?¨ï¸Ùã¦¢kg?\u0014??\u000ek\u0003\u001944÷þ?üF!Rååo1 \u0015=ñ]¬sWÕé¿Ôyñ{î½\u0006?åâ\u001fí½ÅþRtÐƒ–]Ää cn(v\u0014ÖA \u0015 „´?~~X\u0013·’(œ¸ÅŸ4?áF?/?¸![«öµy?¤ÅsÂŠù¹¤±þ`ŠÑ\"ªæ%ŽT?i_`ÚO\u0005i8?ÈõCÞÞ?`KS>¢Ô\u0018\n//LxKaJÖ|\"?\u001b\\þŠ(›å ?%o?¢–:ä‰_\u0011E\u0003 $\u001aQeFzA\u0014›û\u0018ÍWDm@Üß??c!7/\b ‡ùÿ?’cù«\u0015ÖzzA4?Øø\u0015Ñh:«öClUÿ?\u0011\u0002=}©«¤ÐÂq+Ëf\u001e_‘]???Bån„G\u001e^Q\u0015 ÐöK²¬:ö¼ŸX&\u0010õŠÿ?\"2ÌŽ:O??7W‡ž[5¯³Q¥G“²Ôåÿ?¦gpG?Pß’?|bP¶Ÿõ`\u0003GMR?ÏÊQÑhÞéY@?¹ÚW>ë™>ìYÓ\\’Œ%Õi?\u001d¿R?”“`O»ÛÉ»Hr*1\u000e˜xeÔ¤îÊ?½?\"oE\u001e²C¶X\u0018L^rW«êãü\u0017,ÓØ…¨‡ÒcHó¦)bc?[?…YNÕ÷&\u001f™jÛ³SÆ~};<?½ú¸O8ByòÍIŽ±?\u001f­õïâ[5G~fiD?zÌØ?J\u001a\u001aù¾\f?\u0004?ÝÇ?c ?\u001b{\n//4\n//d}\f‚júN?v†o“YÞ˜˜¤°ïéîF\u0015?})“Wúä{?\u0013™Å»Ý·’£Ù|?ßì~Ý\\rQ¤JCÞg¢«??³·ÎvõH?òlo\u0010o¤«‡©¡lc(4¯¶ÊÑ§rèhåÐ?‡Ž{Cå­Då¾††e??ï|klªæWc\"??ÛxWÖO?N<¦Z³c?\u001b=1I=å{?Ìó€EÇëw{em?½näì»½ªš—øLsŠ¹KO?\u0004VyK|ÿ? ³~O/S®½y?CvoöÊ\u001b¤Á¹WæÝ^UÍµ?a???e‰õ\u001dë¢???|??\u0006?\tÆŸZI?j\u001et\u001aÃ??Hª¼A©ÅÚeŸi?\"¦åâ`ŒQëØîº?˜`¾Ù¢ƒ^¢ó§Ž¥i¥d=È«‘k˜Bˆšôj?v0[?„Í?«ï\u0019‘Ýow^;Œid\u0017„Y/ƒ³,?Ÿ¾wHÜœ ‚îd \u001cÊå'\b\u0013¼x$Óó\n//ÿ\u001d?5ß›v·”%\u000f?g½n=a~\u001d\u0016?O°­7N+žgC4öpÀQ?\u001dïë?Ò‚??\u001c\u001bš— Æ‚.ÙaXúf? P¼Fëwû„ÄÌ§´ÁÜßíSÕº§~\t<v\u001c\u000e?ö]Þ•?\u0018¿†R3}j/^4!Ðš?8`cJ¿o¸Ë2Î³A,WaR?Ø@\u0016?þ‹ýÇ>7`\u0003éLD?w\u0011ÿ½A¨o•õóCƒý\t?ùC@_K0a?˜A³ü!gîË\u001f2ŸëW\u001e+Óò•¸ó‡æŸ\u0004µÎäúõ>?a¼O\u0012ñ¾I8yxäž,nÈí?\u0013@ÕàËÃ=?ùÙP¤t,?N??? ê¬õå\u001b\u001a?æž?«s?†½q}??Pn¡åç@Q?h\n//¤ËZ»|Ïò? éÃ!\u0014\u001frjâmXƒEHé ,X\fŸÁð÷3ü†d\tX@?`%,?‰Ô\u0012Òzp<`V?¿t\u0011ïp6=\u0014óž?àµ\u001c0\u0001Çäâé=\u000f\f¬E<42Ë\u001a¼¤dóÛ??\u0017šŸ\u0015½‹nu\n//ÁRˆ”•ˆ\u0010¤U?M\b2ƒL?O^‚çñXiîŒ‰e¬d%?„rêTù»;÷w\u001b—·4·{!cC?¶¼3Hr’Îá–\u0004§Z\u001cu?OvL\u0003|6°éóç??Ib7?endstream\n//endobj\n//34 0 obj\n//<</Filter/FlateDecode/Length 2783>>\n//stream\n//xÚÅZIÜ?¾çW?ƒ \u0019\u0016YÜà?\u0001?ä”—ø–—Cki#F\u001c?\u0001ü÷?)j\u001b?\u001b\bŒ¶z?kûj•š_\u001bj4þQ\u0013L\u0013|R15ÝWÜø\tŸÏÓõ\u000fŸšßý‰B“TòÆ7?Í‰\u0014YnŒQÎÚæSÿ?­}«uHåjãÇ“µ\u0016wÍ¹|?øO–sôâ\u001c\u000eŠ\u0001\u00119‚û8hf‹ÏÙr\u001fØ¥‹vÆÛ`z\u001d»–©g?Õƒ??*1?\u0015’ž´vVkÖøàê½Ü«ŒmØÝa?\u0005¶Ç#-¹NsÛ©a?Y(A›æ?ç•\u0004ÒŽt\u0014\u0011„˜y3\u0017?èž\f%ÝR;€»Ž÷„ˆViŠ³\fàŒ#8ìñÝîqHQ™PÕ‡S]^ôÇOÍ¯¢”Ló­ZŠ‚Jš?Ô­X§zã_ÍßšŸ?|ex\n//2™XH?7'CÊƒªÐ4—À?R\"‚d^Û¶JæÆmI_\u0017?o?z2 m'YŽ˜²™)RÑûæä¼r‰G=pËC7˜Þ0l?ÊÂ½nV 6% ØeÜ¨D\u0010\tÛu,?öR—òj©S¢Ò*\f‡ý\u0003IYgÇUÔ¹\n// ðF”ü?¿ÑàH®–?Wcµ“«Ná’¯ŽÏù>Àž×GÖù?FM]¾§{\u0017ó•/y-ñ™W{6?|e\u001f™|\u001f ÌW ±œãz@'Ÿy(»Iòý1áÅçDx\u001dÎ´&ì}!ÜN1!.Oñ¬€rÊË¿_\u000f\bÁ¤\u0013!wÎZ\u0016‰dõ‰\n//?\u0001\n//8H\u0018?Uf5BTpäEì}?è¶×©k\u0015£›¨û??`?\u0018?\u0016H#?O1ÓÅÝ­vµÓ)\u001be#?‹Ûiîî?[|VÃÃDSPÖº5UjÏþÈìøZ?œš? ?âÉ?‹Hw\f'CÕÊÄ¶CÜmq¦×NãC\u001d‚¬?a\u001d??Èõúl;?\u0006\u0001î¨øMF\u0005qR?T\u0014Gô£#úÑ\u0011ýèˆaÄ®c\u001a\u0006¹RoSþ?Fèáw\u0010ËW!˜ÉË^?®éåo?»ˆ\u0003ŸŠ?^þY!çV P\b°ãŠ_^h\\??¬U×À=^w?O&·¡µZ\u0011”OwÂ['YqìUŠU¦_^w?ÂÓV>ìÇ¨äÇÈçs?%?éª\u0012ƒWÆT·ý²ËQRÞÚ\u001f®Ã/{? ×ì\u001c?•h\u000ft\u0004Žœ?-e¸Í‘ÎÅ‚éJ\u001dÕQÖY?ñÍ8\"¹R€7Ê•{/?ríèÒÆª…se+5R2@;Ù¸?\u001dTH?éÃ—]ö¡s?Óº·’Å`OêÎ…‡ÊU’E\u001c%??W\u000e¡Ï<·C^GCˆY¦«²…\"›ü\u001dC>?n\u001c?G|?_qÄ×{?]–ôŠ£‡Q?øÈ\u0016J\u0006º²Ë \u0003™[}n?(œð\u001a/d<IµÀÆp½o\u00139‰vÇÃZT/öj?*øx\u0003ôV\u0005ãï ½§t=p?­¯\u001fcn\u0006Žp+pX³Œ\u001cb?ÁÃ‚b½œ\u0017Pb\u001ckOª•J¨ßG9\u000e[¡|Ol?ª•y‘y=?^.?\u001f”™ìA?r*?êåÃî!N\u0019®áÇ|?SìÙ\u0013kyÄç\u0003??V?nÅuäÄ†J!?Gò«HUm%????^$\u001e´ˆPFom‡Ã\u0001„„ê_XüË?GÌž??3?ÜR?WF5´ØiPõT?¿o'¸E·?×{\"%‘²b?(9…à?]ÊXƒÂÖî?\u001cÅ©K?%?OKuc\u001dh¸UÍ{¥•ñöv5¯ç?\u0001ºŸJ°aì¨\u0017F\u0017???Î½\\Ø]‚¾?\u0013Fc®Š\u0002*P«a?\u0014tîoRÏÙ\n```\n\n{% endfolding %}\n\n### SC-S00351\n\n@[2022xsj](https://www.luogu.com.cn/user/921880)\n\n我真的没招了，一起毁灭吧。\n\nclub.cpp\n\n```cpp \n//else{//满员啦，重新（悲） \n//\t//做不出来，全部毁灭 \n//\t//高一学竞赛打成这样也真**该退役了 \n//}\n```\n\nclub.cpp\n\n```cpp \nelse while(1);//我真的没招了，一起毁灭吧\n```\n\nclub.cpp\n\n```cpp \n//Not want to solve it at all!!!!\n//Is it a green problem??????????on T1?????????????\n//I want to say some thing bad!!**** ** ****;\n//I want to give up(sad);\n//If no 1=,I have to AFO;\n//Luogu:921880 2022xsj\n//%%kkksc03%%\n//T1手写4000多字符么 真**有点意思 退役吧全部毁灭吧\n//是T1就**乖乖给老子AC啊啊啊啊啊啊啊啊啊\n//距离考试结束还剩余约1h：头有点晕了，三瓶乐虎就是得劲\n//freopen\n//freopen 反正就那样了，搞搞诈骗怎么了 \n//Luogu:921880 2022xsj\n//lovewyr \n//Excepted:75pts\n```\n\n### SC-S00451\n\n我听见了，【强运】的回响\n\nclub.cpp\n\n```cpp \n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n//我听见了，【强运】的回响\n```\n\n### SC-S00484\n\n给一个缩略图。\n\nclub.cpp\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2yvv6fye.png)\n\nclub.cpp\n\n```cpp \n/*\n是的，你没看错，20个for,O((3^20)*t),特暴力枚举，至少拿到20pts,快夸我！\n不过，看在我这~~~~~~~~~~~~~~~么喜欢CCF的份上，能不能让测试点放点水呢？ \n*/\n```\n\n### SC-S00499\n\n还有工程大佬。\n\n{% folding title=\"Code\" class=green %}\n\nroad.cpp\n\n```cpp \n#include <windows.h>\n#include \"main.h\"\n\nBOOL LoadFile(HWND hEdit, LPSTR pszFileName) {\n\tHANDLE hFile;\n\tBOOL bSuccess = FALSE;\n\n\thFile = CreateFile(pszFileName, GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, 0, 0);\n\tif(hFile != INVALID_HANDLE_VALUE) {\n\t\tDWORD dwFileSize;\n\t\tdwFileSize = GetFileSize(hFile, NULL);\n\t\tif(dwFileSize != 0xFFFFFFFF) {\n\t\t\tLPSTR pszFileText;\n\t\t\tpszFileText = (LPSTR)GlobalAlloc(GPTR, dwFileSize + 1);\n\t\t\tif(pszFileText != NULL) {\n\t\t\t\tDWORD dwRead;\n\t\t\t\tif(ReadFile(hFile, pszFileText, dwFileSize, &dwRead, NULL)) {\n\t\t\t\t\tpszFileText[dwFileSize] = 0; // Null terminator\n\t\t\t\t\tif(SetWindowText(hEdit, pszFileText))\n\t\t\t\t\t\tbSuccess = TRUE; // It worked!\n\t\t\t\t}\n\t\t\t\tGlobalFree(pszFileText);\n\t\t\t}\n\t\t}\n\t\tCloseHandle(hFile);\n\t}\n\treturn bSuccess;\n}\n\nBOOL SaveFile(HWND hEdit, LPSTR pszFileName) {\n\tHANDLE hFile;\n\tBOOL bSuccess = FALSE;\n\n\thFile = CreateFile(pszFileName, GENERIC_WRITE, 0, 0, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0);\n\tif(hFile != INVALID_HANDLE_VALUE) {\n\t\tDWORD dwTextLength;\n\t\tdwTextLength = GetWindowTextLength(hEdit);\n\t\tif(dwTextLength > 0) {\n\t\t\tLPSTR pszText;\n\t\t\tpszText = (LPSTR)GlobalAlloc(GPTR, dwTextLength + 1);\n\t\t\tif(pszText != NULL) {\n\t\t\t\tif(GetWindowText(hEdit, pszText, dwTextLength + 1)) {\n\t\t\t\t\tDWORD dwWritten;\n\t\t\t\t\tif(WriteFile(hFile, pszText, dwTextLength, &dwWritten, NULL))\n\t\t\t\t\t\tbSuccess = TRUE;\n\t\t\t\t}\n\t\t\t\tGlobalFree(pszText);\n\t\t\t}\n\t\t}\n\t\tCloseHandle(hFile);\n\t}\n\treturn bSuccess;\n}\n\nBOOL DoFileOpenSave(HWND hwnd, BOOL bSave) {\n\tOPENFILENAME ofn;\n\tchar szFileName[MAX_PATH];\n\n\tZeroMemory(&ofn, sizeof(ofn));\n\tszFileName[0] = 0;\n\n\tofn.lStructSize = sizeof(ofn);\n\tofn.hwndOwner = hwnd;\n\tofn.lpstrFilter = \"Text Files (*.txt)\\0*.txt\\0All Files (*.*)\\0*.*\\0\\0\";\n\tofn.lpstrFile = szFileName;\n\tofn.nMaxFile = MAX_PATH;\n\tofn.lpstrDefExt = \"txt\";\n\n\tif(bSave) {\n\t\tofn.Flags = OFN_EXPLORER|OFN_PATHMUSTEXIST|OFN_HIDEREADONLY|OFN_OVERWRITEPROMPT;\n\t\tif(GetSaveFileName(&ofn)) {\n\t\t\tif(!SaveFile(GetDlgItem(hwnd, IDC_MAIN_TEXT), szFileName)) {\n\t\t\t\tMessageBox(hwnd, \"Save file failed.\", \"Error\",MB_OK|MB_ICONEXCLAMATION);\n\t\t\t\treturn FALSE;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tofn.Flags = OFN_EXPLORER|OFN_FILEMUSTEXIST|OFN_HIDEREADONLY;\n\t\tif(GetOpenFileName(&ofn)) {\n\t\t\tif(!LoadFile(GetDlgItem(hwnd, IDC_MAIN_TEXT), szFileName)) {\n\t\t\t\tMessageBox(hwnd, \"Load of file failed.\", \"Error\",MB_OK|MB_ICONEXCLAMATION);\n\t\t\t\treturn FALSE;\n\t\t\t}\n\t\t}\n\t}\n\treturn TRUE;\n}\n\nLRESULT CALLBACK WndProc(HWND hwnd, UINT Message, WPARAM wParam, LPARAM lParam) {\n\tswitch(Message) {\n\t\tcase WM_CREATE:\n\t\t\tCreateWindow(\"EDIT\", \"\",WS_CHILD|WS_VISIBLE|WS_HSCROLL|WS_VSCROLL|ES_MULTILINE|ES_WANTRETURN,CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,hwnd, (HMENU)IDC_MAIN_TEXT, GetModuleHandle(NULL), NULL);\n\t\t\tSendDlgItemMessage(hwnd, IDC_MAIN_TEXT, WM_SETFONT,(WPARAM)GetStockObject(DEFAULT_GUI_FONT), MAKELPARAM(TRUE,0));\n\t\t\tbreak;\n\t\tcase WM_SIZE:\n\t\t\tif(wParam != SIZE_MINIMIZED)\n\t\t\t\tMoveWindow(GetDlgItem(hwnd, IDC_MAIN_TEXT), 0, 0, LOWORD(lParam),HIWORD(lParam), TRUE);\n\t\t\tbreak;\n\t\tcase WM_SETFOCUS:\n\t\t\tSetFocus(GetDlgItem(hwnd, IDC_MAIN_TEXT));\n\t\t\tbreak;\n\t\tcase WM_COMMAND:\n\t\t\tswitch(LOWORD(wParam)) {\n\t\t\t\tcase CM_FILE_OPEN:\n\t\t\t\t\tDoFileOpenSave(hwnd, FALSE);\n\t\t\t\t\tbreak;\n\t\t\t\tcase CM_FILE_SAVEAS:\n\t\t\t\t\tDoFileOpenSave(hwnd, TRUE);\n\t\t\t\t\tbreak;\n\t\t\t\tcase CM_FILE_EXIT:\n\t\t\t\t\tPostMessage(hwnd, WM_CLOSE, 0, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase CM_ABOUT:\n\t\t\t\t\tMessageBox (NULL, \"File Editor for Windows!\\nCreated using the Win32 API\" , \"About...\", 0);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase WM_CLOSE:\n\t\t\tDestroyWindow(hwnd);\n\t\t\tbreak;\n\t\tcase WM_DESTROY:\n\t\t\tPostQuitMessage(0);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn DefWindowProc(hwnd, Message, wParam, lParam);\n\t}\n\treturn 0;\n}\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,LPSTR lpCmdLine, int nCmdShow) {\n\tWNDCLASSEX wc;\n\tHWND hwnd;\n\tMSG Msg;\n\n\twc.cbSize        = sizeof(WNDCLASSEX);\n\twc.style         = 0;\n\twc.lpfnWndProc   = WndProc;\n\twc.cbClsExtra    = 0;\n\twc.cbWndExtra    = 0;\n\twc.hInstance     = hInstance;\n\twc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);\n\twc.hCursor       = LoadCursor(NULL, IDC_ARROW);\n\twc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);\n\twc.lpszMenuName  = \"MAINMENU\";\n\twc.lpszClassName = \"WindowClass\";\n\twc.hIconSm       = LoadIcon(hInstance,\"A\"); /* A is name used by project icons */\n\n\tif(!RegisterClassEx(&wc)) {\n\t\tMessageBox(0,\"Window Registration Failed!\",\"Error!\",MB_ICONEXCLAMATION|MB_OK|MB_SYSTEMMODAL);\n\t\treturn 0;\n\t}\n\n\thwnd = CreateWindowEx(WS_EX_CLIENTEDGE,\"WindowClass\",\"File Editor Example Program\",WS_OVERLAPPEDWINDOW,\n\t\tCW_USEDEFAULT,\n\t\tCW_USEDEFAULT,\n\t\t320,240,\n\t\tNULL, NULL, hInstance, NULL);\n\n\tif(hwnd == NULL) {\n\t\tMessageBox(0, \"Window Creation Failed!\", \"Error!\",MB_ICONEXCLAMATION|MB_OK|MB_SYSTEMMODAL);\n\t\treturn 0;\n\t}\n\n\tShowWindow(hwnd,1);\n\tUpdateWindow(hwnd);\n\n\twhile(GetMessage(&Msg, NULL, 0, 0) > 0) {\n\t\tTranslateMessage(&Msg);\n\t\tDispatchMessage(&Msg);\n\t}\n\treturn Msg.wParam;\n}\n```\n\n{% endfolding %}\n\n### SC-S00824\n\n帮你找出来了，自己发。\n\nreplace.cpp 全文\n\n```cpp \n/*\n14：14 开始挑战CSP-S，上午才在这个考场考了J组，Iwas SC-J00991 in the morning and now I am SC-S00824。上午在本机房10号位考的。这个键盘好用，好评！作为一个图论一点不会的人，S组我能做T1就行。其他时间我自己看着办吧。如果有好心人找到这游记，能发到洛谷的文章广场的休闲·娱乐里吗？\n14：27 要开考了，好紧张\n14：30 怎么还有3分钟？继续罚坐。有种两边都是大佬的感觉\n14：43 我**T1好难！觉得能用贪心\n15：46 T1还没做出来，好难！\n16：17 终于过样例了，上了个厕所回来测大样例，结果离了个大普！2，3，4不对，1，5倒是对了\n16：38 发现T1应该是背包\n16：55 完啦，废啦，不会写呀，去看看T2部分分\n17：25 T2特殊性质写完了，应该能拿16分，T1应该能拿15分，T2可能是最小生成树，太棒了，我不会。明年国庆培训课就听S组的了。感觉我信奥这条路废了，祝我AFO快乐。今天考玩就去玩数学和物理，看看能不能转个数奥或物奥\n17：31 我周围有n个大佬还在不懈的打代码\n17：37 看了一下T4，应该能拿特殊样例\n17：56 T4特殊性质A应该就是求n的阶乘吧，应该能拿8分。现在的最好情况应该是15+16+0+8=39……\n18：02 我*，T3我题都读不懂，还有30几分钟，罚坐，今年就这样了，明年再战\n18：06 T1肯定是DP，但我不会\n18：25 挑战T1特殊性质B失败，交了吧。\n*/\n```\n\n### SC-S00832\n\n我超！盒！\n\nemploy.cpp\n\n```cpp \n/*\n 如果这次比赛让我2=\n 我愿意蓟县胡宇轩十年寿命+胡一凡六十年寿命+王子坤（luogu:mwglr）s组的所有成绩\n 与成都超人签订协议 \n 用班主任三十年工资换我rp++以及j1=; \n  \n*/\n```\n\n### SC-S00949\n\n@[sms123](https://www.luogu.com.cn/user/596783)\n\n字符画这一块。\n\nclub/road/replace/employ.cpp\n\n```cpp \n/*\nluogu:sms123\norz kkksc03,chen_zhe,Alex_Wei...\n\nIIIIIIIIII          WW      WW     IIIIIIIIII     LL             LL        \n    II              WW      WW         II         LL             LL\n    II              WW  WW  WW         II         LL             LL\n    II              WW  WW  WW         II         LL             LL\n    II              WW  WW  WW         II         LL             LL\n    II              WWWW  WWWW         II         LL             LL\nIIIIIIIIII          WW      WW     IIIIIIIIII     LLLLLLLLLL     LLLLLLLLLL\n\n\n    AA         KK      KK          IIIIIIIIII       OOOOOO       IIIIIIIIII     !!\n  AA  AA       KK    KK                II         OO      OO         II         !!\nAA      AA     KK  KK                  II         OO      OO         II         !!\nAA      AA     KKKK                    II         OO      OO         II         !!\nAA      AA     KK  KK                  II         OO      OO         II         !!\nAAAAAAAAAA     KK    KK                II         OO      OO         II\nAA      AA     KK      KK          IIIIIIIIII       OOOOOO       IIIIIIIIII     !!\n\n\nRRRRRRRR       PPPPPPPP\nRR      RR     PP      PP         ++             ++\nRR      RR     PP      PP         ++             ++\nRRRRRRRR       PPPPPPPP       ++++++++++     ++++++++++\nRR  RR         PP                 ++             ++\nRR    RR       PP                 ++             ++\nRR      RR     PP\n\nlong long int rp = 0;\nint main()\n{\n\twhile (1) rp++;\n\treturn 0;\n}\n\nPLEASE DO NOT\n//freopen\nferopen\nfreeopen\nfreopen(\"\",r,stdin);\nfreopen(\"\",\"r\",stdout);\nfreopen(\"\",\"r\",stdin);\n*/\n```\n\n### SC-S00969\n\n@[chara_114514](https://www.luogu.com.cn/user/1485657)\n\n还有 Kards 大佬。\n\nemploy.cpp\n\n```cpp \n/*\nluogu chara_114514 \n//freopen别忘了\nstostosto西西弗给点分吧 orzorzorzorz\n不行了一想到mian我就想笑 \n1939give me diamond\n\n知道刚合的彗星和要塞进表了有感而发： \n \n沟槽的美芬\n \n回家第一件事\n打开卡兹竞技场\n一百五十金币！一次！ \n我非常癫狂\n德国主国法国盟国\n三张撤退坦克\n还有俯冲懵逼哥\n谁能如何我？\n正在寻找敌人\nwc完蛋\n是沟槽的美芬\n起手131伏击\n这把也许有的办\n希望对面手牌烂~~\n什么？！\nt26,466还有蓝灰师\n硬头皮交换撑后期\n我还有俾斯麦兜底\n什么？！\n惩戒逃离斩杀线\n沟槽的激怒！ \n沟槽的美芬！ \n沟槽的冰岛人！！！\n1939工作室\n快让美芬死一死\n不然我就曼哈顿\n你的工作室！！！！\n（轰炸高级音效）\n......\n```\n\n### SC-S01032\n\n迷惑行为。\n\nclub.cpp\n\n```cpp \n#include<bits/stdc++.h>\nusing namespace std;\nint main(){\n\t//freopen(\"club.in\",\"r\"stdin);\n    //freopen(\"club.out\",\"w\",stdout);\n   int t;\n   t==18,4,13;\n\tcout<<\"18\";\n\tcout<<\"                                                                                                                      \";\n   \tcout<<\"4\";\n\tcout<<\"                                                                                                                      \";\n    cout<<\"13\";\n     \t\n\t\n\treturn 0;\n}\n```\n\nroad.cpp\n\n```cpp \n#include<bits/stdc++.h>\nusing namespace std;\nint main(){\n\t//freopen(\"club.in\",\"r\"stdin);\n  // freopen(\"club.out\",\"w\",stdout);\n  int n,m,k;\n  n==13;\n  n==m;\n  m==k;\n  k==13;\n   cout<<\"13\";\n\treturn 0;\n}\n```\n\nreplace.cpp\n\n```cpp \n#include<bits/stdc++.h>\nusing namespace std;\nint main(){\n\t//freopen(\"replace.in(1)\",\"r\"stdin);\n\t//freopen(\"repoace.out(1)\",\"w\"stdout);\n\tint n,q;\n\tcout<<\"2\";\n\tcout<<\"                                                                                                                       \";\n    cout<<\"0\";\n\n\treturn 0;\n}\n```\n\nemploy.cpp\n\n```cpp \n#include<bits/stdc++.h>\nusing namespace std;\nint main(){\n\t//freopen(\"club.in\",\"r\"stdin);\n   //freopen(\"club.out\",\"w\",stdout);\n   int n,m;\n   cout<<\"2\";\n\treturn 0;\n}\n```\n\n### SC-S01115\n\n我常常追忆过去。\n\nemploy.cpp\n\n```cpp \n/*\n我常常追忆过去。\n\n生命的瞬间定格在我的脑海，我将背后的时间裁减，弯曲，揉捏成天上朵朵白云。\n\n云朵之间亦有分别，积云厚重，而卷云飘渺，....\n\n...\n\n过去已经凝固，我带着回忆向前，只是时常疏于保管，追忆也在改变着各自的形态，这给我的追忆旅程带来些许挑战。\n\n我该在哪里停留，我问我自己。\n*/\n```\n\n### SC-S01256\n\n//愿者上钩\n\nemploy.cpp\n\n```cpp \n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int N=2e6+4;\nint n,m,k;\nmain()\n{\n\tfreopen(\"employ.in\",\"r\",stdin);\n\tfreopen(\"employ.out\",\"w\",stdout);\n\t//#defien int lnog long\n\t//mian()\n\t//int y0,y1;\n//freopen(\"replcae.in',\"w\",stbout);//愿者上钩\n//feropen(\"enploy,out\".'r\",stdin)；\n\t\n\tcout<<43527615;\n\t//嗯对的对的\n\treturn 0;\n}\n```\n\n### SC-S01261\n\n加油！\n\nclub.cpp\n\n```cpp \n// 白鹭霜华。\n// 绫华保佑我。\n\n// 怎么 1.5h 还没做出 T1，唉唉。\n// 我的 OI 水平也就那样了吧。\n\n// 到底是 dp 还是贪心呢？每个都想过了但是都错了。应该就是贪心吧。dp 状态太多了不太能优化。\n// 我状态定义的有问题吧？可能有更优的状态定义。\n\n// 终究还是做不到啊。\n// 先稳住心态。先打后面的暴力。\n\n// 奋战 4h 依然没做出。绝望了。\n// NOIP 又会考成什么样呢？\n// 想了好几种 dp 状态都是假的。\n// T2 也不会正解。好难受。\n```\n\n### SC-S01276\n\n诗人。\n\nemploy.cpp\n\n```cpp \n/*\n最后30min了\n没时间了呀。\n我还是太蒟了。 \n学习OI 这么久 最后的时间 就这样吧。 \n普及组当年的幻想　终究是落空于此啊。 \n\nAC几时有？把酒问青天。\n不知天上AK，发生于何年。\n我欲AKIOI，又恐题目太难。难题皆不会。\n写码于此处，何似在OI。\n\n转洛谷，登账户，交代码。\n不应CE，何时AC何时WA。 \n人有悲欢离合，题有绿蓝紫黑。此题难AC。\n但愿无JC，千里共AK。\n\n祝你们好运qwq。 \n*/\n```\n\n### SC-S01685\n\n乱敲键盘。\n\nemploy.cpp\n\n```cpp \nqreeenpoegbe\nrgertterter\nbybewyet\nevegetghtb5by\ntertwbethtmnevgstr\netewtertreqggg\nggereqwetbwertytery\nerqty3tbecgytjeytgfhwe\nehgehjwj jyheghw54jt\nwhytjyqasgmnyr5kwrt\nse5jh6wskgshstrjkysm,ys\nrthjtrky75825 8 m n9iu5rw\n4e5wgrt5gvfffw57mskwx\n jkkywsengoewpnhehqtj\n wgiwpgoep0jwe4gnw-g9h\\\nregheeikmorerh\nheeinwgpoosdgng-ph,\nbheonheio0snrpbg3k[wekg,gnehtedbht\nhetopme,hpb[swgbe.rhb'erhne']]\nehehmneorbniferh;e,hpeordmhnoe\nehein rpohmd;lhg,merphmepmheheh\nehermp [[srjh[pjkw56\ntgp,s[ehl.'hjmtys'y]]]]\npostrjphsugnsvbmtohmpsaeththrt\neikneroisppghokhjt,jat5[perh\nerpnjhoidhnubeprngflkjbjerpmnperh]\nerhpmepoihenrpgfb,.per['hpk,hehr\neprhk,e[jmoepherhdfhterjk'ut]\n......\n```\n\n### 如你所愿\n\n### SC-S00068\n\nclub.cpp\n\n```cpp \n/*\n3\n4\n4 2 1\n3 2 4\n5 3 4\n3 5 1\n4\n0 1 0\n0 1 0\n0 2 0\n0 2 0\n2\n10 9 8\n4 0 0\n我要上洛谷迷惑行为大赏\n永世传颂，不休独舞，神爱世人，芙门永存。\n*/\n```\n\n### SC-00152\n\nclub/road/replace/employ.cpp\n\n```cpp \n/*\nCSP-S\nKaoShengMiHuoXingWeiDaShang:\n```\n\n### SC-S00257\n\n@[zimozimo](https://www.luogu.com.cn/user/717489)\n\nemploy.cpp\n\n```cpp \n/*\n第一次考csp-s，实力还是差了点（T1做不出来？），本以为可以A一道T1然后其他题拿暴力分，但是一道都做不出来是不是有点不对劲？我要崩溃了，希望是因为题目太难了qwq。\n别问为什么我把这玩意儿放在代码中间，问就是希望可以上迷惑行为大赏，给我的第一次csp-s留个纪念 (我的T3应该也可以上 \n游记：\n14:40 T1不难嘛！ \n15:02 算了T1先打个暴力吧\n15:23 想正解中......\n15:30 1个小时了我T1还没做出来？？？？ \n16:14 S组的难度真的是我可以承受的吗\n16:19 完辣最小生成树的板子忘了！ \n16:25 %%%\n16:38 不行了骗点分orz \n16:54 全排列的方法数不是n的阶乘吗？ \n17:02 T3题面好像有个小错误 (“小W提出了q个问题，第j(1 ≤j ≤m)个问题会给定两个不同的字符串..”不因该是“j(1 ≤j ≤q)”吗？)\n17:24 还是再看一下T1吧 \n18:02 6，T1过不了，写了八十多行代码，白费了 \n18:11 J组的试卷密码是上善若水，S组的是人杰地灵？\n18:14 洛谷zimozimo求壶关 \n18:21 打个总结，估分20pts(????????)，S组彻底炸了 \n*/\n```\n\n### SC-00484\n\nemploy.cpp\n\n```cpp \n//我好像看见洛谷专栏在等我了........................ \n/*mengbier;\nluogu~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nHHHHHHHHHHHHHHHHHHHHHHHHHa!\n Wow————————————————————————————————————————————————————————————————————————————— \nxixixixixixixixixixixixi~~~~\nCSP真是个好东西====================================================================================C++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\norz orz orz orz 行不行？！\n乱花渐欲迷人眼，浅草才能没马蹄 。晓镜但愁云鬓改，夜吟应觉月光寒 。 姑苏城外寒山寺，夜半钟声到客船。 同是天涯沦落人，相逢何必曾相识。今日听君歌一曲，暂凭杯酒长精神。 正是江南好风景，落花时节又逢君。山回路转不见君，雪上空留马行处。金风玉露一相逢，便胜却人间无数。惶恐滩头说惶恐，零丁洋里叹零丁。落红不是无情物，化作春泥更护花。END! \nits-me-its-me*/ \n```\n\n### SC-S00513\n\n@[zhangjizhi](https://www.luogu.com.cn/user/723989)\n\nreplace.cpp\n\n```cpp \n//just pianfen!!!\n//Can I get 1= with 149 pts???(SC)\n//maybe,it like 2023(maybe orange green+ blue purple-) \n//WHY SO HARD!!!!!\n//...\n//Alright,I have many chance because I'm Grade 8\n//So let's work together to prepare CSP2026!\n//luogu:zhangjizhi\n//I want to let this in sichuan mihuo action show\n//CCFCCFCCFCCFCCFCCFCCFCCF\n```\n\n### SC-S00575\n\nreplace.cpp\n\n```cpp \n/*\nint mian()\nferopen\nfrepoen\nfreopen(\"replace.in\",\"r\",stdout);\nfreopen(\"replace4.out\",\"w\",stdout);\ny1\npw[-114514]\n反正都寄了，我想上迷惑行为 \n*/\n```\n\n### SC-S01620\n\nreplace.cpp\n\n```cpp \n//是的，这里是树德光华5_303\n//你知道CSP-S迷惑行为大赏吗？\n//如果看到这里，那你就应该知道了。\n//T1 拼尽全力 所以 T234 无法战胜了。\n//不可以，字符串！\n```\n\n### 遗憾离场\n\n### SC-S00252\n\nclub.cpp\n\n```cpp \n/*\n......\n我草我没复习 AC 自动机\n*/\n```\n\nroad.cpp\n\n```cpp \n/*\n最小生成树，但是。。。\n\n一个很暴力的想法是直接 2^k 枚举新增哪些点。但我感觉这应该不行。\n\n我草，我想到那天做的那道学校模拟赛。\n这里可以用 edited Prim？\n我草，我草，我草，给做到类似题了\n再也不诋毁 tfqz 模拟赛了\n我爱你 \n\n有点忘了 prim 怎么写的。\n\n好像和模拟赛那道题也不太一样。想清楚细节。\n这个算法我个人感觉还是比较对的。\n主要的问题在有贡献可能被多算。\n比如，这个乡镇，它被建出来是没有意义的，但是它的贡献还是会被算到总和里面去。\n那么，我们是否可以判断：如果它没有起到任何更新作用，那么我们就不累加其贡献？？？\n非也。这样是有问题的。\n\n考虑这个新增节点实际上在解决什么问题。\n如果对于一棵子树，使用新增节点的代价 < 使用 kruskal 连通它们的代价，那就可以考虑。\n\n有一点猜想。\n先在原图上跑出最小生成树。特别是处理出 prim 的 dis 数组。 \n注意到我们只是没有办法支持 O(m2^k) 复杂度，但是可以做 O(n2^k)。\n或许这样就可以了。\n\n还是不对。。。伪掉了。\n问题在可能连出环。\n \n我们还是回到 kruskal。\n先建出来最小生成树，然后枚举必选哪些乡镇。\n然后呢？\n假如我们得到当前这个点应该连哪些点，我们都不见得能调整出答案。\n\n我可能脑残了。\n我们想将最小生成树跑出来，然后再在剩下的子图上面跑一遍，这样不就行了吗？？？\n当然，这样的复杂度是 O(2^kn log n)。我不知道还能不能做到更好。\n可以把有用的边全部拎出来，做归并排序。\n可能常数会小一些。\n感觉能过，直接写吧。\n\n再仔细斟酌一下那个结论。是否一定只保留最小生成树中的边？\n我觉得没毛病。\n伪了啊。。。 \n*/\n```\n\n### SC-S00401\n\nreplace.cpp\n\n```cpp  lines=49-49\n/*\n## 看题\n这下这下了, 我的闹钟怎么死了\nstart 2:30, lst 240min\n\n### T1\n糖糖题\n\n### T2\n别别别\n\n### T3\n猎奇, 真出串串啊\n\n### T4\n数数不会\n\n## T1\n策略, 停滞, 解决, 心态\n数据检验, 关键步记录, 理清过程\n### 思路\n不难发现贪心分配之后仅存在唯一部门可能多于 n/2 个新成员\n考虑调整到其它部门即可\n\n对于最终多于 n/2 的那个部门, 统计其中员工的 △ 最小的那些丢到其它部门即可\n\n## T2\n策略, 停滞, 解决, 心态\n数据检验, 关键步记录, 理清过程\n### 思路\nlhs 看到图论直接飞起来\n\n首先简单归纳一下问题\n1. 可以用 w_i 的花费修复一条边\n2. 可以用 c_i 的花费激活一个中介点, 然后用 a_{i, j} 的花费将点 j 连接到中介点 i 上\n\n最终要求原来的 n 个点联通的最小花费\n\nwoc k <= 10\n\n---\n首先 2^k 激活中介点\n然后连上 (u, v, min_{i ∈ S} a_{i, u} + a_{i, v}), 跑一遍最小生成树就行了\n真的吗?\n\n> 知道为什么坐立难安了, 原来是没法翘板凳\n\n原来大概不能直接做, 继续思考\n我草那个完全图最小生成树的算法忘完了\n\n哦哦哦不能这么做\n我是[CCF比赛是不是要数据删除]\n---\n\n好的好的, 继续想\n如果我们只保留最初的最小生成树的边, 正确性如何?\n不难发现是正确的\n\n## T3\n策略, 停滞, 解决, 心态\n数据检验, 关键步记录, 理清过程\n### 思路\n这题只有拼暴力\n首先最暴力的做法就是对于每个询问, 暴力找出包含不同段的 s_i, 然后直接替换\n对于特殊性质 A, 直接用暴力做法就可以弄完\n对于特殊性质 B, 可能需要研究一下, 但是大概就是求 b 的移动距离即可\n\n这题需要一定的时间\n\n## T4\n策略, 停滞, 解决, 心态\n数据检验, 关键步记录, 理清过程\n### 思路\n快速想点低档暴力去做 T2\n\nA 是全排列\nB 是状态压缩, 但是不太会啊\n*/\n```\n\n### SC-S01126\n\nreplace.cpp\n\n```cpp \n/*\n3 1\nab ac\naba aca\nabaa acaa\naabaaa\naacaaa\n\n题目太鬼了，不可战胜，这还是提高组吗\n\n为什么我不复习字符串 \n为什么我不复习字符串 \n为什么我不复习字符串 \n\n\n*/\n```\n\n### 祝好\n\n### SC-S00019\n\nemploy.cpp\n\n```cpp \n/*\n我不知道该说些什么，反正打完这场应该就AFO了\n初三还是太忙了，不再像去年那样天天练了\n当了一年半的OIer感觉挺有感触的，不知道明年还能不能重来\n本来是不想AFO的，但快中考了，凭我这个OI成绩也去不到哪里，没办法\n刚开始当兴趣学，后来不知不觉就成了OIer\n开始的时光还是很快乐的\n但现在机房里的同学大概都比我强了，渐渐压力开始大起来\n我曾经想过要不要退役，但那时觉得时间还早，还能冲一冲，但现在不行了\n我的文化课成绩还算过的去吧，学校在市上排第三，学校将近1000人排在30多位，勉强还是能上市里最好的高中\n我文采不好，所以写不出什么很好的东西，大家就当乐子看吧\n刚上完厕所回来，透过小窗看见金黄的落日和被太阳镶上金边的云，觉得很美，却不知怎么说\n“ 答：作者通过描写落日十分美好的景象，反衬出作者内心的悲伤，一句”不知怎么说“体现出作者即将与OI分别的不舍与无奈之情。”（雾）\n欢乐的时光总是短暂的，马上要结束了\n总是，还是要感谢我的父母，老师和一起学OI的同学们\n如果你是正在读这篇文章的OIer或是整理代码大赏工作者，我也向你们道一声辛苦了\n或许我们还会再见\n\n#include<iostream>\nusing namespace std;\nint main(){\ncout<<\"Hello,World!\";\nreturn 0;\n}\n\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\n\nint main(){\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\nios::sync_with_stdio(0);\ncin.tie(0),cout.tie(0);\nprintf(\"Bye,World!\");\nreturn 0;\n}\n\n2025 11.1 16:26:20\n*/\n```\n\n### SC-S00024\n\n@[Earth2023](https://www.luogu.com.cn/user/933808)\n\nemploy.cpp\n\n```cpp \n/*\n故事的小黄花\n从出生那年就飘着\n童年的荡秋千\n随记忆一直飘到现在\nmi sol sol xi la xi la sol la xi xi xi xi la xi la sol\n吹着前奏 望着天空\n我想起花瓣试着掉落\n与你翘课的那一天\n花落的那一天\n教室的那一间\n我怎么看不见\n消失的下雨天\n我好像再淋一遍\n没想到失去的勇气 我还留着\n好像再淋一遍\n你会等待还是离开\n刮风这天 我试着握着你手 但偏偏\n风渐渐 把距离吹得好远\n还要多久 我才能在你身边\n等到放晴的那天也许我会比较好一点\n从前从前 有个人爱你很久 但偏偏\n雨渐渐 大到我看你不见\n好不容易 又能再多爱一天\n到故事的最后 你好像\n还是说了\n拜拜\n(CSP-S 2025 Round 2 不会，仅有10分不到\n谨以此场考试，致我那在阴霾中逝去的2025年\n愿未来，我们都能共同走向更美好的明天\nLG UID: 933808)\n*/\n```\n\n### SC-S00225\n\nclub.cpp\n\n```cpp \n/*\n\n3\n4\n4 2 1\n3 2 4\n5 3 4\n3 5 1\n4\n0 1 0\n0 1 0\n0 2 0\n0 2 0\n2\n10 9 8\n4 0 0\n\n1\n4\n4 0 0\n10 0 0\n8 0 0\n1 0 0\n\n这算是最后一次考试了，这么想来，从五年级到现在九年级，这个信息竞赛还是伴随了我很久\n最开始想着通过这个当时看来前途广阔的赛道进入初中——锦城一中，但是最后还是没有考上\n后面找了关系到了天府七中，到了才发现这是当时我第一次参加信息竞赛的地方\n后面在第一次阶段考完，我给clz说了我有这方面的特长，但是当时她好像没有理会\n倒是第一次参加csp初赛就没有过，当时教练也没有给名额，还是蛮可惜的，接近4年的竞赛路程\n居然只参加了两次csp竞赛，后面好像是到了初一下半年，我也是成功加入了竞赛队，当时文化成绩\n还不错所以想着就这样学学竞赛未来也许能考出去，所以当时周末一直都在上课，印象最深的一次是\n当时数论章节的考试，我AK了全场，那也算我第一次意义上的AK也是最后一次，后来文化成绩下滑的厉害\n后面已经达不到竞赛要求的基本成绩了，在考完最后一次直升考试后，还是选择放弃了竞赛\n\n最后因为时间的匆忙只能写下这么多了\n感谢我学竞赛以来遇到的所有\n感谢李老师，感谢clz，感谢char，感谢当时一块在寝室里学习的队友们！\n2025.11.1 \n*/\n```\n\n### SC-S01024\n\n好考号。\n\nclub.cpp\n\n```cpp \n//This is my last time to have progamming contest...\n//After the worst complishment, I will AFO...\n\n//Whatever we thought... Wherever we were...\n//We were all kids at young times...\n//Whoever we were... Nothing matters...\n//Now we just need to have a little little rest...\n//To be a kid again... Just play outside...\n//With enjoyment in the eyes...\n//Who want to grow up? Maybe only childhood...\n//We almost be an adult, which isn't a real one...\n```\n\n### SC-S01240\n\n@[jess1ca1o0g3](https://www.luogu.com.cn/user/1011579)\n\nclub.cpp\n\n```cpp \n/*\nset<string> oier;\noier.erase(\"jess1ca1o0g3\");\n*/\n```\n\n### 拼写错误\n\nreplace 和 employ 的杀伤力还是太大了。\n\n找了一些之后不想找了，就这样吧。\n\n### SC-S00165\n\nemploy.cpp\n\n```cpp \nfreopen(\"empoly.in\",\"r\",stdin);\nfreopen(\"empoly.out\",\"w\",stdout);\n```\n\n### SC-S00440\n\nreplace.cpp\n\n```cpp \nfreopen(\"replace.in\",\"r\",stdin);\nfreopen(\"repace.out\",\"w\",stdout);\n```\n\n### SC-S00589\n\nclub.cpp\n\n```cpp \nfreopen(\"club.in\",\"w\",stdin);\nfreopen(\"culb.out\",\"r\",stdout);\n```\n\n### SC-S00691\n\nroad.cpp\n\n```cpp \nfreopen(\"raod.in\",\"r\",stdin);\nfreopen(\"raod.out\",\"w\",stdout);\n```\n\n### SC-S00751\n\nreplace.cpp\n\n```cpp \nfreopen(\"relace.in\",\"r\",stdin);\nfreopen(\"relace.out\",\"w\",stdout);\n```\n\n### SC-S01155\n\nreplace.cpp\n\n```cpp \nfreopen(\"replace.in\",\"r\",stdin);\nfreopen(\"erplace.out\",\"w\",stdout);\n```\n\n### SC-S01328\n\nreplace.cpp\n\n```cpp \nfreopen(\"replace.in\",\"r\",stdin);\nfreopen(\"repalce.out\",\"w\",stdout);\n```\n\n### SC-S01347\n\n甚至 freopen 还写错了。\n\nreplace.cpp\n\n```cpp \nfreopen(\"repalce\",\"r\",stdin);\nfreopen(\"repalce.out\",\"w\",stdout);\n```\n\n### 我是 std\n\n### SC-S00281 & SC-S00624\n\n相亲相爱一家人。\n\nSC-S00281 road.cpp\n\n```cpp \n#include <bits/stdc++.h>\nusing namespace std;\n\nint main()\n{\n\tfreopen(\"road.in\",\"r\",stdin);\n\tfreopen(\"road.ans\",\"w\",stdout);\n\tcout << 0;\n\treturn 0;\n}\n```\n\nSC-S00624 road.cpp\n\n```cpp \n#include<iostream>\nusing namespace std;\n\nint main(){\n\tfreopen(\"road.in\",\"r\",stdin);\n\tfreopen(\"road.ans\",\"w\",stdout);\n\tcout<<0;\n\treturn 0;\n}\n```\n\n### 表白同学\n\n### SC-S00086\n\nemploy.cpp\n\n```cpp \n//1010我喜欢李佳诺\n```\n\n### SC-S00351\n\n已在前文中收录。\n\n### 表白 CCF / OI\n\n### SC-S00242\n\n话说怎么就新年快乐了。\n\nroad.cpp\n\n```cpp \n//新年快乐！新年快乐，求求放过我这个鼠鼠吧。 \n//求求了，ccf让我这个代码过吧!!求求了！！loveyou ccf\n```\n\n### SC-S00513\n\nroad.cpp\n\n```cpp \n//if(CCF run nlogn(1e6) in 1s) I love CCF forever;\n```\n\n### SC-S01313\n\nroad.cpp\n\n```cpp \nI hate whk ,I love OI\n```\n\n### SC-S01617\n\n@[xg333](https://www.luogu.com.cn/user/1025218)\n\nclub.cpp\n\n```cpp \n/*\nxg333 CSP-S must win!!!\nT1代码\nI LOVE CCF 100 YEARS\n*/\n```\n\nroad.cpp\n\n```cpp \n/*\nxg333 CSP-S must win!!!\nT2代码\nI LOVE CCF VERY MUCH\nxg333:\n*/\n```\n\nroad.cpp\n\n```cpp \nint I_LOVE_CCF=0;\nfor(int i=1;i<=k;i++){\n  for(int j=1;j<=n+1;j++){\n    cin>>I_LOVE_CCF;\n  }\t\n}\n```\n\n### 暴戾语言\n\n### SC-S00*91\n\n原文未打码。\n\nemploy.cpp\n\n```cpp \n为什么把题目出那么难\nF**K CCF(中指)\n还有，白子是我的谁也别抢\n```\n\n### SC-S01*13\n\n@[Ascosia](https://www.luogu.com.cn/user/1815396)\n\n米哈游给你广告费了吗，不要的话给我。\n\nclub.cpp\n\n```cpp \nint main(){\n\tcin.tie(0); \n\tfreopen(\"club.in\",\"r\",stdin);\n\tfreopen(\"club.out\",\"w\",stdout);\n\tcin>>t;\n\tint ys=0,xt=0,bh=0;\n\tint yuanshen,xingtie,benghuai;\n\tfor(int j=1;j<=t;j++){\n\t\tcin>>n;\n\t\t\n\t\tfor(int g=1;g<=n;g++){//cout<<g<<\".\"<<endl;\n\t\t    int mihuyou=-10000;\n\t\t    //int ys=0,xt=0,bh=0;\n\t\t\tfor(int i=1;i<=3;i++){\n\t\t\t\tint yuanshen=0,xingtie=0,benghuai=0;\n\t\t\t\tcin>>a[g][i];\n\t\t\t\tif(a[g][i]>=mihuyou){\n\t\t\t\t\tmihuyou=a[g][i];\n\t\t\t\t\tif(i==1)    yuanshen++;\t  ys+=yuanshen;\n\t\t\t\t\tif(i==2)    xingtie++;    xt+=xingtie;\n\t\t\t\t\tif(i==3)    benghuai++;\t  bh+=benghuai;\n\t\t\t\t}\n\t\t\t\t//cout<<yuanshen<<\" \"<<xingtie<<\" \"<<benghuai<<\" \"<<endl; \n\t\t\t}\n\t\t\t//cout<<mihuyou<<\"mihuyou\"<<endl;\n\t\t\t//cout<<ys<<\" \"<<xt<<\" \"<<bh<<\" \"<<endl; \n\t\t\tans+=mihuyou;\n\t\t}\n\tcout<<ans<<endl;\n\t}\n\treturn 0;\n} \n```\n\n做干净的奥赛。\n\nclub.cpp\n\n```cpp \n//（拜托，一定要仔细阅读）\n// DO NOT GIVE ME THE ZERO!!!! pleas... \n// I want to a Group S s' jiangzhuang\n/*pleas don't give me 0 ........,I can give you many many money , Because I know \n€€￡ is very like monye.... just like my 510 RMB.......\n*/\n```\n\n原文打码没打完。\n\nemploy.cpp\n\n```cpp \n//（拜托，一定要仔细阅读）\n/*\n    I'm got 20 in T1. \n    this is my first time in the scend round CSP , NO J ,only S!!!\n    god d**n…… \n    who can AK Group S?\n    how can I AK it? \n    f**k,\n    I can't do it.\n    this one is too difficult for me……   T^T(cry face\n    €€￡ stile my 510 RMB\n\tthat's my a month's food money ……\n    €€￡ is so bad , that's my food money !!!\n    if I lose it , I'll in hunger a month !!!\n    my school's chicken meet is tasts good , but it's too expenseve \n\tone chicken meet need 8 RMB I'm moneyless , so don't be more expenseve……\n\tat last ,\n\tmy luogu ID is:Ascosia\n\ti can huguan with you  \n\tpleas chat with me \n\tBecause I dont now how you are \n\tmy schools' name is 'XinJin high school' but It not very high\n\tI don't like my school It's too bad \n\tthe food in there is very very like a trash.......\n\tin the second floor is gaijiaofan(盖浇饭) when I go to scend floor to have food\n\tI'll give school reastrount 12RMB and it will give me a pices of s**t ...\n\twen I tood to our headteacher , he'll say : \"your have food is thanks sky and thanks earth.\"\n\tbut his food have 3meet and 3plant , I now it because I tast it one time in \n\tgood luck .\n\tbut , if 对比 with headteachers' food ,our studens' food just like \n\tTHE DEAD PIG IN THE EARTH FOR 3 MONTH \n\t（译文：埋在土里三个月的死去的猪 ）\n\tso , you now that why I hate the food in our school.....\n\t(If this is a messege in the English exam , I'll give him 100 fps,yes 100 fps. \n\tand teachers' food only need 5RMB to get 3meet and 3plant \n\tmy plan is: one day , I put ours' food in teachers' food .\n\tLet teacher tast , what the tast the studens eat.......\n\tand I'll kill ours' 行政主厨  in my hand......\n\tjust wait the news on TV : one students think the food tast too bad , so kill the 厨师 with too angry..... \n\tJUST WAIT FOR ME hahahahahahahahahahahahahaha~~~~~~~~~~~~~~~~~~~~~~~~(become black\n*/\n```\n\n### SC-S01*76\n\nemploy.cpp\n\n```cpp \nint jc(int x){\n\tint sbccf=1;\n\tfor(int i=1;i<=x;++i)\n\t\tsbccf=(x%mod*i)%mod;\n\treturn sbccf;\n}\n```\n\n### SC-S01*05\n\n原文未打码。\n\nreplace.cpp\n\n```cpp \n//f**k CCF,f**k CSP,they are s**t!\n```","tags":["CSP","休闲娱乐"],"categories":["休闲娱乐"]},{"title":"CSP-S 2025 游寄","url":"/article/CSP-S-2025-游寄/","content":"\nupd\n\nCSP-S2024 (170) < CSP-S2025 (194) < NOIP2024 (200)\n\n每次 S 都考成屎。\n\n我也是有办法了。\n\n甚至可能还是拿不到钩 7。\n\n---\n\n下文中所有的「唐」用「奶龙」代替。\n\n### Day -1\n\n一上午只做了一道结构体，然后就完全静不下心做题了。\n\n然后就在水讨论区。某个同机房的批话哥拿小号发批话帖，还不让我拆穿或者举报，就不点名是谁了。\n\n因为学校是考点，所以中午就放了。\n\n下午闲得要命，感觉也没什么需要复习的。\n\n### Day 1\n\n上午一觉睡到 9:30，一共睡了 10.5 个小时。\n\n然后依然很无聊。\n\n中午看了一眼 J 的题，四道题都只花了 $O(1)$ 秒就会了。\n\n下午 14:00 准时到达考场。\n\n进考场过后先打了个火车头，结果赛时发现了好几个错。\n\n然后等。\n\n大概离开始还有 3 分钟的时候就发布了密码，然后开题。\n\n题目名还是很正常。\n\nT1 感觉很贪心，但是贪心过后需要调整。\n\n然后想了一下才发现只需要调整一次，开写。\n\n中间因为实现比较烂重构了一次。\n\n然后 14:50 过了。\n\n开 T2，最开始在想如何建图，发现难以实现。\n\n于是只能暴力枚举乡村。\n\n想了一会儿没想到什么很好的做法，于是先写了个纯暴力的 Kruskal，拿了 56 分。\n\n先不管了，开 T3。此时大概是 15:30 或者 16:00。\n\n然后我想了一个什么神秘树套树？但是感觉时间复杂度有点假。\n\n但是不管了，先写了一会儿，然后调不出来。\n\n于是开始写暴力，拿了 [50, 70] 分。\n\n因为前面写树套树耽搁了，此时也许是 17:00 或者 17:30.\n\n开 T4，似乎会 32 分了，于是想尝试想一想正解。\n\n写了一个 DP，但是写完测样例才发现假了。\n\n然后准备写 32 分，可是快没时间了。\n\n于是只写了 8 分。\n\n赛后看到洛谷讨论区，说 T3 开 `map<pair<string, string>, int>` 可能会挂分。\n\n挂多少我也不知道，假定现在是 [40, 70] 分。\n\n然后没救了。\n\n100 + 56 + [40, 70] + 8 = [204, 234]。\n\n寄完了。\n\n假若取中间值 219，那么这恰好（大约）是我多校 NOIP 模拟赛的平均分。\n\n~~所以得出结论：CSP-S 2025 = NOIP！~~\n\n~~话说目前洛谷给四道题评的绿蓝紫紫，这不就是标准的 NOIP 模拟赛吗。（如果后来难度改了当我没说。）~~\n\n但是个人觉得只有黄绿紫？，因为 T4 不了解做法。\n\n我也不知道我是有多奶龙才没写出奶龙 T2。\n\n奶龙 T2 的经典结论我显然是知道的，可是赛时就是没想到。\n\n也不确定是不是没留够思考时间，可是去年就是因为奶龙的我死磕奶龙 T2 才 S2= 遗憾离场。\n\n也许是策略不对但是又实在想不到哪里不对。\n\n奶龙 T2 显然是奶龙题，可是为啥我连奶龙题都做不出来。\n\n为啥。\n\n为啥。\n\n为啥。\n\n不懂了。\n\n为啥两年的 CSP-S 都没有正常发挥。\n\n盲猜正常发挥的分数能严格大于 250。\n\n为啥。","tags":["CSP"],"categories":["OI","游记"]},{"title":"2025 年 11 月日祭","url":"/article/diary/2025/11/","content":"\n### CSP-S 2025\n\n- A - 社团招新\n\n  原来这就是反悔贪心啊。\n\n- B - 道路修复\n\n  我是唐。发现一个图在加入若干条边后，原来不在 MST 的边现在还是不在 MST。随便搞搞即可。\n\n- C - 谐音替换\n\n  赛时想到一个树套树做法但是没写出来。\n\n  感觉转成二维数点的做法不是很优，于是严肃决定恶补一下串串。\n\n  首先把 $(s_1, s_2)$ 写成 $(ABD, ACD)$ 的形式，然后把两个串合在一起变成 $A|BC|D$，然后原题就变成求有多少个模式串是文本串的子串了。时间复杂度 $O(L |\\Sigma|)$。\n\n- D - 员工招聘\n\n  不想写了。\n\n### 多校联考 20251104\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0783)\n\n- A - 图\n\n  甚至是搜索题。搜一下每个点到 $1$ 的最短路距离，边搜边算贡献即可。\n\n### 多校联考 20251105\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0784)\n\n这场是啥啊。\n\n### 多校联考 20251108\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0785)\n\n下分场。\n\n- A - 国王的试炼\n\n  拆拆贡献，发现只用关注当前数与比当前数小的数，所以随便 DP 一下即可。\n\n### 多校联考 20251111\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0786)\n\n上分场。\n\n- A - 青蛙\n\n  唐。\n\n- B - 表达式\n\n  我唐。注意到 `0+x+x-0` 正着是 $+2x$ 倒着是 $0$，于是直接构造即可。\n\n- C - 淘汰赛\n\n  首先容易写出 $O(n^2)$。\n\n  然后你会发现我们只用关注以 $(a, b)$ 为右下角、长宽为 $\\log V$ 的矩形中的位置，于是就做完了，时间复杂度 $O(T \\log^2 V)$，用数位 DP 实现可以做到 $O(T \\log V)$。\n\n### 多校联考 20251112\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0787)\n\n原神 Round. 1\n\n- A - 异或\n\n  唐。\n\n- B - 伊甸\n\n  **奶龙大战暴暴龙**，但是输在了原题没有的 corner case。\n\n- C - 炼丹炉（[[CF1979F] Li Hua and Path](https://codeforces.com/problemset/problem/1797/F)）\n\n  板，但是不会。首先人工容斥一下，变成求同时满足两个条件的点对个数。考虑从小到大与从大到小各加一遍点，令新加的点成为当前连通块的根，那么限制就转化为了祖孙关系。用类似阿狸的打字机的做法即可。\n\n### 多校联考 20251113\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0788)\n\n原神 Round. 2\n\n- A - 传统题\n\n  大样例题。\n\n- B - 非传统题\n\n  你没蛋还在发力。\n\n- C - 历遍的树\n\n  考虑找出哪些点可以用来掉头，发现这样的点需要有三条以它为起点的路径，使得每条路径的长度都大于等于蛇的长度。称满足条件的点为关键点。可以证明，只要蛇可以到达一个关键点，它就可以到达任意一个关键点。所以任取一个关键点为根，模拟蛇移动的过程，判断蛇能不能移动到根即可。\n\n### 多校联考 20251118\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0790)\n\n原神 Round. 3\n\n- A - box\n\n  唐氏 DP 题。\n\n- B - graph\n\n  侦探 JYY 还在发力。\n\n- C - chess\n\n  赛时通过手模大样例猜出了斜列黑白交替的结论，然而因为时间原因，没发现第一行相邻的一对格子颜色相同（实则是因为赛时做完前两题开始发呆耽误了很久）。[Solution](/article/CF1586I-Omkar-and-Mosaic-题解/)。\n\n### 多校联考 20251119\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0791)\n\n- A - 下一个天亮\n\n  乱构造一下即可。\n\n- B - 希巴拉克的道路\n\n  发现需要维护一堆线段的斜率，上李超树即可（但是赛时写了个神秘做法）。\n\n- C - 超纲\n\n  似乎挺板，但是不会。\n\n### 多校联考 20251121\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0792)\n\n- A - 『木叶创立』\n\n  唐。\n\n- B - 『须佐能乎』\n\n  容易写出一个暴力的矩阵快速幂优化 DP。可以发现，若令直径的中点作为根，那么对于一棵子树，其内部点的 DP 转移是完全相同的。进一步发现，若称两棵子树本质相同，当且仅当其内部的直径端点数量相同，那么对于两棵本质相同的子树，其内部点的 DP 转移都是相同的。所以对于本质不同的子树进行 DP 即可，时间复杂度 $O(n^{\\frac 3 2} \\log T)$。\n\n### 多校联考 20251122\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0793)\n\n- A - 破乱的诗歌\n\n  随便乱做做即可。\n\n- B - 增殖的病菌\n\n  塔尖缩一下点就昨晚了，细节有点多。\n\n- C - 可爱的猫猫\n\n  难绷搜索。\n\n### 多校联考 20251124\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0794)\n\n- A - 创生矩阵\n\n  难绷构造题。考虑构造两个长度为 $n$ 的序列 $a, b$，其中 $a$ 满足 $\\forall i \\in [1, n], \\exists x \\in \\mathbb{Z}^+, x^2 = \\sum \\limits_{j = 1}^i a_j^2$，$b$ 同理。那么对于原矩阵 $c$，只需要构造 $c_{i, j} = a_i \\cdot b_j$ 即可。对于 $a, b$，随便构造一下即可。\n\n- B - 都因为你\n\n  签到题。\n\n### 多校联考 20251125\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0795)\n\nA 原，其他不会。\n\n### 多校联考 20251127\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0796)\n\n- A - 幸运数字\n\n  分讨题，被 corner case 创飞了。\n\n- B - 树的遍历\n\n  屎。随便推一推发现需要维护一堆东西的和，然后维护即可，$op = 0$ 还需要写个扫描线。\n\n- D - 季风\n\n  签，随便推推式子即可。\n\n### NOIP 2025\n\n- A - 糖果店\n\n  按照 $x_i$ 排序，取最小的若干个 $x_i$，再取若干个最小的 $x_i + y_i$ 即可。\n\n- B - 清仓甩卖\n\n  父母是一块还是两块。\n\n  记 $x(y)$ 表示第 $y$ 个物品打折后为 $x$ 费。发现统计不合法的方案数应该更容易。发现一个方案不合法，当且仅当考虑物品的顺序为 $\\dots, 1(j), \\dots, 2(i), \\dots$，且考虑 $2(i)$ 时恰好只剩 $1$ 费。特别地，若考虑 $2(i)$ 后考虑了 $1(k)$，应当满足 $a_j + a_k \\lt a_i$。\n\n  于是考虑对 $a$ 排序，并枚举 $i, j$，使得 $a_i \\gt a_j \\gt \\frac {a_i} 2$。通过双指针求出 $k$ 的最大值。对于每个物品，若下标属于 $[1, k]$，那么取一费或二费均可；若属于 $(k, j)$，那么只能取二费；若属于 $(j, i) \\cup (i, n]$，那么取一费或二费均可。\n\n  另一个限制是在考虑 $2(i)$ 之前恰好花掉了 $m - 1$ 费，除去 $j$ 花掉的 $1$ 费，还剩下 $m - 2$ 费。对于下标属于 $(j, i)$ 的物品，若取一费，那么它会在考虑 $i$ 之前被取，贡献为 $1$；若取二费，那么它会在考虑 $i$ 之后被取，贡献为 $0$。对于下标属于 $(i, n]$ 的物品，无论取一费还是二费，它都会在考虑 $i$ 之前被取，所以贡献为 $1$ 或 $2$。现在要求从这些物品中选 $m - 2$ 费的方案数，发现两段本质相同，我们可以认为第一段是 $0 (+ 1)$，第二段是 $1 (+ 1)$，于是直接组合意义即可。当然也可以枚举一段求另一段，再用一个神秘恒等式化简。","tags":["日祭"],"categories":["OI","记录"]},{"title":"[CF2159D1 / 2] Inverse Minimum Partition 题解","url":"/article/CF2159D1-2-Inverse-Minimum-Partition-题解/","content":"\n上大分场，Div. 2 Rank 8，紫名祭。\n\n不妨设值域为 $V$。首先你需要发现一堆有关 $a$ 与 $f(a)$ 的性质。\n\n{% folding title=\"性质一\" class=blue open=true %}\n\n下文中，「$a_i$ 是后缀最小值」当且仅当 $a_i \\lt \\min_{j = i + 1}^n a_j$。\n\n我们发现，对于 $a_i$，如果存在 $j$ 满足 $j \\gt i, \\forall k \\in [i, j), a_k \\ge a_j$，那么让 $a_i$ 作为子段的结尾一定不优。即，当且仅当 $a_i$ 是后缀最小值时，位置 $i$ 才可能作为子段的结尾。同理，当且仅当 $a_i$ 是后缀最小值时，位置 $i + 1$ 才可能作为子段的开头，否则一定不优。\n\n于是，我们**只需要关注原序列中是后缀最小值的元素**。\n\n{% endfolding %}\n\n{% folding title=\"性质二\" class=blue open=true %}\n\n考虑对于一个非空数组，什么时候最优的划分方案是一定其本身（即不进行划分）。\n\n设 $c$ 是一个非空数组，我们将其分为两个非空子段 $a, b$。根据性质一，我们可以认为 $a, b, c$ 均单调递增。容易发现，$\\mathrm{cost}(a) \\cdot \\mathrm{cost}(b) \\lt \\mathrm{cost}(c)$。要使 $c$ 的最优的划分方案一定是其本身，那么一定有 $\\mathrm{cost}(c) \\lt \\min\\{\\mathrm{cost}(a) + \\mathrm{cost}(b)\\}$。解一下这两个方程，就可以得到 $\\mathrm{cost}(c) \\le 3$。\n\n即，**在最优划分中，每个子段的代价一定是 $1, 2, 3$ 中的一个**。\n\n{% endfolding %}\n\n{% folding title=\"D1&nbsp;做法\" class=green open=true %}\n\n我们只用关注是后缀最小值的元素。\n\n设 $dp_i$ 表示 $f([a_1, \\dots, a_i])$，考虑转移。因为每个子段的代价一定是 $1, 2, 3$ 中的一个，所以我们可以通过双指针维护 $lft_{i, j} = k (j \\in \\{1, 2, 3\\})$，表示 $a_k$ 是 $a$ 中第一个满足 $\\lceil \\frac{a_i}{a_k} \\rceil \\le j$ 的元素。那么有转移 $dp_i = \\min_{j = 1}^3 dp_{lft_{i, j} - 1} + j$。于是 D1 就做完了。\n\n时间复杂度 $O(n)$。\n\n[Submission](https://codeforces.com/contest/2159/submission/343655326)\n\n{% endfolding %}\n\n{% folding title=\"性质三\" class=blue open=true %}\n\n根据性质一，我们可以认为 $a$ 单调递增。考虑对 $a$ 贪心构造出一种较优的方案。一个自然的想法是要求每一个子段的花费 $\\le 2$ 且总子段数量尽量少。这样，对于子段 $[a_l, \\dots, a_r]$，一定有 $\\lceil \\frac{a_r}{a_{l - 1}} \\rceil \\gt 2$。这意味着最多只有 $\\log a_n$ 个子段，**那么 $f(a)$ 的上限就是** $2\\log a_n = 2\\log V \\approx \\textbf{120}$。\n\n{% endfolding %}\n\n{% folding title=\"性质四\" class=blue open=true %}\n\n考虑 D2 的暴力 DP。容易想到设 $dp_{l, r}$ 表示 $f([a_l, \\dots, a_r])$。若我们固定 $l$，那么我们可以通过单调栈维护 $[a_l, \\dots, a_r]$ 中是后缀最小值的元素，而 $lft_{i, j}$ 可以通过二分求出。时间复杂度 $O(n^2 \\log n)$。\n\n一个显然的性质是，**对于固定的 $r$，$dp_{l, r}$ 单调递减**。\n\n{% endfolding %}\n\n{% folding title=\"D2&nbsp;做法\" class=green open=true %}\n\n性质三说明，$dp_{l, r}$ 的值域较小；性质四说明，$dp_{l, r}$ 数组在固定 $r$ 时具有单调性。于是我们可以利用一个经典 trick：交换 DP 的下标与值。\n\n设 $dp'_ {r, w}$ 表示最小的 $l$ 使得 $f([a_l, \\dots, a_r]) \\le w$。那么转移是显然的：$dp'_ {r, w} = \\min_ {j = 1}^3 dp'_ {lft_ {r, j} - 1, w - j}$。特别地，令 $dp'_ {r, 0} = r + 1$。初始状态是 $dp'_ {0, w} = 1$。\n\n考虑如何统计答案。容易发现，$\\forall l \\in [dp'_ {r, w}, dp'_ {r, w - 1}), dp_ {l, r} = w$，根据这一点统计即可。需要注意的是，因为 DP 是在单调栈上进行的，所以使用的下标均为单调栈的下标，要计算实际的下标还需要稍作转换，详见代码实现。\n\n时间复杂度 $O(n \\log n + n \\log V)$。\n\n[Submission](https://codeforces.com/contest/2159/submission/343661356)\n\n{% endfolding %}","tags":["DP","数据结构","DP 优化"],"categories":["OI","题解"]},{"title":"2025 年 10 月日祭","url":"/article/diary/2025/10/","content":"\n### Codeforces Round 1055 (Div. 1 + Div. 2)\n\n[Link](https://codeforces.com/contest/2152)\n\n我好菜。\n\n- D - Division Versus Addition\n\n  赛时比较早就想到了大概的做法，但是没写（？）。首先发现 $\\mathrm{popcount} = 1$ 的数显然没有贡献（操作它则严格不优），而其它数是可以有贡献的。但是观察样例发现 $3$ 可以没有贡献，即满足 $x = 2^k + 1$ 的 $x$，若 A 先操作一次，那么这个数就没有贡献了；而对于其它数，就算 A 操作了也依然可以有贡献。对于上述这类数，A 可以让其中的一半（向上取整）取消贡献。所以答案就应该是原本的操作次数 + 有贡献的数的数量 - 特殊数的数量的一半向上取整。\n\n- E - Monotone Subsequence\n\n  好难绷的题。第一次考虑对于全局询问，如果答案序列的长度 $\\ge n + 1$ 直接返回。然后你发现要是再询问答案序列中的元素好像没什么用，所以下一次就询问除它们以外的元素。于是这样询问 $n$ 次，如果中途答案序列长度 $\\ge n + 1$ 就直接返回。如果 $n$ 次之后依然没有答案，那么现在一定还剩下一个元素。考虑构造一个下降子序列。发现对于一个在第 $i + 1$ 轮中被询问的元素，在它左侧一定存在一个在第 $i$ 轮中被询问的元素，且这个元素一定比它小。所以从剩下的元素中的一个开始，每次向左找第一个上一轮被询问的元素，即可构造出答案。\n\n### 多校联考 20251007\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0769)\n\n- B - 中心极限定理\n\n  我唐。发现难点在于把马吃了怎么处理，于是考虑状压一下当前位置前几步即可。\n\n- C - 散步\n\n  将题面稍作转化，变成：给定一个无向联通图与偶数个关键点，要求将关键点两两匹配并选择一条路径，使得任意两条路径（边）不交，构造方案。发现这个问题在树上就可以做。对于一棵子树，它最多有一个点未被匹配。于是对于一个节点，先将它子树中剩下的点与它本身（若有）两两匹配，最后最多剩下一个点，将这个点传递给父亲即可。\n\n### 多校联考 20251008\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0770)\n\n- B - 围棋\n\n  赛时死磕导致根本没看 T3 和 T4。以后再死磕我是狗。\n\n  发现难点在于翻转一个白棋，因为翻转后可能会新增一些死的白棋。发现这个东西差不多是割点，于是跑塔尖即可。另外集中情况分讨一下即可。\n\n- C - 相互抵消\n\n  化简发现原式至于 $\\sum i a_i$ 与 $\\sum a_i$ 有关，维护即可。\n\n### 多校杂题选讲 20251010\n\n[Link](https://vjudge.net/contest/753807)\n\n- A - 帐篷\n\n  凭啥我只会 $O(n^3)$。设 $dp_{i, j}$ 表示格子大小为 $i \\times j$ 时的方案数，考虑横着一组占用一行两列，竖着一组占用两行一列，单独一个占用一行一列，直接转移即可。\n\n因为一些原因后面的就不写了。\n\n### 多校联考 20251011\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0771)\n\n美好的一天从饭堂开始。\n\n- A - 询问\n\n  发现 5 次询问之后就是 $a \\leftarrow 2 \\times (a - i)$，$b \\leftarrow 2 \\times (b - i)$ 了，矩阵快速幂即可。话说我赛时写了个什么神秘 $O(\\sqrt{MOD})$ 的分块做法？\n\n- B - k-绍兴序列\n\n  $k = 1$ 分讨一下就做完了，倒着 DP 即可。赛时为啥我要正着 DP？\n\n- C - 二次根式\n\n  什么猎奇打表题。发现 $F(n)^2 G(n) = n!$ 所以只用计算 $F(n)$。对于 $F(n)$，枚举 $\\sqrt n$ 以内的质数计算贡献即可。发现需要快速阶乘但是又发现模数固定，于是打表即可。\n\n### Codeforces Round 1058 (Div. 1, Div. 2)\n\n[Link](https://codeforces.com/contest/2160)\n\nDiv. 2 Rank 8，紫名祭。\n\n只能说是前一天晚上睡太好了，这天晚上状态好。要是我每次晚上状态都这么好 2200 也不是不可能。\n\n- F - Twin Polynomials\n\n  赛时做这题的时候有点飘了，要是我认认真真手模一下样例说不定真能场切。\n\n  容易想到对于 $i \\to a_i$ 连边并考虑图的性质。发现对于每个点（除 $0$ 号点外），要么向 $0$ 号点连边，要么形成自环，要么属于一个二元环。特别地，$n$ 号点不能向 $0$ 号点连边。容易举反例证明这一点。于是考虑先把图建出来，判断一下是否合法。接下来，只需要考虑剩下的点，并进行一个 DP。设有 $i$ 个点时有 $dp_i$ 种分配方案，那么 $dp_i = 2dp_{i - 1} + (i - 1)dp_{i - 2}$，初始状态是 $dp_0 = 1$。如果是 $n$ 号点那么需要特判一下。于是就做完了。\n\n  赛时先是认为图是由若干个环组成的（不一定是二元环或自环）于是耽误了好久。后来想到了这一点，可是又没想到可以向 $0$ 连边，又没有静下心来手模样例，于是 5 题 rk 8 ~~遗憾~~离场了。\n\n- G1 & G2 - Inverse Minimum Partition\n\n  好神的题。[Solution](/article/CF2159D1-2-Inverse-Minimum-Partition-题解/)。\n\n  值得一提的是，BINYU 自己把这道题改出来了，然后他又给 Zi_Gao 讲了，然后我又参考了他们的代码。直到我写题解的时候，才发现这个做法是假的，然后把我们三个 hack 了。\n\n### 多校联考 20251014\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0772)\n\n除了之前没有区分度的那场之外考得最好的一场。\n\n并且获得了 1.25 瓶冰红茶。\n\n只能说还在稳定开挂吧，之前 $\\frac{90}{1400}$ 的运气还没用完。\n\n- A - Happy · Lovely · Everyday!\n\n  每次选择相邻的两个异或听起来比较困难，所以考虑转化一下，将原序列分成若干个子段，让每个子段变成这个子段的异或和。依然感觉不是特别能发现性质，于是考虑如果已知最终状态，如何判断合法，发现是贪心判断，那么这道题的做法就比较显然了。初始状态为 $dp_0 = 1$，每次 $dp_i$ 可以转移到 $dp_{i + 1}$；若存在 $k$ 使得 $k$ 是 $i$ 右侧第一个满足 $s_k = 1$ 的位置，那么 $dp_i$ 还可以转移到 $dp_k$。若 $a_{i + 1}, \\dots, a_n$ 的异或和为零，那么将 $dp_i$ 累加进答案即可。其实挺唐的，主要还是没改掉赛时喜欢乱猜结论的坏习惯导致耽误了好久。\n\n- B - 敬启，致那时的我\n\n  虽然按理来讲这题应该评蓝（因为矩阵快速幂都是绿）但是我觉得 B < A。\n\n  发现斐波那契数列实在是一点性质都没有了，popcount 相同的数对应的斐波那契值也是一点性质都没有，于是想想关于计算斐波那契数列的第 $n$ 项还有什么做法，于是显然只能想到矩阵加速。你发现矩阵满足结合律与分配律，于是这道题就做完了。设 $dp_{i, j, 0 / 1}$ 表示考虑到第 $i$ 位，填了 $j$ 个 $1$，当前值是否等于上界 时的答案。直接转移即可。\n\n- C - Lead to shine more\n\n  好奇我赛时是如何切掉这题的。\n\n  先观察一下，发现能走的路只有倍增这一条。一个天真的想法是，设 $dp_i, to_i$ 分别表示初始 $x = 1$，达到 $x \\ge 2^i$ 所需要的步数以及总步长。发现无法转移，需要添加 $j$ 这一维表示初始 $x = j$。发现还是无法转移，需要添加 $k$ 这一维表示每次更新是 $x \\leftarrow x + \\mathrm{popcount}(x) + k$。然后就可以转移了。对于每次询问，发现高位是容易处理的，然而低位不容易。所以用倍增处理出高位，留下最后 $6$ 位直接暴力地推即可。\n\n  值得一提的是，赛时代码中我不小心让下标出现了 $-1$，导致 CWOI 上挂完了。幸运的是，虽然本地测试也用的 Linux，但应该是因为环境不同，本地并没有挂。赛时我其实注意到了那里会出现 $-1$，但是 Windows 上没挂，我也没有意识到它会被作为下标，就忽略了这个问题。总之还是不够严谨导致的，而且在 NOI Linux 上测一下样例也是很有必要的。（这段话好人机。）\n\n### 多校联考 20251015\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0773)\n\n- B - 捐赠\n\n  两只 $\\log$ 跑得快，甚至 $10^6$ 草过了 $2s$。\n\n  正解显然是一只 $\\log$ 的。你会发现 A 选的个数与 B 没选的个数之和恰好是 B 的个数，下文记作 $k$（废话），那么转化一下，对 B 物品的权值取相反数，那么答案就是选权值前 $k$ 大的物品，再加上 B 物品的权值和即可。\n\n- C - 染色\n\n  不错的树上启发式合并题，可是我并不会。\n\n  然后写日祭的时候发现一车人的启发式合并是假的，包括我。当然如果精细实现也能过，但是我不想改了。\n\n### 多校联考 20251021\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0774)\n\nBINYU Zi_Gao Rong7 模拟赛，内部提前到了 20251017 考。\n\nA 是唐，C 的 $99$ 分只用发现 $\\gcd(f_i, f_j) = f_{\\gcd(i, j)}$（$f_i$ 表示斐波那契数列的第 $i$ 项），其它不会。\n\n### 多校杂题选讲 20251017\n\n[Link](https://vjudge.net/contest/755481)\n\n不想写。\n\n### 多校联考 20251018\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0775)\n\n紫紫黑黑 NOIP 模拟赛。\n\n不想写。\n\n### 并非多校联考 20251021\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0776)\n\n运动会，没打。\n\n### 多校联考 20251022\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0777)\n\n- A - 石头人\n\n  因为没判 $s_0$ 导致挂分。\n\n- B - 炒鱿鱼\n\n  要求在一种特殊图上对图进行三分图染色。\n\n  做法是，直接 dfs 染色，但是优先遍历编号大的点。至于为什么是对的我也不知道\n\n  赛时因为有点细节问题导致挂分。话说这个构造甚至我最后 20min 想出来的。\n\n- C - 适格者\n\n  纯唐。\n\n### 多校联考 20251025\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0778)\n\n- A - 剖分\n\n  唐氏树形 DP / 贪心。\n\n- B - 海啸\n\n  不带修是 ARC201B。\n\n  带修也是好做的，维护一下当前每一“层”中的元素即可。\n\n### 并非多校联考 20251027\n\n可是牢祝依然算了这场的成绩。\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0779)\n\n- A - 大骑士领一瞥\n\n  分讨题。\n\n- B - 流放阿卡胡拉\n\n  注意到路径一定是 $(0, 0) \\to (x', y') \\to (x, y)$，其中 $x'$ 或 $y'$ 是质数。然后你发现，我们只需要关注以 $(x, y)$ 为右下角的一个矩形中的 $(x', y')$，所以在矩形中跑暴力 DP 即可，矩形长宽取到 $1000$ 就行了。虽然不知道哪里来的正确性，但是靠感觉它就是对的。\n\n### 多校联考 20251028\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0780)\n\n- A - 排序\n\n  唐。\n\n- B - 重排\n\n  唐。\n\n### 多校联考 20251029\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0781)\n\n- A - 初恋\n\n  唐。\n\n- B - 奥瑟罗\n\n  没我唐。随便乱维护一下即可。\n\n### CSP-S 2020 并非 VP\n\n- A - [儒略日](https://www.luogu.com.cn/problem/P7075)\n\n  屎。\n\n- B - [动物园](https://www.luogu.com.cn/problem/P7076)\n\n  屎。\n\n- C - [函数调用](https://www.luogu.com.cn/problem/P7077)\n\n  好。没一眼秒的原因是没有注意到加乘可以转化成加和全局标记乘，也没想到正难则反。我咋这么唐。\n\n  后来一直写挂的原因是，拓扑时理所应当地只加了 $0$ 号点，也是糖丸了。包括记忆化搜索的时候，应当令初值为 $-1$，因为乘数可能为 $0$。\n\n### CSP-S 2021 并非 VP\n\n- A - [廊桥分配](https://www.luogu.com.cn/problem/P7913)\n\n  唐。\n\n- B - [括号序列](https://www.luogu.com.cn/problem/P7914)\n\n  唐。\n\n- C - [回文](https://www.luogu.com.cn/problem/P7915)\n\n  屎。\n\n### CSP-S 2022 并非 VP\n\n- A - [假期计划](https://www.luogu.com.cn/problem/P8817)\n\n  好。你发现如果我们确定了 $B$ 和 $C$，那么就可以贪心地选择 $A$ 和 $D$，其中 $A$ 需要满足从 $1$ 与 $B$ 均可达，$D$ 同理。于是我们可以 $O(n^2)$ 预处理出可达关系，与对于一个确定点，有哪些点可从 $1$ 与它可达。接下来，枚举 $B$ 和 $C$，贪心地选择最优的 $A$ 和 $D$。发现 $A$ 和 $D$ 可能会和其它点重复，于是考虑放缩一下。容易发现我们只关注前 $3$ 大的 $A$ 和 $D$，于是预处理的时候求出前三大的即可。\n\n- B - [策略游戏](https://www.luogu.com.cn/problem/P8818)\n\n  唐。\n\n### CSP-S 2023 并非 VP\n\n- A - [密码锁](https://www.luogu.com.cn/problem/P9752)\n\n  唐。\n\n- B - [消消乐](https://www.luogu.com.cn/problem/P9753)\n\n  唐。难点在于证明时间复杂度。\n\n- C - [结构体](https://www.luogu.com.cn/problem/P9753)\n\n  屎。\n\n### CSP-S 2024 并非 VP\n\n- A - [决斗](https://www.luogu.com.cn/problem/P11231)\n\n  唐。\n\n- B - [超速检测](https://www.luogu.com.cn/problem/P11232)\n\n  屎。\n\n- C - [染色](https://www.luogu.com.cn/problem/P11233)\n\n  唐。这题咋跟 Chicken Jocky 一模一样啊，虽然自己还是瞪了好久，还因为饭堂调了好久。","tags":["日祭"],"categories":["OI","记录"]},{"title":"P13407 [GCJ 2010 Finals] Letter Stamper 题解","url":"/article/P13407-GCJ-2010-Finals-Letter-Stamper-题解/","content":"\n这篇题解有点魔怔。\n\n本题应该有很多不同的 DP 方法，但是核心应该都大同小异。\n\n观察栈中元素的性质，发现显然没有两个距离为一的相同的元素，若有则一定更劣。\n\n再想想，发现显然没有两个距离为二的相同的元素，若有则一定不优。\n\n再想想，发现栈中相邻的三个元素一定互不相同（即相邻的三个元素一定是 `ABC` 的一个排列）。\n\n再想想，假设我们知道当前栈的大小、栈顶元素与栈顶元素的下一个元素（若有），我们就可以推出整个栈的情况。\n\n再想想，如果我们刚刚打印完 $s_i$，那么栈顶元素一定就是 $s_i$。\n\n再想想，如果我们要打印一个非栈顶元素 $s_i$，可以选择反复弹出栈顶元素或者反复加入新元素，直到栈顶是 $s_i$。\n\n于是你想到了 DP。设栈顶的前三个元素是 $X, Y, Z$。设 $dp_{i, j, y}$ 表示刚刚打印了 $X = s_i$，当前栈的大小是 $j$ 且 $Y = y\\ (X \\neq Y)$ 的最小操作次数。有了 $X, Y$，自然可以推出 $Z$。\n\n转移是显然的，根据 $s_{i - 1}$ 分类讨论即可。唯一的细节是 $j = 1$ 的情况，此时会多一种转移，即先把栈清空，再向栈中加入 $s_i$。另外，当 $j = 1$ 时，此时没有 $Y$，但是 $y$ 的取值会影响栈的情况，从而影响后续的 DP。设 `ABC` 中除 $s_i$ 的两个元素分别是 $a$ 和 $b$，那么 $dp_{i, 1, a}$ 与 $dp_{i, 1, b}$ 应该互相取 $\\min$。\n\n时间复杂度 $O(n^2)$，不至于有很大的常数。\n\n[提交记录](https://www.luogu.com.cn/record/237544993)\n\n```cpp\n#include <bits/stdc++.h>\n#define rep(i, s, e) for(int i = s; i <= e; ++i)\nusing namespace std;\n\nint n, a[7005], dp[2][7005][3], ans;\nchar s[7005];\n\nint solve() {\n\tscanf(\"%s\", s + 1);\n\tn = strlen(s + 1);\n\trep(i, 1, n) {\n\t\ta[i] = s[i] - 'A';\n\t}\n\trep(i, 0, 1) {\n\t\trep(j, 1, n + 2) {\n\t\t\trep(y, 0, 2) {\n\t\t\t\tdp[i][j][y] = 0x3f3f3f3f;\n\t\t\t}\n\t\t}\n\t}\n\tans = 0;\n\trep(i, 1, n) {\n\t\trep(j, 1, i) {\n\t\t\trep(y, 0, 2) {\n\t\t\t\tdp[i & 1][j][y] = 0x3f3f3f3f;\n\t\t\t\tint x = a[i], &f = dp[i & 1][j][y];\n\t\t\t\tif(x == y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tint z = 3 - x - y;\n\t\t\t\tif(a[i - 1] == x) {\n\t\t\t\t\tf = min(f, dp[(i & 1) ^ 1][j][y] + 1);\n\t\t\t\t} else if(a[i - 1] == y) {\n\t\t\t\t\tif(j > 1) f = min(f, dp[(i & 1) ^ 1][j - 1][z] + 2);\n\t\t\t\t\tf = min(f, dp[(i & 1) ^ 1][j + 2][z] + 3);\n\t\t\t\t} else if(a[i - 1] == z) {\n\t\t\t\t\tf = min(f, dp[(i & 1) ^ 1][j + 1][x] + 2);\n\t\t\t\t\tif(j > 2) f = min(f, dp[(i & 1) ^ 1][j - 2][x] + 3);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tint x = a[i], y = not a[i], z = 3 - x - y;\n\t\tdp[i & 1][1][y] = dp[i & 1][1][z] = min({dp[i & 1][1][y], dp[i & 1][1][z], ans + 2});\n\t\tans = 0x3f3f3f3f;\n\t\trep(j, 1, i) {\n\t\t\trep(y, 0, 2) {\n\t\t\t\tans = min(ans, dp[i & 1][j][y] + j);\n\t\t\t}\n\t\t}\n\t}\n\treturn ans;\n}\n\nint main() {\n\tint T = 1; scanf(\"%d\", &T);\n\trep(i, 1, T) {\n\t\tprintf(\"Case #%d: %d\\n\", i, solve());\n\t}\n\treturn 0;\n}\n```","tags":["DP"],"categories":["OI","题解"]},{"title":"[CF2150E2] Hidden Single (Version 2) 题解","url":"/article/CF2150E2-Hidden-Single-Version-2-题解/","content":"\n好难绷的题。\n\n你也许需要先会 E1。~~猜你喜欢：[[CF2150E1] Hidden Single (Version 1) 题解](/article/CF2150E1-Hidden-Single-Version-1-题解)~~\n\n看到题后似乎只能想到分治，于是想想该怎么分治。\n\n考虑对于 $[1, n]$ 中的每个 $i$，判断它是不是答案。考虑 $[l, r]$，设中点为 $mid$。我们尝试找出 $i$ 在当前区间内的分布情况（左区间或右区间）。总共分三类情况：\n\n- 所有 $i$ 均出现在左区间：有 $\\frac 1 4$ 的概率，需要询问 $2$ 次。\n- 所有 $i$ 均出现在右区间：有 $\\frac 1 4$ 的概率，需要询问 $1$ 次。\n- 两个 $i$ 分别出现在左区间和右区间：有 $\\frac 1 2$ 的概率，需要询问 $2$ 次，可以结束递归。\n\n所以一次递归的期望询问次数就是 $\\frac 7 4$。若当前区间长度为 $1$ 则说明 $i$ 是答案。容易算出，当 $n$ 比较大时，对于单个 $i$ 的总期望询问次数是大约 $\\frac 7 2$。再剪剪枝，找到答案之后直接返回，总期望询问次数是 $\\frac 7 4 n$，上限是 $\\frac 7 2 n$。为了尽量达到期望询问次数，你需要创建两个随机的映射，以实现打乱数组并随机离散化的效果。可惜，这还是过不了 E2，甚至连 E1 都过不了。（E1 过不了的原因是，当 $n$ 较小时，对于单个 $i$，实际询问次数会较大。）\n\n不过我们先不讨论 E1，只讨论 $n$ 较大的情况。考虑优化，发现对于单个 $i$，$\\frac 7 2$ 的期望询问次数似乎很难再优化，于是能不能减少需要询问的 $i$ 的数量呢？又如何减小？\n\n~~这个时候你想到，E1 一定是有它存在的意义的。~~ 想想 E1 的一次递归做了些什么，它花了 $\\frac 7 4 n$ 的期望询问次数。再考虑一次递归后产生的新区间有什么性质，发现新区间中，期望 $\\frac 1 4 n$ 个数出现了两次。于是考虑对新区间采用上文中提到的做法。因为我们只关注出现了两次的数，而不关注仅出现了一次的数（根据 E1 做法的性质，仅出现了一次的数一定不是答案），所以需要询问的 $i$ 的期望数量就只剩 $\\frac 1 4 n$ 了。\n\n这样，后半部分期望询问次数就是 $\\frac 7 2 \\cdot \\frac 1 2 \\cdot \\frac 1 4 n = \\frac{7}{16} n$，上限是 $\\frac 7 8 n$。前半部分的期望询问次数相对稳定，所以总询问次数的上限就大约是 $\\frac 7 4 n + \\frac 7 8 n = \\frac{21}{8} n$，可以通过 E2。\n\n[提交记录](https://codeforces.com/contest/2150/submission/340556925)","tags":["Ad-hoc","交互","随机化"],"categories":["OI","题解"]},{"title":"[CF2150E1] Hidden Single (Version 1) 题解","url":"/article/CF2150E1-Hidden-Single-Version-1-题解/","content":"\n看到题后似乎只能想到分治，于是想想该怎么分治。\n\n考虑 $[l, r]$，设中点为 $mid$。假定当前区间内存在答案，并且我们知道 $[1, n]$ 中的每个 $i$ 在这个区间内的出现次数 $cnt_i$。特别地，对于答案 $x$，我们~~不得不~~钦定 $cnt_x = 2$。对于 $[1, n]$ 中的每个 $i$，我们尝试找出它在当前区间内的分布情况（左区间或右区间）。于是根据 $cnt_i$ 分讨：\n\n- $cnt_i = 0$：需要 $0$ 次询问。直接跳过。\n- $cnt_i = 1$：需要 $1$ 次询问。只需要询问左区间，即可得到它属于左区间还是右区间。\n- $cnt_i = 2$：最多需要 $2$ 次询问。询问一次左区间，询问一次右区间，即可得到下面三种情况之一：\n  - 两个 $i$ 均出现在左区间\n  - 两个 $i$ 均出现在右区间\n  - 两个 $i$ 分别出现在左区间与右区间\n\n容易发现，对于当前区间，我们最多进行 $r - l + 2$ 次询问，额外加 $1$ 是因为我们钦定了 $cnt_x = 2$。这样，我们可以统计出左区间的元素数量与右区间的元素数量。按理来讲，一个区间的元素数量就应该是这个区间的长度，但是正是因为我们钦定了 $cnt_x = 2$，所以在统计过程中，我们会把 $x$ 视作两个元素，这就会导致统计的数量与实际冲突，而产生冲突的区间则正是包含 $x$ 的区间。于是，我们只需要利用不包含 $x$ 的区间更新 $cnt_x$，再递归处理包含 $x$ 的区间即可。当区间内有且仅有一个元素时，这个元素就是 $x$。\n\n因为每次递归区间长度都要减半，所以总询问个数大约是 $4n$。由于取整带来的一点误差，题目还贴心地多给了 $2 \\lceil \\log_2 n \\rceil$ 次询问，比较充足。\n\n如果你还想在 E1 的基础上稍作优化，那么你可以创建一个随机的映射以实现打乱原数组的效果。这样，对于 $cnt_i = 2$ 的情况，期望询问次数就是 $\\frac 3 2$ 次，但是这优化不大，也过不了 E2。\n\n代码实现是容易的，按照题解模拟即可。\n\n~~猜你喜欢：[[CF2150E2] Hidden Single (Version 2) 题解](/article/CF2150E2-Hidden-Single-Version-2-题解/)~~","tags":["Ad-hoc","交互"],"categories":["OI","题解"]},{"title":"[ABC424G] Set list 题解","url":"/article/ABC424G-Set-list-题解/","content":"\n乍一看感觉很难直接 DP，于是考虑先把限制形式化。设当前选的歌曲形成的集合是 $S = \\{i_1, i_2, \\dots, i_j\\}$，因为歌曲的顺序并不影响所选集合的合法性，所以 $\\forall S' \\subseteq S, \\sum_{i \\in S'} b_i \\le \\sum_{i = 1}^{n} \\min(a_i, |S'|)$。考虑简化条件，对于一个固定的 $|S'|$，要最大化前者，显然只需要取较大的几个 $b_i$。所以自然想到先将 $b$ （连带着 $c$）降序排序，条件就转化为了 $\\forall k \\in [1, j], \\sum_{p = 1}^k b_{i_p} \\le \\sum_{i = 1}^n \\min(a_i, k)$，记后者为 $f(k)$，它是可以预处理出来的。可以证明这个条件是充要的，一个感性的理解是，我们取出了原集合的每一个子集并判断其是否合法，具体的证明可以参见 Atcoder 的 [官方题解](https://atcoder.jp/contests/abc424/editorial/13944)。\n\n那么接下来就好做了。设 $dp_{i, j, k}$ 表示前 $i$ 首歌中选了 $j$ 首歌，且 $\\sum_{p = 1}^j b_p = k$ 的最大价值。转移类似于背包，把 $f(j)$ 视为当前背包容量，把 $k$ 视为已用的容量，把 $b_i$ 与 $c_i$ 视为当前物品的体积与价值。时间复杂度 $O(nm^3)$，空间复杂度 $O(nm^2)$。\n\n```cpp\n#include <bits/stdc++.h>\n\n#define rep(i, s, e) for(int i = s; i <= e; ++i)\n#define _rep(i, s, e) for(int i = s; i >= e; --i)\n\nusing namespace std;\n\nint n, m, a[105], mx[105];\npair<int, int> b[105];\nlong long dp[105][10005], ans;\n\nsigned main() {\n\tscanf(\"%d %d\", &n, &m);\n\trep(i, 1, n) {\n\t\tscanf(\"%d\", &a[i]);\n\t}\n\trep(i, 1, m) {\n\t\tscanf(\"%d %d\", &b[i].first, &b[i].second);\n\t}\n\tsort(b + 1, b + 1 + m, greater<pair<int, int>>());\n\trep(i, 1, m) {\n\t\trep(j, 1, n) {\n\t\t\tmx[i] += min(a[j], i);\n\t\t}\n\t}\n\trep(j, 0, m) {\n\t\trep(k, 0, n * m) {\n\t\t\tdp[j][k] = - (1ll << 60);\n\t\t}\n\t}\n\tdp[0][0] = 0;\n\trep(i, 1, m) {\n\t\t_rep(j, i, 1) {\n\t\t\t_rep(k, mx[j], b[i].first) {\n\t\t\t\tdp[j][k] = max(dp[j][k], dp[j - 1][k - b[i].first] + b[i].second);\n\t\t\t}\n\t\t}\n\t}\n\tans = 0;\n\trep(j, 0, m) {\n\t\trep(k, 0, n * m) {\n\t\t\tans = max(ans, dp[j][k]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}\n```","tags":["DP","背包 DP"],"categories":["OI","题解"]},{"title":"[ABC423G] Small Multiple 2 题解","url":"/article/ABC423G-Small-Multiple-2-题解/","content":"\n好题。本题解做法与官方题解相同，但将采用类似 CF Hints 的风格。**下文中的 $\\oplus$ 均指将两个十进制数进行拼接，$|x|$ 表示 $x$ 在十进制下的位数，且默认包含前导零。**\n\n{% folding title=\"提示&nbsp;1\" class=\"blue\" %}\n\n考虑答案的形式。\n\n{% folding title=\"答案\" class=\"green\" %}\n\n答案一定是 $l \\oplus S \\oplus r$ 的形式，其中允许 $l, r$ 有前导零。\n\n{% endfolding %}\n\n{% endfolding %}\n\n{% folding title=\"提示&nbsp;2\" class=\"blue\" %}\n\n考虑 $l$ 与 $r$ 的限制。\n\n{% folding title=\"答案\" class=\"green\" %}\n\n最基础地，有 $l \\oplus S \\oplus r \\equiv 0 \\pmod k$，即 $l \\cdot 10^{ |S| + |r| } + S \\cdot 10^{ |r| } + r \\equiv 0 \\pmod k$。同时有 $|l| + |r| = |k|$（均包含前导零），因为一定存在一个 $x$ 满足：\n\n- $0 \\le x \\lt k$\n- $S \\oplus x \\equiv 0 \\pmod k$\n\n若 $|l| + |r| \\gt |k|$ 则 $(l, r)$ 这一组解严格劣于 $(0, x)$ 这一组解。\n\n{% endfolding %}\n\n{% endfolding %}\n\n{% folding title=\"提示&nbsp;3\" class=\"blue\" %}\n\n考虑如何通过暴力枚举找到所有解 $(l, r)$。\n\n{% folding title=\"尝试与观察\" class=yellow %}\n\n- 考虑枚举 $l$ 的值，还需要枚举 $|r|$ 才能解出 $r$。\n- 考虑枚举 $r$ 的值，还需要枚举 $|r|$ 才能解出 $l$（因为允许 $r$ 有前导零）。\n\n于是发现第一维需要枚举 $|r|$。\n\n{% endfolding %}\n\n{% folding title=\"答案\" class=\"green\" %}\n\n对于第二维，可以枚举 $l$ 并解出 $r'$ 或者枚举 $r$ 并解出 $l'$，以下对两种情况都进行讨论。\n\n{% folding title=\"枚举&nbsp;$l$\" class=green open=true %}\n\n**请注意，$|r|$ 表示的是钦定的 $r$ 的位数，而实际解出的 $r'$ 不一定满足 $|r'| = |r|$。**\n\n将 $l \\oplus S \\oplus r' \\equiv 0 \\pmod k$ 整理一下即可得到 $r' \\equiv - l \\cdot 10^{ |S| + p } - S \\cdot 10^p \\pmod k$，可以 $O(1)$ 解出。注意当且仅当 $r'$ 的有效位数（不包含前导零）$\\le |r|$ 合法。\n\n{% endfolding %}\n\n{% folding title=\"枚举&nbsp;$r$\" class=green open=true %}\n\n同样整理 $l' \\oplus S \\oplus r \\equiv 0 \\pmod k$ 可以得到 $10^{ |S| + |r| } \\cdot l \\equiv - S \\cdot 10^{ |r| } - r \\pmod k$，解这个线性同余方程即可得到 $l'$。这里把扩欧的时间复杂度视为常数。同样当且仅当 $l'$ 的有效位数 $\\le |k| - |r|$ 时合法。\n\n{% endfolding %}\n\n{% endfolding %}\n\n{% endfolding %}\n\n{% folding title=\"提示&nbsp;4\" class=\"blue\" %}\n\n考虑如何优化暴力。\n\n{% folding title=\"答案\" class=\"green\" %}\n\n- 若 $|l| \\le |r|$，枚举 $l$。\n- 若 $|l| \\gt |r|$，枚举 $r$。\n\n{% endfolding %}\n\n{% endfolding %}\n\n{% folding title=\"提示&nbsp;5\" class=\"blue\" %}\n\n考虑得到所有解 $(l, r)$ 之后，如何比较 $l \\oplus S \\oplus r$ 的大小。\n\n{% folding title=\"答案\" class=\"green\" %}\n\n对于所有 $|r|$ 相同的解 $(l, r)$，显然可以直接比较 $(l, r)$ 的字典序，字典序最小的解对应的答案就是最小的。\n\n对于 $|r|$ 不同的解，暴力比较即可。总共只会比较 $|k|$ 次。\n\n{% endfolding %}\n\n{% endfolding %}\n\n{% folding title=\"提示&nbsp;6\" class=\"green\" %}\n\n于是这道题就做完了。时间复杂度 $O(|k|(\\sqrt k + |k| + n))$。\n\n{% endfolding %}\n\n[我的代码](https://atcoder.jp/contests/abc423/submissions/69364596)写得有点丑，~~并且写的时候也对照了官方题解代码~~，所以建议直接去学习[官方题解代码](https://atcoder.jp/contests/abc423/editorial/13874)。我的代码与官方题解代码实现上唯一的区别是我用了扩欧求解线性同余方程，而官方题解代码用了欧拉定理。","tags":["构造","数论"],"categories":["OI","题解"]},{"title":"[ABC423F] Loud Cicada 题解","url":"/article/ABC423F-Loud-Cicada-题解/","content":"\n{% folding title=\"赛时\" class=\"blue\" %}\n\n看到这个题先乱写了一个状压，发现显然没有正确性，然后开始乱推容斥，后面发现自己想复杂了，想到了本文的做法，但是因为太慌了在一直在乱写，调半天没过样例，最后在 85 分钟才做出来，菜死了。\n\n{% endfolding %}\n\n看到 $n \\le 20$ 显然状压。首先容易想到设 $f_i$ 表示**一定出现**的蝉种类形成的集合为 $i$ 的年份数量（没有被选中的蝉**不一定出现**），$g_i$ 表示**出现**的蝉种类形成的集合为 $i$ 时的年份数量（没有被选中的蝉**一定不出现**），$l_i$ 表示**出现**的蝉种类形成的集合为 $i$ 时，每种蝉出现年份的最小倍数，显然有 $f_i = \\lfloor \\frac{y}{l_i} \\rfloor$。若精细实现（$l_i$ 由 $l_{i \\oplus lowbit(i)}$ 转移而来），可以做到 $O(2^n)$ 计算 $f_i$ 与 $l_i$（忽略 $\\gcd$ 的时间复杂度）。\n\n然而，我们要求的是 $g_i$。容易发现，有 $f_i = \\sum_{i \\subseteq j} g_j$，即 $g_i = f_i - \\sum_{i \\subset j} g_j$。于是考虑倒序枚举 $i$，再枚举满足 $i \\subset j$ 的 $j$ 进行转移，可是这样是 $O(3^n)$ 的，显然不行。不过这个时候你发现，这一部分可以用 [[ARC205E] Subset Product Problem](https://www.luogu.com.cn/problem/AT_arc205_e) 里教的 trick 解决，这里不再详细展开。于是这道题就做完了。\n\n但是这个东西的时间复杂度是多少呢？如果我们固定 $i$ 的前 $\\frac n 2$ 位，枚举后 $\\frac n 2$ 位的子集，此时的时间复杂度是 $O(3^{\\frac n 2})$。而 $i$ 的前 $\\frac n 2$ 一共有 $2^{\\frac n 2}$ 种情况，所以时间复杂度是 $O(6^{\\frac n 2})$。再加上计算 $f_i$ 与 $l_i$，总时间复杂度是 $O(2^n + 6^{\\frac n 2})$。状压本身常数小，所以跑起来并不是很卡。\n\n[赛时提交记录](https://atcoder.jp/contests/abc423/submissions/69343283)，没有精细实现，时间复杂度 $O(n2^n + 6^{\\frac n 2})$。\n\n{% folding title=\"关于官方题解\" class=\"blue\" %}\n\n官方题解与本文的区别在于计算 $g_i$ 的方式不同。官方题解中，定义「一致条件 $S$」表示 $S$ 中的蝉**出现**（没有被选中的蝉**一定不出现**），「部分条件 $S$」 表示 $S$ 中的蝉**一定出现**（没有被选中的蝉**不一定出现**）。它是这样计算 $g_i$ 的（机翻）：\n\n> 一旦求出满足各个部分条件的元素个数，通过应用零变换的逆变换（也称为梅比乌斯变换），就可以得到满足各个一致条件的元素个数，从而得到答案。简单来说，就是「对于条件 $1, \\dots, k$ 使用一致条件，对于条件 $k + 1, \\dots, n$ 使用部分条件」这样的条件设置方式，并逐步将部分条件中的元素每次增加 $1$ 转换为一致条件进行计算。\n\n时间复杂度 $O(n2^n)$。\n\n{% endfolding %}","tags":["DP","计数","状态压缩 DP"],"categories":["OI","题解"]},{"title":"[ARC205D] Non-Ancestor Matching 题解","url":"/article/ARC205D-Non-Ancestor-Matching-题解/","content":"\n赛时没打这场 **ABC**。\n\n设 $u$ 的重儿子是 $son_u$，以 $u$ 为根的子树为 $tr_u$，$tr_u$ 的大小是 $sz_u$，$tr_u$ 中最多能选出 $dp_u$ 个点对。定义点 $u$ 是好的，当且仅当 $sz_{son_u} \\le \\lfloor \\frac{sz_u - 1}{2} \\rfloor$。接下来分点 $u$ 是不是好的分类讨论：\n\n- 若点 $u$ 是好的：显然有 $dp_u = \\lfloor \\frac{sz_u - 1}{2} \\rfloor$。\n- 若点 $u$ 不是好的：我们尝试让 $u$ 成为好的。具体地，我们可以在 $tr_{son_u}$ 中先选取一些点对，并且从 $tr_{son_u}$ 中删去这些点，使得 $sz_{son_u}$ 减小，从而使点 $u$ 成为好的。在 $tr_{son_u}$ 中最多可以选取 $dp_{son_u}$ 个点对，所以 $sz_{son_u}'$ 的最小值是 $sz_{son_u} - 2dp_{son_u}$。若 $(sz_ {son_ u}')_ {\\min} \\le sz_ u - 1 - sz_ {son_ u}$，则说明我们可以让 $u$ 成为好的，$dp_u = \\lfloor \\frac{sz_u - 1}{2} \\rfloor$；否则 $dp_u = dp_{son_u} + (sz_u - 1 - sz_{son_u})$，含义显然。\n\n答案是 $dp_1$，时间复杂度 $O(n)$。\n\n[提交记录](https://atcoder.jp/contests/arc205/submissions/69157362)。","tags":["DP"],"categories":["OI","题解"]},{"title":"[AT TTPC2015 O] 数列色ぬり 题解","url":"/article/AT-TTPC2015-O-数列色ぬり-题解/","content":"\n{% folding title=\"鲜花\" class=\"blue\" %}\n\nMX NOIP 模拟赛 T3，补题时只找到了一篇 [十年前的日文题解](https://kmjp.hatenablog.jp/entry/2015/09/30/0930)，并且目前洛谷里这道题唯一一个讨论甚至还是提供翻译，并且也是七年前的了。这题真冷门。\n\n{% endfolding %}\n\n下文中，最长上升子序列简写为 LIS，最长下降子序列简写为 LDS。\n\n注意到红色的元素构成了一个单调递增的子序列 $p$，蓝色的元素构成了一个单调递减的子序列 $q$。在最优情况下，若 $p$ 恰好是 LIS，且 $q$ 恰好是 LDS，那么答案为 $|LIS| + |LDS|$；否则，一定是 LIS 与 LDS 共享了一个元素，此时答案为 $|LIS| + |LDS| - 1$。\n\n所以答案一定是 $|LIS| + |LDS| - 1$ 与 $|LIS| + |LDS|$ 中的一个。于是我们只需要找到：是否存在一组 LIS 与 LDS，使得它们的交集为空。若存在，则答案为 $|LIS| + |LDS|$，否则答案为 $|LIS| + |LDS| - 1$。\n\n直接判断是否存在有些困难，正难则反，考虑计算出一共有多少组 LIS 与 LDS，其中又有多少组 LIS 与 LDS，使得它们的交集不为空。如果每组 LIS 与 LDS 的交集都不为空，则说明不存在一组 LIS 与 LDS 交集为空，否则存在。\n\n计算一共有多少组 LIS 与 LDS 是容易的，将 LIS 的数量与 LDS 的数量相乘即可。要计算交集不为空的 LIS 与 LDS 数量，枚举交集即可。具体地：\n\n$$\n\\sum_{i = 1}^n (包含\\ a_i\\ 的\\ LIS\\ 的数量) \\times (包含\\ a_i\\ 的\\ LDS\\ 的数量)\n$$\n\n如果上式等于 LIS 的数量与 LDS 的数量的乘积，则说明不存在一组 LIS 与 LDS 使得它们的交集为空，答案为 $|LIS| + |LDS| - 1$，否则存在，答案为 $|LIS| + |LDS|$。具体的计算过程可以通过权值线段树实现，这里不再展开。\n\n代码实现上，计算方案数时需要取模，也许是数据不强，单模也可以过。\n\n```cpp\n#include <bits/stdc++.h>\n#define rep(i, s, e) for (int i = s; i <= e; ++i)\n#define _rep(i, s, e) for (int i = s; i >= e; --i)\n#define int long long\n#define pii pair<int, int>\nusing namespace std;\n\nconstexpr int mod = 998244353;\n\nstruct Segtree {\n    pii tr[400005];\n\n    inline pii upd(pii a, pii b) {\n        if (a.first < b.first) swap(a, b);\n        if (a.first == b.first) (a.second += b.second) %= mod;\n        return a;\n    }\n\n    inline void build(int l, int r, int p) {\n        tr[p] = {0, 0};\n        if (l == r) return;\n        int mid = (l + r) >> 1;\n        build(l, mid, p << 1);\n        build(mid + 1, r, p << 1 | 1);\n    }\n\n    inline void update(int l, int r, int p, int s, pii d) {\n        if (l == r) {\n            tr[p] = d;\n            return;\n        }\n        int mid = (l + r) >> 1;\n        if (s <= mid) update(l, mid, p << 1, s, d);\n        else update(mid + 1, r, p << 1 | 1, s, d);\n        tr[p] = upd(tr[p << 1], tr[p << 1 | 1]);\n    }\n\n    inline pii query(int l, int r, int p, int s, int t) {\n        if (s > t) return {0, 0};\n        if (s <= l && r <= t) return tr[p];\n        int mid = (l + r) >> 1;\n        pii ans = {0, 0};\n        if (s <= mid) ans = upd(ans, query(l, mid, p << 1, s, t));\n        if (t > mid) ans = upd(ans, query(mid + 1, r, p << 1 | 1, s, t));\n        return ans;\n    }\n} tr;\n\nint n, a[100005];\nint li[100005], ld[100005], ri[100005], rd[100005], len[100005];\nint lis, lds, tot, sum;\npii tmp;\n\n/*\nli[i] : 1 -> i 的 LIS 长度\nld[i] : 1 -> i 的 LDS 长度\nri[i] : n -> i 的 LIS 长度\nrd[i] : n -> i 的 LDS 长度\nlen[i] : 经过 a[i] 的 LIS / LDS 长度\nlis : LIS 总长度\nlds : LDS 总长度\ntot : (LIS, LDS) 总数\nsum : 交集不为空的 (LIS, LDS) 数量\n*/\n\nsigned main() {\n    scanf(\"%lld\", &n);\n    rep(i, 1, n) scanf(\"%lld\", &a[i]);\n\n    // 计算 li[i]\n    tr.build(1, n, 1);\n    rep(i, 1, n) {\n        tmp = tr.query(1, n, 1, 1, a[i] - 1);\n        (tmp.second += !tmp.first) %= mod;\n        ++tmp.first;\n        tr.update(1, n, 1, a[i], tmp);\n        len[i] = tmp.first;\n        li[i] = tmp.second;\n    }\n    tmp = tr.query(1, n, 1, 1, n);\n    lis = tmp.first;\n    tot = tmp.second;\n\n    // 计算 rd[i]\n    tr.build(1, n, 1);\n    _rep(i, n, 1) {\n        tmp = tr.query(1, n, 1, a[i] + 1, n);\n        (tmp.second += !tmp.first) %= mod;\n        ++tmp.first;\n        tr.update(1, n, 1, a[i], tmp);\n        len[i] += tmp.first - 1;\n        rd[i] = tmp.second;\n    }\n\n    rep(i, 1, n) {\n        if (len[i] != lis) {\n            li[i] = rd[i] = 0;\n        }\n    }\n\n    // 计算 ld[i]\n    tr.build(1, n, 1);\n    rep(i, 1, n) {\n        tmp = tr.query(1, n, 1, a[i] + 1, n);\n        (tmp.second += !tmp.first) %= mod;\n        ++tmp.first;\n        tr.update(1, n, 1, a[i], tmp);\n        len[i] = tmp.first;\n        ld[i] = tmp.second;\n    }\n    tmp = tr.query(1, n, 1, 1, n);\n    lds = tmp.first;\n    (tot *= tmp.second) %= mod;\n\n    // 计算 ri[i]\n    tr.build(1, n, 1);\n    _rep(i, n, 1) {\n        tmp = tr.query(1, n, 1, 1, a[i] - 1);\n        (tmp.second += !tmp.first) %= mod;\n        ++tmp.first;\n        tr.update(1, n, 1, a[i], tmp);\n        len[i] += tmp.first - 1;\n        ri[i] = tmp.second;\n    }\n\n    rep(i, 1, n) {\n        if (len[i] != lds) {\n            ld[i] = ri[i] = 0;\n        }\n    }\n\n    // 计算 sum\n    rep(i, 1, n) {\n        (sum += li[i] * ld[i] % mod * ri[i] % mod * rd[i] % mod) %= mod;\n    }\n\n    printf(\"%lld\\n\", lis + lds - (tot == sum));\n    return 0;\n}\n```","tags":["数据结构","计数"],"categories":["OI","题解"]},{"title":"2025 年 9 月日祭","url":"/article/diary/2025/09/","content":"\n{% folding title=\"鲜花&nbsp;(2025.9.1)\" class=blue %}\n\n注意到我停课了。\n\n另外注意到我今天上午做了三道题，下午也许是在尝试改上一场 CF 的 Div. 1 E，顺便学习了一下反射容斥。学了之后发现改不出来，于是放弃了，并开始补日祭。总之就是下午一道题都没做？啊？什么效率？但是我不是挺认真的吗？啊？\n\n{% endfolding %}\n\n### MX NOIP 3\n\n[Link](https://www.mxoj.net/contest/detail?id=188)\n\n- A - [Novelist](https://atcoder.jp/contests/qupc2018/tasks/qupc2018_d)\n\n  略。\n\n- B - [Bicycle Tour](https://www.acmicpc.net/problem/26851)\n\n  根据部分分容易想到从小到大一条条加边，并在形成环时做一个链上的 to min。于是先建出原图的最小生成树，然后树剖即可。\n\n- C - [数列色ぬり](https://www.luogu.com.cn/problem/AT_ttpc2015_o)\n\n  [题解](/article/AT-TTPC2015-O-数列色ぬり-题解/)。\n\n- D - [DequeQL](https://codeforces.com/gym/104879/problem/E)\n\n  改不动。\n\n### 多校杂题选讲 20250905\n\n[Link](https://vjudge.net/contest/744791)\n\n- A - [[NOISG 2025 Prelim] Itinerary](https://www.luogu.com.cn/problem/P12195)\n\n  考虑直接把 $s$ 的路径描到树上，计算每一条边会被经过几次，这一步可以用树上差分解决。接下来，若 $i$ 是起点，我们只用关注 $i$ 到 $s_1$ 的路径，如果在 $s$ 的基础上加上这一条路径，每条边的经过次数依然 $\\le 2$ 则合法。实现上，从 $s_1$ 开始 dfs，记录 $s_1$ 到每个点的路径上的每条边的经过次数的最大值即可。\n\n- B - [[USACO24DEC] 2D Conveyer Belt S](https://www.luogu.com.cn/problem/P11454)\n\n  考虑哪些位置是不合法的，显然是环形传送带及其内部。环形传送带是容易找的，但是内部并不好找。于是正难则反，考虑从边缘开始洪水填充，能走到的位置就是合法的位置，剩下的就是不合法的位置。不过对于每个询问都搜索一遍显然会挂，所以考虑倒着处理询问，每次删掉一个传送带，若当前位置原本不合法但四连通有合法的位置，那么从当前位置再次开始洪水填充即可。\n\n- C - [[NOISG 2025 Finals] 机器人](https://www.luogu.com.cn/problem/P12018)\n\n  首先有结论，若机器人 $l$ 与机器人 $r$ 最终停在第 $x$ 行，那么区间 $[l, r]$ 的机器人一定都可以停在第 $x$ 行，因为机器人 $l$ 到第 $x$ 行的过程中一定会经过第 $l + 1$ 到第 $x - 1$ 行，$r$ 同理。所以可以停在第 $x$ 行的机器人一定是连续的一个区间。于是考虑对于每个 $i$，求出可以到达第 $i$ 行的机器人的区间，于是问题就转化为了用最少的给定区间覆盖询问区间，这个问题可以用 ST 表实现。具体地，设 $st_{i, j}$ 表示从 $i$ 开始，使用 $2^j$ 个区间，能达到的最右侧的位置。\n\n- D - [[NOISG 2023 Finals] Curtains](https://www.luogu.com.cn/problem/P11536)\n\n  将询问 $[L, R]$ 转化为，判断是否有 $[L, R] = \\bigcup_{L \\le l_i \\le r_i \\le R} [l_i, r_i]$。考虑先离线下来并且按 $r_i$ 排序，这样就少了一个限制。考虑使用线段树维护从每个位置 $i$ 能够完整覆盖到的最右侧的位置 $pos_i$，那么回答询问就变为了单点查询，增加幕布 $[L, R]$ 是对于 $[1, L]$ 区间修改。具体地，对于所有 $pos_i \\ge L - 1$ 的位置 $i$，执行 $pos_i \\leftarrow R$。发现这个操作难以实现，但是发现多个这样的操作可以合并（具体过程略），所以使用一棵维护 lz tag 的线段树即可。\n\n- E - [From the Unknown (Hard Version)](https://codeforces.com/contest/2135/problem/D2)\n\n  略。\n\n- G - [[HEOI2013] SAO](https://www.luogu.com.cn/problem/P4099)\n\n  好神秘的树形 DP。设 $dp_{u, i}$ 表示考虑到 $u$ 子树，且 $u$ 在子树中的拓扑序为 $i$ 时的方案数。转移时根据 $u, v$ 关系分讨，再推推式子就可以得到一个 $O(n^3)$ 的 DP，然后发现可以前缀和优化，就变成 $O(n^2)$ 的了。\n\n- H - [Range Reachability Query](https://acm.hdu.edu.cn/showproblem.php?pid=7171)\n\n  发现问题类似于传递闭包，并且似乎也只能用类似于传递闭包的做法解决。不过先考虑暴力，显然是从 $u$ 开始 bfs，发现这样反复 bfs 太浪费了，于是考虑用一次 bfs 解决所有问题。设 $dp_{i, j}$ 表示对于点 $i$，$u_j$ 能否通过 $[l_j, r_j]$ 的边到达它，这显然可以用 bitset 维护，考虑转移，发现还需要定义辅助数组 $f_{i, j}$ 表示边 $i$ 是否属于 $[l_j, r_j]$，它同样可以用 bitset 维护，并且可以通过差分预处理。此时对于边 $\\displaystyle u \\mathop{\\to}^{id} v$ 就有 $dp _ v \\mid = dp _ u \\\\& f _ {id}$。时间复杂度 $O(\\frac{(n + m)q}{w})$，空间复杂度 $O(\\frac{(n + m)q}{w})$，后者无法接受。于是考虑把 $q$ 个询问分 $T$ 次处理（或每次固定处理 $k$ 个询问），理论上时间复杂度不变，只是增加了一些常数，并且空间复杂度变为了原来的 $\\frac 1 T$。$T$ 取一个小常数即可。\n\n### MX NOIP 4\n\n[Link](https://www.mxoj.net/contest/detail?id=192)\n\n炼屎计划。\n\n- A - xorseg\n\n  被 Ad-hoc 了一会儿，原因是认为满足第二个条件的区间数量是 $O(n^2)$ 级别的，后来才反应过来应该是 $O(n)$ 或者 $O(n \\log n)$ 级别的，具体的也没证。\n\n- B - heap\n\n  什么屎题，手写堆。\n\n- C - toptrees\n\n  什么唐题（虽然我更唐，赛时没写出来），直接回退背包即可。\n\n- D - lca\n\n  什么不可做题，不会。\n\n### 多校联考 20250906\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0765)\n\n- A - string\n\n  唐题。\n\n- B - ball\n\n  我好唐。发现计算答案时 $a_i$ 需要升序，但是乱序时严格更劣，所以考虑 DP，设 $dp_{i, st}$ 表示考虑了 $[1, i]$，当前已选的数组成的集合是 $st$ 的最大美观度，转移是容易的，但是需要高精度。\n\n- C - tree\n\n  我好唐，65 分部分分都不会写。显然合法的连通块需要满足大小是偶数并且每种权值出现次数不超过一半，后者转化一下就是众数出现次数不超过一半。设权值 $i$ 出现了 $cnt_i$ 次。考虑枚举众数 $x$，并将众数的权值设为 $1$，其余的数的权值设为 $-1$，那么上述条件就又转化为了连通块的权值和应该为非正偶数，这容易用树形 DP 做出来。可是发现直接这样统计是没有正确性的，因为当枚举的众数并不是实际的众数时，连通块的权值也可能是非正偶数。于是考虑反过来，先计算大小是偶数的连通块个数，再减去其中众数出现次数超过一半的连通块个数，即权值和为正偶数的连通块个数，这样才有了正确性。又发现树形 DP 的第二维只用取到 $[-cnt_x, cnt_x]$，所以时间复杂度是 $O(n^2)$ 的。\n\n{% folding title=\"鲜花&nbsp;(2025.9.7)\" class=blue %}\n\n虽然前几天看着还有那么多日祭没写，但其实一写起来还是挺快的。（这句话好人机，好唐，但是不管了。）\n\n另外把一个月的日祭写在一起不就不叫日祭了么，应该叫月祭（？）。\n\n{% endfolding %}\n\n### Atcoder Regular Contest 205 (Div. 2)\n\n[Link](https://atcoder.jp/contests/arc205)\n\n- D - Non-Ancestor Matching\n\n  [Solution](/article/ARC205D-Non-Ancestor-Matching-题解/)。\n\n- E - Subset Product Problem\n\n  好妙的一道题。如果直接用桶统计有着优秀的 $O(nV)$ 的时间复杂度。考虑优化。首先把 $a_i$ 写成 $p_i \\ll 10 \\mid q_i$ 的形式，使得 $p_i, q_i$ 都是 10 位整数。接下来，设 $cnt_{x, y}$，其中 $x, y$ 都是 10 位整数，表示 $\\sum_{i = 1}^k [p_i \\subseteq x \\land q_i = y]$，那么答案就是 $\\sum_{y = 1}^{2^{10} - 1} [y \\subseteq q_k] \\cdot cnt_{p_k, y}$。代码极其好写，时间复杂度 $O(n \\sqrt V)$。\n\n### Atcoder Beginner Contest 422\n\n[Link](https://atcoder.jp/contests/abc422)\n\n- F - Eat and Ride\n\n  我好唐，只想出了一个伪的做法。容易想到拆贡献，那么设 $dp_{i, j}$ 表示从 $1$ 走到了 $i$，还剩 $j$ 步没走的最小花费，转移显然，答案是 $dp_{i, 0}$。\n\n- G - Balls and Boxes\n\n  问题一原来就是背包啊，有点难绷，自己只想到了扩欧。\n\n  你说得对，问题二是生成函数，但是根号分治是个好东西。\n\n  考虑暴力，枚举 $x, y$，计算 $\\sum \\frac{n!}{x!y!z!}$，时间复杂度 $O(\\frac{n^2}{xy})$，支持 $xy \\ge \\sqrt n$。于是现在需要一种 $O(nxy)$ 的暴力。设 $dp_{i, j, k}$ 表示 $x + y + z = i, x \\equiv j \\pmod a, y \\equiv k \\pmod b$ 的方案数，直接转移即可，支持 $xy \\le \\sqrt n$。\n\n### Codeforces Round 1047 (Div. 3)\n\n[Link](https://codeforces.com/contest/2137)\n\n- G - Cry Me a River\n\n  设 $n, m, q$ 同阶。首先容易写出 $O(n)$ 的简单 DP。容易发现，如果 A 或 B 从某个点开始游戏，最终会来到一个红色点，那么我们可以认为当前点在 A 或 B 操作的时候也是红色的。将一个点染红之后，我们并不用全部重新 DP，只需要考虑它对入边的影响，如果有新的点被染红，那么再递归考虑它的影响即可。发现每个点在每种状态下只会被染红一次，所以时间复杂度 $O(n)$。\n\n\n### 多校杂题选讲 20250912\n\n[Link](https://vjudge.net/contest/745597)\n\n- A - [Towers](https://codeforces.com/problemset/problem/1637/F)\n\n  容易想到把最高的节点作为根，那么有权值的位置一定是叶子，且有两个叶子的权值恰好等于高度的最大值。对于每个子树，一定存在一个权值为最大值的节点不在这个子树内，所以我们只需要这个子树内存在一个叶子节点的权值大于等于这个子树内高度的最大值即可。选择权值大于等于这个子树内高度的叶子节点时，贪心地选择当前权值最大的叶子节点即可。对于根也类似，只需要选择前两大的叶子节点，将它们的权值设为高度最大值即可。\n\n- B - [Fairy](https://codeforces.com/problemset/problem/19/E)\n\n  见 [電圧](https://atcoder.jp/contests/joisc2014/tasks/joisc2014_j)。\n\n- C - [Flip Row or Col 2](https://atcoder.jp/contests/arc199/tasks/arc199_a)\n\n  才做完就升紫了。因为这题自己写得完全没有题解清楚，并且也达不到总结的目的，所以就不记了。\n\n- D - [01 on Tree](https://atcoder.jp/contests/agc023/tasks/agc023_f)\n\n  神秘贪心。容易发现，如果我们选了一个点，那么会贪心地把它孩子中所有的 $0$ 选完，这样一定不劣。那么就可以理解为这些孩子与父亲“捆绑”在一起，形成了一个连通块。那么同理，我们可以用并查集维护当前的连通块，并且把所有连通块放进优先队列中，如果交换两项顺序之后逆序对个数更少则贪心地交换，这么做是有正确性的。每次取出最靠前的连通块并与父亲合并，边合并边计算贡献，直到只剩一个连通块。做完后答案就算出来了。\n\n- E - [Wine Thief](https://atcoder.jp/contests/arc120/tasks/arc120_f)\n\n  发现直接拆贡献不好做，考虑其他做法。发现链上的独立集没什么有用的性质，然而如果是在环上，每个点的贡献次数都是相同的。于是先假定此时是在环上，但是发现会算漏 $a_1$ 与 $a_n$ 都被选的情况。为了补上这种情况，钦定 $a_1, a_n$ 被选，那么此时要在 $[3, n - 2]$ 里面选 $k - 2$ 个，加上对应的贡献，再递归解决子问题即可。\n\n- F - [Interesting Problem (Hard Version)](https://codeforces.com/problemset/problem/1987/F2)\n\n  困难的题目。同样感觉记起来没什么用，也写不清楚，所以就不记了。\n\n- G - [Family Photos](https://codeforces.com/problemset/problem/725/F)\n\n  不想记。\n\n### Codeforces Round 1048 (Div. 2)\n\n[Link](https://codeforces.com/contest/2139)\n\n第一次 Div. 2 打进第一页，虽然是 VP，而且这场 unrated。\n\n- C - Cake Assignment\n\n  想到了 [SGU 126](https://codeforces.com/problemsets/acmsguru/problem/99999/126)。这道题正难则反。\n\n- D - Antiamuny Wants to Learn Swap\n\n  似乎有线性做法，但是不管了，线段树和 ST 表一样草过去。发现一个序列是好的的充要条件是不存在长度为 $3$ 的下降子序列，那么记 $dp_{i, j} (j \\in \\{1, 2, 3\\})$ 表示以 $a_i$ 结尾，长度为 $j$ 的子序列中，子序列的第一个数的下标的最大值，这个显然可以用线段树维护。然后再用 ST 表维护一下 $dp_{i, 3}$ 的区间最大值即可。\n\n- E1 & E2 - Maple and Tree Beauty\n\n  我好菜，花了 80min+。首先想到答案不会超过所有叶子深度的最小值 $mn$，然后考虑如何让答案达到 $mn$。赛时一开始认为答案总是取每个叶子的名字的一段前缀与一段后缀，后来手模 $\\inf$ 组样例又吃了一发罚时之后才发现只取前缀。那么，我们只需要考虑深度 $\\le mn$ 的节点，并把其中深度相同的节点涂成一种颜色即可，其余节点可以任意涂色。正确性显然，因为如果匹配的位置越深，需要涂色的节点数严格不降。最后，还要判断能否将 $mn$ 层分为黑白两色，这一步可以通过 bitset 优化背包 DP 实现。时间复杂度 $O(\\frac{n^2}{w})$。如果用根号分治可以再优化到 $O(\\frac{n \\sqrt n}{w})$。\n\n### MX NOIP 5\n\n[Link](https://www.mxoj.net/contest/detail?id=193)\n\n这场是我考成屎了，甚至还垫底了。\n\n- A - 阿蛮\n\n  在 NOIP T1 放样例极弱的概期 DP 的出题人，愿你们的母亲的天堂相遇。\n\n  赛时爆零了。因为赛后没有立即发题解，所以甚至还是 GPT-5 给我讲的。\n\n  首先发现题目里面给的带权随机数其实是诈骗，因为当确定了新来的人数 $i$ 与舞娘获得的总票数 $j$，是容易求出这种情况的概率的（用其他 $n - 1$ 个舞者分得 $i - j + 1$ 个观众的方案数除以 $n$ 个舞者分得 $i$ 个观众的方案数）。设 $f_{i, j}$ 表示新来的人数为 $i$，舞娘获得了 $j$ 票时的加分，$g_{i, j}$ 表示概率，那么现在只需要求出 $\\sum_{i, j}^{\\text{cond}} f_{i, j} \\cdot g_{i, j}$ 即可。直接计算是 $O(n^2)$ 的，但是通过一些组合恒等式就可以将其优化到 $O(n)$。\n\n- B - 菟园 & [[HNOI2010] 弹飞绵羊](https://www.luogu.com.cn/problem/P3203)\n\n  自从之前有一次把 LCP 当成 KMP 写之后就感觉终于完全理解了 KMP 与 fail 指针等内容。\n\n  容易想到建出 fail 树，那么问题就转化为了在树上支持某点到根路  径修改与单点查询，类似与弹飞绵羊，所以下文介绍弹飞绵羊的做法。\n\n  看起来平衡树与 LCT 这些数据结构的学习成本都挺高的，确实像牢祝说的那样，这些问题都可以用线段树或者暴力数据结构解决。\n\n  对于弹飞绵羊，暴力的做法是 $O(1)$ 修改 $O(n)$ 查询。考虑均摊一下，将 $n$ 个数分为 $B$ 个块，记 $to_i$ 表示从 $i$ 开始跳父亲，跳到的第一个块外的节点，$dis_i$ 表示跳的次数。这样，对于修改，我们只需要对块内节点进行更新，时间复杂度 $O(\\frac n B)$；对于查询，我们只需要一个块一个块地跳，时间复杂度 $O(B)$。显然当 $B$ 取 $O(\\sqrt n)$ 时最优。时间复杂度 $O(n \\sqrt n)$\n\n### Codeforces Round 1049 (Div. 2)\n\n[Link](https://codeforces.com/contest/2140)\n\n- D - A Cruel Segment's Thesis\n\n  考虑 $n$ 是偶数的情况。拆一下贡献，答案就是 $\\sum_{i \\in A} r_i - \\sum_{i \\in B} l_i$，其中 $|A| = |B| = \\frac{n}{2}, |A \\cup B| = n$，再拆一下贡献就变成了 $\\sum_{i = 1}^n r_i - \\sum_{i \\in B} (l_i + r_i)$。于是按 $l_i + r_i$ 排序取较小的一半即可。若 $n$ 是奇数，那么枚举那个区间不选即可。\n\n- E - Prime Gaming\n\n  好题，但是难绷。考虑 $m = 2$ 的 ez version，发现是容易做的。然后考虑重新定义状态，钦定一个阈值 $i$，让状态中的 $0$ 表示 $\\lt i$ 的数，$1$ 表示 $\\ge i$ 的数。这样，对于一个状态 $st$，它可以表示的序列数量就是 $(i - 1)^{n - \\mathrm{popcount}(st)} \\cdot (m + 1 - i)^{\\mathrm{popcount}(st)}$，那么答案 $\\ge i$ 的序列的个数 $f_i$ 就应该是 $\\sum_{st} (i - 1)^{n - \\mathrm{popcount}(st)} \\cdot (m + 1 - i)^{\\mathrm{popcount}(st)} \\cdot dp_{st}$。可以把 $st$ 按照 $\\mathrm{popcount}(st)$ 归类，即设 $sm_i = \\sum_{\\mathrm{popcount}(st) = i} dp_{st}$，这样就可以 $O(nm)$ 计算 $f_i$ 了。答案即为 $\\sum_{i = 1}^m f_i$。时间复杂度 $O(nk2^n + nm)$，前半部分有小常数。\n\n### MX NOIP 6\n\n[Link](https://www.mxoj.net/contest/detail?id=194)\n\n- A - 句法分析\n\n  唐题。\n\n- B - 树上前 k 大菊花\n\n  目前见过的题中，极多个物品中选前 $k$ 大 / 小的题其实做法挺单一的。容易想到把每个点作为中心，先让菊花的权值取到最大值，并放到优先队列中，然后再将权值调小，把新的菊花放进放进优先队列中，直到取了 $k$ 个即可。\n\n- C - 相关聚类\n\n  根据特殊性质并观察样例发现是偏结论类型的题，并且如果是树形（基环树）DP 显然不可能做到 $O(n)$。手模几个样例就发现只需要计算出环的大小与环上 $-$ 的数量，根据 $-$ 的数量分讨一下即可。\n\n### 多校联考 20250915\n\n[Link](https://local.cwoi.com.cn:8443/contest/C0766)\n\n明明就是没什么辨识度好不好，考了个 CW rk 2 还被表扬了。\n\n- C - 发喷山火（[CF2119F](https://codeforces.com/problemset/problem/2119/F) 加强版）\n\n  对于原题：容易观察到路径结构如下：从 $st$ 出发，先经过若干个 ``1 -1`` 到达一个 ``1 1``，在获得了足够的生命之后再前往某一个终点。赛时没写出 50pts 是因为没有发现：在全程中就算存在多个 ``1 1``，都只会在第一个 ``1 1`` 获取到足够的生命。（话说要是发现了这个点，赛时还写出了 50pts，那场切黑也是很难绷了。）根据这几点，我们可以先处理出每个点经过若干个 ``1 -1`` 能够到达的最近的 ``1 1``，这可以用多源 bfs。接下来，我们可以从 $st$ 开始 dfs，再传一些神秘的参数，就做完了。\n\n- D - 走路赚钱（[JOISC2019E](https://atcoder.jp/contests/joisc2019/tasks/joisc2019_e) 弱化版）\n\n  对于弱化版：把条件转化一下可以变成当 $x = i$ 时，若 $y \\le$ 或 $\\ge k$，可以获得 $w$ 的价值。离散化过后用扫描线维护一下即可。\n\n### Atcoder Beginner Contest 423\n\n[Link](https://atcoder.jp/contests/abc423)\n\n质量场。\n\n- F - Loud Cicada\n\n  主打一个现学现用。[Solution](/article/ABC423F-Loud-Cicada-题解/)。\n\n- G - Small Multiple 2\n\n  [Solution](/article/ABC423G-Small-Multiple-2-题解/)。\n\n### Edu Codeforces Round 182 (Rated for Div. 2)\n\n[Link](https://codeforces.com/contest/2144)\n\n被降智了呜呜呜。/dk /dk /dk\n\n- D - Price Tags\n\n  一眼极其数论分块，然后无脑写了之后被卡了。后来才发现是想复杂了，根本不用对于 $a_i$ 去更新 $\\lceil \\frac{a_i}{x} \\rceil$，直接拿 $\\lceil \\frac{a_i}{x} \\rceil$ 找对应的 $a_i$ 即可。这题显然是不难的，主要是有些诈骗。\n\n- E - Looking at Towers\n\n  思维为零的数据结构题。容易写出一个 $O(n^2)$ DP，然后发现可以用加乘线段树优化，然后就做完了。\n\n### MX NOIP 7\n\n[Link](https://www.mxoj.net/contest/detail?id=195)\n\n- A - 地球往事（[[Gym105170E] Connected Components](https://codeforces.com/gym/105170/problem/E)）\n\n  唐题。\n\n- B - 纪元（[[Gym104976E] Period of a String](https://codeforces.com/gym/104976/problem/E)）\n\n  挺有趣的一道题。考虑 $s_i$ 与 $s_{i + 1}$ 两个串，发现 $s_{i + 1}$ 对 $s_i$ 有一些限制，每个限制形如：$s_i$ 的前 $j$ 位形成的可重字符集是 $U$。那么同理，$s_{i + 1}$ 本身也有一些限制，发现 $s_{i + 1}$ 的限制是可以与 $s_{i + 1}$ 对 $s_i$ 的限制，合并形成对 $s_i$ 的限制的。所以倒序维护当前的每一条限制，根据限制判断是否有解；若有解，再根据限制构造出 $s_1$，便可以推出所有 $s_i$ 的值。\n\n- C - 黑暗森林（[[Gym105170A] Eminor Array](https://codeforces.com/gym/105170/problem/A)）\n\n  赛时找规律过了？（~~实则是很没素质地用了 oeis。~~）发现答案是：\n\n  $$\n  \\frac{\\sum_{i = 1}^n (2^{2^i} - 1)}{3}\n  $$\n\n- D - 死神永生\n\n  原来我在 7 月 10 日并没有意识到我在那一天算是学会了虚树。\n\n  题目要求是「到每个点距离的最大值最小的点」，发现离一个点最远的点一定是直径的一个端点，而满足条件的点就一定是直径上的一个点。\n\n  于是这道题就做完了。用线段树动态维护虚树的直径即可。时间复杂度 $O(n \\log n)$。\n\n### Codeforces Round 1051 (Div. 2)\n\n[Link](https://codeforces.com/contest/2143)\n\n难绷主要难绷在我每次在晚上打 CF 都要慌，而太慌了导致 D 没切出来，放弃 D 去看 E 的时候也许 20min 就秒了？具体时长记不到了。\n\n- D1 & D2 - Inversion Graph Coloring\n\n  实则挺唐的。设 $dp_{i, j, k}$ 表示选了 $[1, i]$，其中的最大值是 $j$，最大的满足 $p \\lt q \\le i$ 且 $a_p \\gt a_q$ 的 $a_q$ 是 $k$ 的方案数。转移显然，时间复杂度 $O(n^3)$。用树状数组维护 $dp_{i, j, ?}$ 与 $dp_{i, ?, k}$ 即可优化到 $O(n^2 \\log n)$。赛后补题的时候因为初始化漏了一点导致调了 inf 久。/dk\n\n- E - Make Good\n\n  比较一眼的题，与这道题类似的题还有 [[ARC203B] Swap If Equal Sum](https://www.luogu.com.cn/problem/AT_arc203_b)。对于一些通过若干次可逆的操作将初始状态变为目标状态的题，容易想到先将初始状态变为一个相对规则的状态，再变为目标状态。对于本题，容易想到尽量把 `)` 都变成 `(`，但是如果只是将 `))` 变为 `((`，那么还会留下一些单独的 `)`。观察操作的性质，发现我们可以交换 $s_{i}$ 与 $s_{i + 2}$，而这样交换是不会改变下标的奇偶性的。于是考虑把奇数位置上的 `)` 与偶数位置上的 `)` 匹配并变成 `((`，此时剩下的 `)` 的下标的奇偶性一定相同。接下来，给每个剩下的 `)` 匹配一个 `(`。此时还剩一些 `(`，再翻转一半的 `(` 变成 `)` 并与另一半的 `(` 匹配即可。边做边判断无解即可。一个 Corner Case 是，如果剩下的 `)` 全部在奇数位上，且奇数位上全是 `)`，此时无解。\n\n{% folding title=\"鲜花&nbsp;(2025.9.18)\" class=blue %}\n\n前几天还有十几个 To-Do 现在居然补完了。\n\n~~虽然动用了一些特殊手段。~~（好唐）\n\n虽然今天晚一点又新增了两个 To-Do。\n\n{% endfolding %}\n\n### MX NOIP 8\n\n[Link](https://www.mxoj.net/contest/detail?id=196)\n\n- B - 计树\n\n  赛时写了一个完全没有正确性的 DP。\n\n  发现最后一个节点一定是叶子，那么我们就可以推出倒数第二个节点的几种状态。依此类推，考虑倒着 DP，设 $dp_{i, j, k}$ 表示考虑了 $[i, n]$ 的节点，还缺 $j$ 个父亲与 $k$ 个儿子的方案数，大力分讨转移即可。答案是 $dp_{1, 1, 0}$。\n\n### Atcoder Beginner Contest 424\n\n[Link](https://atcoder.jp/contests/abc424)\n\n- G - Set list\n\n  [Solution](/article/ABC424G-Set-list-题解/)。\n\n### Codeforces Global Round 29 (Div. 1 + Div. 2)\n\n[Link](https://codeforces.com/contest/2147)\n\n- E - Maximum OR Popcount\n\n  显然先把问题转化为达到每个答案至少需要多少次操作。贪心地，我们每次让或和中最后一个 $0$ 变成 $1$。具体地，选择 $n$ 个数中的某一个，使得将这一位变成 $1$ 的代价最小。可是这时，可能低位不再是 $1$。所以对于下一位进行同样的操作，直到后缀变成全 $1$ 即可。\n\n- F - Exchange Queries\n\n  考虑先按 $a_i$ 排序，那么交换 $a_i$ 也可以转化为交换 $b_i$。接下来，我们只需要对 $b_i \\to b_i + 1$ 建边，并用线段树维护 SCC 即可。\n\n### Codeforces Round 1052 (Div. 2)\n\n[Link](https://codeforces.com/contest/2146)\n\n- D1 & D2 - Max Sum OR\n\n  对于 D1，考虑 $n = 2^k - 1$，此时恰好可以两两匹配。那么当 $n \\lt 2^k - 1$ 时，就有一段前缀无法匹配。对于这段前缀解决子问题即可。对于 D2 也类似，两两匹配后解决子问题即可。\n\n- E - Yet Another MEX Problem\n\n  考虑钦定 $\\mathrm{mex}$，那么就可以用一棵线段树来维护对于每个钦定的 $\\mathrm{mex}$，子数组的最大长度，查询就是全局 $\\max$。发现钦定的 $\\mathrm{mex}$ 不是实际 $\\mathrm{mex}$ 时一定不优，所以并不影响。\n\n### 多校杂题选讲 20250926\n\n[Link](https://vjudge.net/contest/749941)\n\n- A - Bit Counting Sequence\n\n  发现 $a_i + 1 - a_{i + 1}$ 即当前的进位位数，根据这一点构造即可。挂了几发一是因为 `__builtin_popcount(unsigned int)`，二是因为左右移负数位是 UB，洛谷评测机上会 TLE。\n\n- B - 一安在？ / Gdzie jest jedynka? 2\n\n  发现 $1$ 的性质不算特殊，最特殊的是 $0$，于是考虑把 $0$ 找出来。考虑对于一个数，询问它与其它每个数的 $\\gcd$，其中的最大值就是它本身，并且能取到最大值的要么是 $0$ 要么是它的倍数。所以我们把 $0$ 和它的倍数再单独拿出来，解决子问题，最后最多会剩下两个数，其中一定有一个是 $0$。再拿这两个数去找到 $1$ 即可。精细实现即可达到题目要求。\n\n- C - 健身房 / Siłownia\n\n  有点难绷的贪心。首先容易想到一个天真的 DP，类似于最小点覆盖。然后你发现这样是错的，因为当存在 $i, j$ 使得 $l_i \\le l_j, r_i = r_j, p_i = p_j$ 时，这样会挂掉。发现我们肯定不能延后选，只能提前选，所以令 $r_i \\leftarrow r_i - 1$ 即可。\n\n- D - Letter Stamper\n\n  也许算是第一道独立做出的紫？虽然得知这是 DP 好像是从讨论区得出的，并且调不出来的时候还看了题解，但是最后没看懂，还是自己调出来了？不管了。[Solution](/article/P13407-GCJ-2010-Finals-Letter-Stamper-题解/)。\n\n- I - Decoration\n\n  题面好唬人的样子，但是其实对这个东西建一个图就是一个基环内向树森林，要求的就是长度为 $k$ 的简单路径的长度的最小值。倍增即可。\n\n### Codeforces Round 1053 (Div. 2)\n\n[Link](https://codeforces.com/contest/2151)\n\n- B - Incremental Path\n\n  不是有点难绷赛时只要不着急，认真手摸一下，几下就做出来了。\n\n- E - Limited Edition Shop\n\n  我写了一个很难写的做法，显然是有更好写的做法的，但是不管了。对物品按 A 的喜好排序，设 $dp_{i, j}$ 表示选了物品 $[1, i]$，B 选到了物品 $j$ 的最大价值，转移是 $dp_{i, j} = \\max(dp_{i - 1, j}, dp_{i, j - 1}) (j \\ge rnk_i), dp_{i, j} = \\max(dp_{i - 1, j} + v_i, dp_{i, j - 1}) (j \\lt rnk_i)$。要用线段树维护，即区间（并且是前缀）加，并取前缀 $\\max$。对于后者，可以用线段树二分与区间覆盖实现。好写的做法的状态定义是一样的，转移略有些不同，但是不管了。写这种数据结构优化 DP 都写烦了。\n\n- F - Attraction Theory\n\n  不错的题。手模一下样例可以发现，如果我们关注位置 $i$ 上最终留下来的人数 $f_i$，那么 $f_i$ 一定是连续的一段有值，并且除两端之外都应该是奇数。直接计算是不好做的，于是我们用与 Wine Thief 类似的 trick，先把尝试问题转化为对称的。考虑枚举区间长度与端点的奇偶性，于是此时就可以钦定端点为奇数，最后再加上常数项即可。通过一些简单的计算可以得到 $f_i$ 的期望与不同的 $f$ 序列的数量，再利用 $a$ 的前缀和与二阶前缀和即可计算出答案。\n\n- G1 & G2 - Hidden Single\n\n  [G1 Soluiton](/article/CF2150E1-Hidden-Single-Version-1-题解/)，[G2 Solution](/article/CF2150E2-Hidden-Single-Version-2-题解/)。\n\n### Atcoder Beginner Contest 425\n\n[Link](https://atcoder.jp/contests/abc425)\n\n- E - Count Sequences 2\n\n  发现这个东西其实有两种算法。记 $s = \\sum_{i = 1}^n c_i$，一种是 $\\frac{s!}{\\prod_{i = 1}^n c_i!}$，另一种是 $\\binom{s}{c_1} \\cdot \\binom{s - c_1}{c_2} \\cdot \\ldots \\cdot \\binom{s - c_1 - c_2 - \\dots - c_{n - 1}}{c_n}$。你会发现把第二个化简之后就是第一个，但是第二个显然更好算。其实第一个也能算，但是赛时我饭堂了，只单独处理了每个数的质因数分解，而没处理每个数的阶乘的质因数分解。\n\n- G - Sum of Min of XOR\n\n  好简单的 G，赛时没切出来是因为回寝室了，话说这应该是我第一次独立做完一套 ABC。一种暴力是建 01trie 暴力，时间复杂度 $O(V \\log V)$。考虑反过来，对于每个 $a_i$，有哪些数与 $a_i$ 异或能取到最小值，再简单拆贡献计算答案即可。时间复杂度 $O(n \\log^2 V)$，精细实现可以做到 $O(n \\log V)$。（感觉做法好抽象，讲不清楚。）","tags":["日祭"],"categories":["OI","记录"]},{"title":"[ABC420G] sqrt(n²+n+X) 题解","url":"/article/ABC420G-sqrt-n²-n-X-题解/","content":"\n$-10^{14} \\le X \\le 10^{14}$ 一眼根号复杂度。\n\n这道题应该有很多做法。我的做法是尝试消掉 $n^2$，使得关于 $n$ 只出现了一次项。\n\n$$\n\\begin{aligned}\n&设\\ \\sqrt{n^2 + n + X} = n + k (k \\in \\mathbb{Z})\\\\\\\\\n&\\therefore n^2 + n + X = n^2 + 2nk + k^2\\\\\\\\\n&\\therefore n + X = 2nk + k^2\\\\\\\\\n&\\therefore X = k^2 + 2kn - n\n\\end{aligned}\n$$\n\n那么就可以枚举 $k$ 解出 $n$，当 $n$ 是整数是才是合法解。$k$ 是根号级别的，但是为了保险，$k$ 的值域可以开大一点。\n\n[赛时提交记录](https://atcoder.jp/contests/abc420/submissions/68769089)，稍微卡了点常，所以写法有点沟槽。应该不卡常就用 set 去重也能过。","tags":["数学"],"categories":["OI","题解"]},{"title":"[CF2133D] Chicken Jockey 题解","url":"/article/CF2133D-Chicken-Jockey-题解/","content":"\nUpd. 修了一点笔误。\n\n显然是 DP，并且是稍微想一想就能发现性质的 DP。\n\n首先攻击的形式一定钦定若干个生物，打死这些生物，使得剩下的生物形成若干个堆叠。对于每个堆叠，我们再从下往上依次一个个打死。容易发现，若 $[l, r]$ 是一个独立的堆叠，需要的攻击次数是 $1 + \\sum_{i = l}^r h_i - 1$，减一与加一是因为除了第一个生物都会受到 $1$ 的跌落伤害。设前缀和数组为 $s$，那么上式就是 $s_r - s_{l - 1} - (r - l)$。\n\n注意到，为了减少攻击次数，我们会尽量增加摔落伤害。要增加摔落伤害，我们会从上往下打死钦定的生物。所以考虑倒着 DP，设 $dp_i$ 表示 $i$ 是钦定的生物之一，打死 $[i, n]$ 的生物的最少操作次数。初始状态是 $dp_{n + 1} = 0$。有转移：\n\n$$\ndp_i = \\min_{j = i + 2}^{n + 1}\\{dp_j + h_i + \\max(0, h_{i + 1} - i) + s_{j - 1} - s_{i + 1} - (j - i - 2)\\}\n$$\n\n答案是 $dp_1$。上式的具体含义是：打 $h_i$ 次把第 $i$ 个生物打死，第 $i + 1$ 个生物受到 $i$ 点跌落伤害后还需要打 $\\max(0, h_{i + 1} - i)$ 次，接下来区间 $[i + 2, j - 1]$ 的生物每个生物都会受到 $1$ 点跌落伤害，需要打 $s_{j - 1} - s_{i + 1} - (j - i - 2)$ 次。\n\n这个转移方程漏掉了 $j = i + 1$ 的情况，但是发现 $j = i + 1$ 时显然不优，所以也不用分讨。\n\n这个 DP 是 $O(n^2)$ 的，考虑优化。发现 $j$ 与 $i$ 是互相独立的，所以把 $i$ 与 $j$ 拆开变为：\n\n$$\ndp_i = \\min_{j = i + 2}^{n + 1}\\{dp_j + s_{j - 1} - j\\} + h_i + \\max(0, h_{i + 1} - i) - s_{i + 1} + i + 2\n$$\n\n所以实时记录 $\\ge i + 2$ 的 $j$ 中 $dp_j + s_{j - 1} - j$ 的最小值即可。时间复杂度 $O(n)$。\n\n[赛时提交记录](https://codeforces.com/contest/2133/submission/335389286)，这份代码中答案取的是 $dp_0$，但并不影响。","tags":["DP"],"categories":["OI","题解"]},{"title":"[ARC203C] Destruction of Walls 题解","url":"/article/ARC203C-Destruction-of-Walls-题解/","content":"\n看到 $\\bf 0 \\le K \\le H + W$ 就显然分讨了。\n\n- Case 1：$K \\lt H + W - 2$\n  \n  此时显然无解。\n\n- Case 2：$K = H + W - 2$\n\n  此时答案即为从 $(1, 1)$ 走到 $(H, W)$ 的方案数，即 $\\binom{H + W - 2}{H - 1}$。\n\n- Case 3：$K = H + W - 1$\n\n  即在 Case 2 的基础上再选一堵墙拆除。发现对于任意一条从 $(1, 1)$ 到 $(H, W)$ 的路径，都可以选择其余任意一堵墙拆除。故答案为 $\\binom{H + W - 2}{H - 1} \\cdot \\binom{2(n - 1)(m - 1)}{1}$。\n\n- Case 4：$K = H + W$\n\n  发现此时又产生了两种情况。一种是路径长度依旧为 $H + W - 2$，另一种是路径长度为 $H + W$。\n\n  - Case 4.1：路径长度为 $H + W - 2$\n\n    即在 Case 2 的基础上再选两堵墙拆除。尝试延续 Case 3 的做法，答案为 $\\binom{H + W - 2}{H - 1} \\cdot \\binom{2(n - 1)(m - 1)}{2}$。可是发现此时会重复。具体地，当存在一个位置 $(x, y)$ 满足 $(x, y) \\to (x + 1, y), (x, y) \\to (x, y + 1), (x + 1, y) \\to (x + 1, y + 1), (x, y + 1) \\to (x + 1, y + 1)$ 四堵墙都被拆除时，这种拆除方案会被路径 $\\dots \\to (x, y) \\to (x + 1, y) \\to (x + 1, y + 1) \\to \\dots$ 与 $\\dots \\to (x, y) \\to (x, y + 1) \\to (x + 1, y + 1) \\to \\dots$ 各计算一次。\n\n    考虑计算被重复计算的方案数。考虑枚举 $(x, y)$，那么这里的答案为 $\\sum_{x = 1}^{H - 1} \\sum_{y = 1}^{W - 1} \\binom{x + y - 2}{x - 1} \\cdot \\binom{H + W - x - y - 2}{H - x - 1}$。考虑从路径计数意义上化简。假设 $(x, y)$ 和 $(x + 1, y + 1)$ 是一个点，那么上式相当于在计算 $(1, 1)$ 到 $(H - 1, W - 1)$ 的路径数。撤销假设，那么我们要选择路径中的一个点，将它视为 $(x, y)$，插入点 $(x + 1, y + 1)$，并把之后的点向右、向下各移动一个位置。可以选择的点有 $(H + W - 3)$ 个，所以上式化简为 $\\binom{H + W - 4}{H - 2} \\cdot (H + W - 3)$。\n\n  - Case 4.2：路径长度为 $H + W$\n\n    此时所有墙恰好用完，所以我们只用计算长度为 $H + W$ 的路径数量。当路径长度为 $H + W$ 时，一定走了一次回头路，即一定向上走了一步或向左走了一步。\n \n    若向上走了一步，那么在竖直方向上的总步数是 $H + 1$，而在水平方向上的总步数依然是 $W - 1$。发现，如果有一步是向上的，那么它的上一步和下一步都必须是向右的。由于一定存在一步向上，所以我们可以先提前使用两个向右的行动。此时在水平方向还剩下 $W - 3$ 步。我们先假设所有竖直方向上的行动都是向下的，那么此时答案为 $\\binom{H + W - 2}{H + 1}$。接下来，我们可以从竖直方向上的第 $2$ 步到第 $H$ 步之间任意选择一步，并将其“反转”，即在这一步前后各加一次向右的行动，并且将这一步修改为向上。所以答案为 $\\binom{H + W - 2}{H + 1} \\cdot (H - 1)$。\n \n    同理，若向左走了一步，那么答案为 $\\binom{H + W - 2}{W + 1} \\cdot (W - 1)$。\n \n  综上所述，这一部分的答案为：\n\n$$\n\\binom{H + W - 2}{H - 1} \\cdot \\binom{2(n - 1)(m - 1)}{2} - \\binom{H + W - 4}{H - 2} \\cdot (H + W - 3) + \\binom{H + W - 2}{H + 1} \\cdot (H - 1) + \\binom{H + W - 2}{W + 1} \\cdot (W - 1)\n$$\n\n代码是好写的，所以这里就不放了。","tags":["计数","组合数学","分类讨论"],"categories":["OI","题解"]},{"title":"[ARC203B] Swap If Equal Sum 题解","url":"/article/ARC203B-Swap-If-Equal-Sum-题解/","content":"\n首先，必要条件是两个序列的和相同。\n\n容易发现，操作是可逆的。所以考虑将 $a$ 和 $b$ 变为一种相对规则的形式，比如单调。由于单调不降与单调递增是对称的，所以接下来讨论单调不降。\n\n现在的问题是，能否将一个序列通过若干次操作变为单调不降的。考虑简化操作，变成：\n\n- 交换 ``0`` 与 ``0 0``\n- （或）交换 ``0 1`` 与 ``1``\n- （或）交换 ``1 0`` 与 ``1``\n\n注意到，当序列之和（即 $1$ 的数量）$\\ge 2$ 时，我们一定可以把所有的 $0$ 放在序列开头处，从而形成单调不降的序列。具体过程可以手模一下，这里不再展开。\n\n另外，当序列之和 $= 0$ 时显然有解。所以接下来单独讨论序列之和 $= 1$ 的情况。即此时序列中有且仅有一个 $1$。\n\n根据 $1$ 的位置分类讨论。发现，当 $1$ 的位置 $\\in (1, n)$ 时，我们可以通过一些操作将它放置到区间 $(1, n)$ 中的任意一个位置；当 $1$ 的位置是 $1$ 或 $n$ 时，那么我们无法改变它的位置。也就是说，当 $a$ 或 $b$ 中的 $1$ 在位置 $1$ 或 $n$ 时，当且仅当两个序列相等时才有解；其它情况下均有解。\n\n代码是好写的，所以这里就不放了。","tags":["构造","Ad-hoc"],"categories":["OI","题解"]},{"title":"[ARC203A] All Winners 题解","url":"/article/ARC203A-All-Winners-题解/","content":"\n手模几个样例之后，容易发现构造：\n\n- 对于每个队伍，令其中 $\\lfloor \\frac m 2 \\rfloor$ 个人始终获胜，其中 $\\lfloor \\frac m 2 \\rfloor$ 个人始终战败。\n- 那么对于每一个始终获胜的人，都可以匹配到 $n - 1$ 个其他队伍的始终战败的人。同理，对于每一个始终战败的人，都可以匹配到 $n - 1$ 个其他队伍的始终获胜的人。\n- 当 $m$ 是奇数时，每个队还各有 $1$ 个人未被匹配。此时我们只能令其中一个人始终获胜。\n\n综上所述，答案为 $n \\cdot \\lfloor \\frac m 2 \\rfloor + m\\ \\mathrm{mod}\\ 2$。代码就懒得放了。","tags":["构造"],"categories":["OI","题解"]},{"title":"2025 年 8 月日祭","url":"/article/diary/2025/08/","content":"\n这个月的日祭直接写一起了，基本都在补题。\n\n注意到 7 月份后来状态不好。\n\n- [[洛谷 P4198] 楼房重建](https://www.luogu.com.cn/problem/P4198)\n\n  考虑用一棵普通线段树维护，每个节点维护区间的最大值与区间内好的序列的长度，push up 的时候需要写一个类似于线段树二分的东西，时间复杂度 $O(n \\log^2 n)$。\n\n- [[洛谷 P9824] [ICPC 2020 Shanghai R] Fountains](https://www.luogu.com.cn/problem/P9824)\n\n  复杂度好神秘的一道题。~~自己写写不清楚，所以干脆看题解吧。~~\n\n- [[洛谷 P6189] [NOI Online #1 入门组] 跑步](https://www.luogu.com.cn/problem/P6189)\n\n  ~~显然可以 oeis。~~\n\n  本题就是正整数拆分问题。考虑正整数拆分的做法。一种 DP 是设 $dp_{i, j}$ 表示用了 $1 \\sim i$，当前和为 $j$ 的方案数，转移是 $dp_{i, j} = dp_{i - 1, j} + dp_{i, j - i}$。另一种 DP 是设 $dp_{i, j}$ 表示选了 $i$ 个数，当前和为 $j$ 的方案数，转移是 $dp_{i, j} = dp_{i - 1, j - 1} + dp_{i, j - i}$。发现第一种 DP 与拆分的数的值域有关，第二种与拆分的数的数量有关。所以考虑根号分治，对于 $\\le \\sqrt n$ 的数进行第一种 DP，其它的进行第二种 DP。\n\n- [CWOI 0819 B组] C - 盲盒流水线\n\n  注意到这场因为 B 屎一样的题面搞乱了节奏？（不要给自己找借口了。）不过要是 JDS 不提醒我 A 可能要挂完。\n\n  题意是区间背包。因为是区间，容易想到用数据结构维护。注意到背包可以 $O(m)$ 合并，那么写一个普通线段树的时间复杂度是 $O(n \\log n + q m \\log n)$，空间复杂度是 $O(n \\log n)$。慢的原因是合并次数太多，所以考虑减少合并次数。发现这个过程是静态的，所以选择猫树。可是发现直接猫树的空间复杂度是 $O(n^2 \\log n)$，所以需要把询问离线下来，每个区间单独处理即可。\n\n- [P13736 [JOIGST 2025] 日本浮现 / Japan Emerges](https://www.luogu.com.cn/problem/P13736)\n\n  气死我了怎么绿题都场切不了。（注意到可能是做提高组模拟赛有点膨胀导致的。）\n\n  看到连通立马想到并查集（为啥我没立马想到），看到最小立马想到二分答案转化为判定性问题，判定的时候按题意模拟即可，如果两个块会相连就合并起来。\n\n- [[洛谷 P13680] [IAMOI R2] 未送出的花](https://www.luogu.com.cn/problem/P13680)\n\n  注意到祖先的盛开度一定比孩子大，因为如果交换两个点的盛开度会导致答案不增。所以对于每个点，它的美丽度取的点的位置是固定的，所以可以统计对于每个点，它的盛开度会被作为多少个点的美丽度（记作 $cnt_u$）。若我们选择 $k$ 朵花送出，相当于要选若干个点使得 $\\sum_{u \\in S} cnt_u \\ge k$，最大化 $\\min_{u \\in S} w_u$，发现 $S$ 一定是一个包含根的连通块，所以直接树上背包即可。\n\n- [CWOI 0822 B组] B - 美丽值\n\n  题意略。容易想到拆贡献，考虑 $[i, i + 1]$ 一段会被计算多少次。设 $n$ 中有 $j$ 个数 $\\le i$，剩下的 $n - j$ 个数 $\\gt i + 1$，那么 $[i, i + 1]$ 会被计算 $\\min(j, n - j)$ 次。接下来考虑有多少个序列满足上述条件。首先从 $n$ 个数中选 $j$ 个数钦定为 $\\le i$，那么 $j$ 个数就可以任意在 $[1, i]$ 中生成，剩下 $n - j$ 个数同理。所以总答案是 $\\sum_{i = 1}^{v - 1} \\sum_{j = 0}^n \\min(j, n - j) \\cdot \\binom n j \\cdot j^i \\cdot (n - j)^{v - i}$。\n\n- [[Atcoder ARC101C] Ribbons on Tree](https://atcoder.jp/contests/arc101/tasks/arc101_c)\n\n  考虑容斥（？，注意到我不会容斥，是怎么考虑到的），答案为 $\\sum_S (-1)^{|S|} \\cdot f(S)$，其中 $f(S)$ 表示强制断开的边集为 $S$ 的方案数。注意到断开若干条边后，形成了若干个独立的连通块，那么每个连通块的方案数就是 $\\prod_{i = 1}^{\\frac n 2} (2i - 1)$（当 $n$ 是偶数时）。所以直接树上背包即可。\n\n- [[Atcoder ARC153D] Sum of Sum of Digits](https://atcoder.jp/contests/arc153/tasks/arc153_d)\n\n  好神秘的 DP。\n\n  发现难点主要在于进位。设 $dp_{i, j}$ 表示考虑到第 $i$ 位，上一位有 $j$ 个数向这一位进了位，目前答案的最小值（不包含当前这一位）。对于每一位，先对 $a$ 按当前这一位从大到小排序，那么进位的数字一定是 $a$ 的一个前缀。接下来就是直接转移，枚举进位个数、$x$ 当前这一位的值，然后统计当前数位的和与进位个数，再转移到下一位即可。\n\n- [CWOI 0824 B组] A - town\n\n  题意是将树分为若干个连通块，要求每个连通块的权值的异或和为 $x$，求方案数。\n\n  显然容易想到做树上背包，并且记录当前未闭合连通块的异或和。发现未闭合的连通块的异或和一定是 $xorsum$ 或 $xorsum \\oplus x$，所以只用设两个状态。需要特判 $x = 0$（赛时被这个 Corner Case 创飞了。）\n\n- [CWOI 0824 B组] B - str\n\n  很显然的 DP，处理 LCP 即可。但是赛时写的什么 KMP 处理 LCP？什么东西？\n\n- [CWOI 0824 B组] C - perm\n\n  什么惊人的注意力。\n\n  显然与置换环有关。把每个置换环拿出来，设大小为 $sz_i$，那么答案就是 $\\frac{n!}{\\prod sz_i !} \\cdot \\prod f(sz_i)$，其中 $f(x)$ 表示大小为 $x$ 的置换环的解数，然后出题人**注意到** $f(x) = x^{x - 2}$，特别地，$f(1) = 1$。\n\n### Codeforces Round 1044 (Div. 2)\n\n[Link](https://codeforces.com/contest/2133)\n\n- D - Chicken Jockey\n\n  [Solution.](/article/CF2133D-Chicken-Jockey-题解/)\n\n- E - I Yearned For The Mines\n\n  发现当树是一条链时是容易的（废话），所以考虑先使用最多 $\\lceil \\frac n 4 \\rceil$ 次 $2$ 类操作把树分为若干条链，再用 $n$ 次操作检查每一条链。考虑如何在限定次数内将树分为链。我们尝试对树上的点分为以下三类：\n\n  - 链的端点；\n  - 链的中间点；\n  - 执行 $2$ 类操作的点。\n  \n  我们可以通过一次 dfs 来确定点的类型。具体地，对于点 $u$：\n  \n  - 若 $u$ 的儿子中存在一个中间点，或存在至少 $3$ 个端点，那么 $u$ 是操作点；\n  - 否则，若 $u$ 的儿子中恰好存在两个端点（且不存在中间点），那么 $u$ 是中间点；\n  - 否则，$u$ 是端点。\n  \n  于是我们就找出了需要执行 $2$ 类操作的点集。\n\n- F - Flint and Steel\n\n  令 $l_i = i - e_i + 1, r_i = i + e_i - 1$。~~容易~~想到一个朴素 DP：设 $dp_i$ 表示炸死 $[1, r_i]$ 的苦力怕最少需要引燃多少只苦力怕，有转移 $dp_i = \\min_{j \\lt l_i \\lt r_j \\lor l_j \\lt l_i \\lt j \\lt i} dp_j + 1$，时间复杂度 $O(n^2)$。考虑优化，设 $seg_i$ 表示炸死 $[1, i]$ 的苦力怕最少需要引燃多少只苦力怕，那么 DP 转移就可以通过线段树来优化，实际复杂度 $O(n \\log n)$。\n\n### Codeforces Round 1045 (Div. 2)\n\n[Link](https://codeforces.com/contest/2134)\n\n- D - Sliding Tree\n\n  在 CF Div. 2 D 放极弱的样例的出题人，愿你们的母亲在天堂相遇。\n\n  根据直觉容易想到与直径有关，然后就会自然地想到移动直径上的每一棵子树，然而这样是错误的。正确的做法应该是把直径的一端移到子树上，那么操作次数就应该是 $n - len$，其中 $len$ 为直径的长度。至于为什么这样是最优的应该口胡一下可以怔出来，但是不想怔了。\n\n- E - Power Boxes\n\n  实则并不难，只是赛时死磕 D 去了。赛后自己补出来了，虽然用时有点久。\n\n  设从 $i$ 开始的弹跳次数为 $c_i$，那么显然有 $c_i = c_{i + a_i} + 1$，初始值是 $c_{n + 1} = c_{n + 2} = 0$。显然会倒着询问。对于 $i$，若 $c_{i + 1} \\neq c_{i + 2}$，那么我们询问 $c_i$ 即可得到 $a_i$ 的值。否则，我们可以直接推出 $c_i = c_{i + 1} + 1$，但并不知道 $a_i$ 的值。注意到，若 $i \\gt 1$，因为 $c_i = c_{i + 1} + 1 \\neq c_{i + 1}$，我们一定可以通过一次询问直接确定 $a_{i - 1}$。接下来，我们只需要交换 $i - 1$ 与 $i$，原来的第 $i$ 个盒子现在成为了第 $i - 1$ 个盒子，又有 $c_i' \\neq c_{i + 1}'$，所以我们可以通过一次询问直接确定 $a_{i - 1}'$。若 $i = 1$，交换 $1$ 与 $2$ 即可。根据上述过程易证需要 $\\lceil \\frac {3n} 2 \\rceil$ 次询问。\n\n### Codeforces Round 1046 (Div. 1, Div. 2)\n\n[Link](https://codeforces.com/contest/2135)\n\n- B - For the Champion\n\n  被随机区分导致掉大分了呜呜呜。\n\n  注意到赛时就想到了移到角落，然后就不会了，男蹦。\n\n  移到两个角落就可以得到 $X + Y$ 与 $X - Y$ 了，然后就做完了。\n\n- C - By the Assignment\n\n  发现一个图是好的的充要条件是，每个环上所有点的点权都应该相同，这等价于每个边双中的点的点权应该相同。特别地，奇环上所有点的点权都应该是 $0$。所以我们只用找出每个边双联通分量，判断其中已确定点的点权是否全部相同，并且是否存在奇环即可。\n\n- D1 & D2 - From the Unknown\n\n  注意到我赛时基本会 D1 了，然后饭堂了以为自己是错的？然后开始考虑优化，想到了 D2 正解的 $70\\%$？然后最后 D1 & D2 都没做出来？啊？\n\n  设 $N = 10^5$。对于 D1，容易想到的是第一次询问 $N$ 个 $1$，得到 $W$ 的大致范围 $[l, r]$，满足 $2l \\gt r$（好像赛时就是 $l, r$ 推错了，导致没推出 $2l \\gt r$？）。接下来要确定 $W$ 的具体值，于是考虑询问 ``l 1 l 2 l 3 ... l (r - l)``，有 $W = 2(r - l) - res + l$。\n\n  对于 D2，考虑优化。（以下是赛时想法）发现我们没有把 $res = 0$ 利用起来。于是考虑利用根号分治与数论分块的思想，第一次询问 $\\sqrt N$ 个 $\\sqrt N$，若 $res = 0$ 则说明 $W \\lt \\sqrt N$，否则 $W \\ge \\sqrt N$。若 $W \\lt \\sqrt N$，则考虑询问 $N$ 个 $1$，此时每个 $W$ 都对应一个互不相同的 $res$；否则，沿用 D1 的思想即可。但是发现这样的询问次数依然可以达到 $N$……（以下是正解）发现以上有些数值取到 $\\sqrt N$ 时不一定最优，于是重新设常量 $N, B$ 表示：第一次询问 $N$ 个 $B$，若 $W \\lt B$ 则第二次询问 $B$ 个 $B$。通过暴力可以求出，当 $N = 11343, B = 116$ 时询问次数可以控制在 $2.5 \\times 10^4$ 以内。若精细实现，询问次数还可以再少一点。","tags":["日祭"],"categories":["OI","记录"]},{"title":"自述","url":"/article/自述/","content":"\n本文是我的自述，非常口水话。\n\n写的时候思绪比较混乱，所以可能有些地方不太清楚。\n\n我很久之前就想写这种文章了，现在终于写好了。\n\n这篇文章里我并没有有意针对谁，所以请不要想多了。\n\n文章比较长，难免会有一些错别字，应该不影响理解。\n\n除了第一部分的大部分内容与后来更新的内容（用 ``Upd.`` 标注），其他都是我在 2025.7.19~20 写的。\n\n### Part. 1 人身攻击与自我怀疑\n\n\\* 第一部分是我前段时间写的，写得过于详细了（？），但是也不想改了，就这样了。\n\n$\\ \\ \\ \\ \\ \\ \\ $初一下的时候，我加入了班级合唱，花了很多时间排练。当时本来作业又多，排练又经常占晚自习时间，所以就只有经常熬夜或早起写作业。比赛前后几天，班上考了好几堂试，作业又不少，我在周二（2024.5.21）晚上回家后，就想一口气把作业做完。我做到了凌晨两点，我妈一直陪着我，她也很心疼我（做到那么晚），再加上平时作业一直都不少，我妈就想向班主任反映一下情况。由于我知道给班主任反馈没有好下场，他会各种在班上阴阳或者什么之类的，所以我不让我妈发。后来我妈又想到可以向另一位老师反馈，于是她就编辑了一条信息，发给了那位老师。信息的内容主要是先说明了我的情况，然后询问教学安排。中间有一句原话大概是“想知道教学安排是怎样的，现在搞得那么紧有什么意义。”\n\n$\\ \\ \\ \\ \\ \\ \\ $周三（2024.5.22）早上，班主任在班上原封不动地念了我妈发的信息（显然是另外那个老师直接原封不动转发给班主任了），然后质问“是哪个狗屁家长发的”，没问出来，就让昨天晚上熬了夜的人起立，一个一个问。我和另一些同学站了起来，但是我并没有承认那是我妈发的。随后班主任就让家委会的查，是谁发的，后来在 2h 内就查出了是我妈。然后课间操的时候班主任就把我拉到一边，给我讲了一大堆。具体讲了些什么已经记得不是太清楚了，其中有些话也许是说我妈多管闲事，说他很喜欢我，但是我妈太麻烦了，不过不会给我穿小鞋。随后下午小班会的时候他又在班上说了这个事情，说了些什么也记不清了，但应该和上午说的有些重合。\n\n$\\ \\ \\ \\ \\ \\ \\ $这件事就过去了**吗**？在接下来的一段时间，班主任多次在全班说我，说什么“让你爸再找个妈”“你妈更年期”之类的话。怎么说呢，这些事背后还有一个原因。\n\n> $\\ \\ \\ \\ \\ \\ \\ $在初一上的时候，我开学就当了副班长。后来由于各种原因，我实在不想当副班长了，我又不敢给班主任说，所以我爸我妈就去找班主任把我的副班长辞掉了。班主任觉得哪有家长给学生辞班干部的，又因为当时找班主任的时候我妈说的比较多，所以班主任就对我妈有了意见。\n\n> $\\ \\ \\ \\ \\ \\ \\ $另外，班主任后来是给我道了歉，但是是怎么道的呢？（我印象中）他在班上问我“我这样说你你没事吧”，然后我只好说没事，随后他又以开玩笑的语气去问另一个同学：“让你爸换一个不？”\n\n$\\ \\ \\ \\ \\ \\ \\ $接上文，后来我忍了几周，有一周在家里差点崩溃了，但是又没敢把这些事情说出来。第二周，由于班上一些琐碎的事，我在那周周六（2024.6.8）回家后心情不好，然后洗完澡之后和我爸我妈聊天，然后聊着聊着就把上述的那些事情套出来了。当时说出来过后，心里是极其崩溃，具体崩溃的程度难以形容，这里也不再具体描述。后来我爸我妈就决定了给我换班。那天晚上我大概三四点才睡。第二天他们带着我出去玩，可是开心不起来一点。\n\n$\\ \\ \\ \\ \\ \\ \\ $后来我爸我妈就找了校长给我转班，中间有些校长以及班主任的言论这里不再展开。\n\n$\\ \\ \\ \\ \\ \\ \\ $总而言之，那段时间，我疯狂怀疑我的家长。想象一个班主任在全班面前评价你的家长，真的难以分清到底是谁对。可是现在看来，也不重要了，因为不管谁是对的，又是谁伤害了我呢？显而易见。\n\n$\\ \\ \\ \\ \\ \\ \\ $这件事一直在我心中萦绕了许久，也许是直到初二上结束才完全放下吧。用一句歌词就是：\n\n>Screamed, 'f\\*\\*K you aIMee' to the night sky as the blood was gushing. But I can't forget the way you made me heal.\n\n### Part. 2 帮助 or 伤害\n\n$\\ \\ \\ \\ \\ \\ \\ $转班之后，倒也不存在什么不适应，唯一就是有些孤独，在新班级找不到有共同话题的人。虽然和原来班级的同学交往依旧很多，但是平时有的时候就会觉得有些空虚。这倒也没什么。\n\n$\\ \\ \\ \\ \\ \\ \\ $只是，我当时始终放不下初一下的事情。可能又由于某些原因，我心中似乎一直萦绕着什么不好的东西（我也记不清了）。后来在新班级遇到了一位同学，他简直像有读心术一样，第一次聊天就看透了我的内心，并且把他所看出来的都说出来了。我瞬间崩溃。（其实现在已经不知道当时除了初一下那件事我还放不下什么事。）后来的时间里，他经常和我聊天，想要开导我，把我内心不好的东西驱散开来。\n\n$\\ \\ \\ \\ \\ \\ \\ $可是，在他帮助我的过程中，他无意间会点破一些事情，反而会伤害到我。（我这里并不想绞尽脑汁地回忆具体的事情，毕竟这一部分不是重点。）于是，这样，我反而越来越崩溃，直到后来他让我去找心理老师，然后和心理老师聊完之后，他问我说心理老师说了些什么，我告诉了他，然后他在一个纸条上写了一个英语单词~~（其实他是用词典笔翻译的）~~：\n\n> incurable\n\n$\\ \\ \\ \\ \\ \\ \\ $然后我就突然意识到，为什么他说我没救了我就没救了？然后我逐渐意识到，有许多事情并不是会像他说的那样发展，反而他还在无意中“引导”我走向崩溃。于是接下来的几周，我和他疏远了许多。等我好了一些之后，我告诉他我后来意识到的事情，他也才意识到他的无意中许多话伤害到了我。后来我们把话说开了，关系也恢复如初。\n\n### Part. 2.5 退役？\n\n$\\ \\ \\ \\ \\ \\ \\ $2024.10，我备考 CSP-S，于是停了一个月课。那段经历倒是也挺有趣的。扯远一点，那段时间我很喜欢听 I Hate It Here，也许冥冥中也注定了初二下的一些事情。停课期间，我还是学了一些新知识，并且也练了许多题。\n\n$\\ \\ \\ \\ \\ \\ \\ $考完 CSP-S，炸了，贪心永远是我的噩梦，尽管 T2 还是一个很简单的贪心。赛时我死磕 T2（还没磕出来），导致几乎没有时间思考 T3。晚上和两个同学吃饭，一聊才发现，我反而是考得最差的。\n\n$\\ \\ \\ \\ \\ \\ \\ $回家路上，我爸妈给我说了许多。由于初一下的那些事情，我们一直都在做两手准备（直升或跳槽）。他们本来准备用我 CSP-S 的成绩去找其他学校，可是这下考炸了，于是他们让我先把 OI 放一放，准备冲中考。我当时坐在后座，听着挺难受的，想着难道只是因为我初二没拿到 CSP-S 一等奖就要让我“半”退役？（现在看来，要是真的准备中考，放下 OI，高一再学 OI，怎么还来得及。只是当时没想那么远。）挺崩溃的，我已经快要哭出来了，但是还是忍住了。回家之后，我妈还在一直说，我实在受不了，哭着让她先别说了。然后她来了一句：\n\n> 还学不学嘛！\n\n$\\ \\ \\ \\ \\ \\ \\ $然后我就崩溃了。当时的状态用一句歌词就是：\n\n>We must know, how did it end?\n\n$\\ \\ \\ \\ \\ \\ \\ $后来，我爸妈又找教练聊了几次，最终还是让我呆在 CW，继续学 OI。中间我和我爸妈也有一段冷战期，关系很不好，不想展开写了。只是后来，我妈经常拿我 CSP-S 失误作为一个例子，说什么是因为老师表扬多了飘了？我也是无语了。\n\n### Part. 3 青春\n\n$\\ \\ \\ \\ \\ \\ \\ $本来想好好写一下这部分，但是太中二了，并且可能不太合适，所以我就写一下我当时的状态。\n\n$\\ \\ \\ \\ \\ \\ \\ $转班之后，~~可能是太闲了~~，我渐渐进入了心理上的青春期，也发生了许多~~中二~~有趣的事情。具体不方便说，但是总而言之，也只有“青春”一词能形容青春了。那段经历在当时看来：\n\n> That's the kind of heartbreak time could never mend.\n\n$\\ \\ \\ \\ \\ \\ \\ $而现在看来，那就是独一无二的青春吧。\n\n### Part. 3.5 变化\n\n$\\ \\ \\ \\ \\ \\ \\ $2024.12 中下旬，我也不知道我为什么又挺崩溃的，心情忽高忽低。2024.12.31，我得知：原班下学期要换班主任。\n\n$\\ \\ \\ \\ \\ \\ \\ $一下子觉得有些难以接受，这一切的变化都来得太快了，当时纠结了好几天，一直在从各方面考虑。当时具体想了些啥我不想再回忆了，总之就是挺忐忑的，因为未来充满了太多的不确定性。而最后，我还是决定回到原班。在新班考完期末拿了一个漂亮但没什么含金量的成绩后就回到了原班。\n\n$\\ \\ \\ \\ \\ \\ \\ $但是，这是相对正确的选择吗？我也不知道。\n\n---\n\n$\\ \\ \\ \\ \\ \\ \\ $其实前几学期的事情我已经记得不太清楚，也并不想花太多的笔墨写，但总而言之是挺崩溃的。过去的事已经过去了，但那些事情一定程度上也影响了我长期的状态，所以才一并写下来。后面的内容有许多是相互关联的，所以如果你愿意认真读一读，读一遍没读懂可以再多读一读。\n\n---\n\n### Part. 4 孤独与厌世\n\n$\\ \\ \\ \\ \\ \\ \\ $其实就如标题所说，孤独与厌世。回到原班之后，发现原班有些事情其实并没有想象中那么好，具体的不方便展开说，并且发现没什么人能给我提供情绪价值。于是就挺孤独的，经常也很烦躁（因为厌世）。正是因为烦躁，并且又没有什么人能陪伴我，所以有一两周真的非常崩溃，于是：\n\n> I hate it here so I will go to secret gardens in my mind.\n\n$\\ \\ \\ \\ \\ \\ \\ $所以我才说这首歌冥冥中注定了一些事情。\n\n$\\ \\ \\ \\ \\ \\ \\ $最崩溃的那段时间，我甚至借同学的螺丝刀把窗户上的钉子都拆了，可是我却没有跳下去的勇气（我很胆小）。后来，我也不知道为什么，我突然就习惯孤独了，觉得一个人很好。但是这也许只是自我保护吧，因为我知道我会一直孤独下去，于是只有让自己接受这个事实，以达到“解决”（实则是逃避）问题的效果。\n\n$\\ \\ \\ \\ \\ \\ \\ $只是后来，经常也会有一些莫名其妙的不好的情绪，我也说不出来是什么。然后我就想自残。但是我很胆小，所以我只敢自己咬自己。但是后来连自己咬自己都不敢了，因为淤青要几天才好，我害怕被家长或老师发现。\n\n$\\ \\ \\ \\ \\ \\ \\ $这个时候我或许还要再用一次这句歌词：\n\n> That's the kind of heartbreak time could never mend.\n\n$\\ \\ \\ \\ \\ \\ \\ $因为崩溃的时候，真的是心上一阵阵绞痛，而非单纯的不开心。\n\n$\\ \\ \\ \\ \\ \\ \\ $另外补充一个话题，就是关于我对于“知心朋友”或者说“真正的朋友”的定义。在这学期上半期，我的定义是“能给我提供精神价值的人”。具体地，我的知心朋友需要能和我放开地谈心，或者有着共同的爱好并且愿意相互讨论。这么一来，也许班上就几乎没人了，所以自然感到孤独。也许是太严格了吧，但是这就是我当时对“知心朋友”的定义（或者说要求）。这两周，我对“知心朋友”的定义又发生了一些变化：从心底关心我并且愿意帮助我的人。现在的条件似乎更加严苛了。我与其他人经历的事情不同，所以对朋友的要求不同也很正常。我的要求也许挺严苛的，但是我也接受（逃避）了没有知心朋友的事实。只是说，如果又知心朋友，我会好很多。\n\n### Part. 4.3 文化与 OI\n\n$\\ \\ \\ \\ \\ \\ \\ $我在这学期临近期末的时候有一个想法，就是下学期开学跟新高一一起“补”文化，然后就可以跟他们一起停课。第一，我是为了多争取一些训练时间；第二，停课之后，我就可以远离一些我不喜欢的东西，会轻松很多；第三，我不想学文化了。Upd. 但是我的主教练并没有同意，让我跟着原年级上文化课和竞赛。写这篇文章的时候应该教练已经给我说了，但是不知道为什么我没写上去。\n\n$\\ \\ \\ \\ \\ \\ \\ $先说一些题外话。我的家长与许多科任老师（包括竞赛教练）都说我在过去两年其实没有特别努力地学习，仅仅是完成老师的基本任务，这一点我是认同的，因为我确实不怎么努力。可尽管如此，我再也不想学文化课了，已经学厌了，一想到文化课就烦，一想到语数外三科都有暑假作业就烦（指 2025 年暑假）。果然 Waiting for Judging is unbelievable。（翻译：WJ is untrustworthy.）具体什么原因我也不知道，也许努力并不等于辛苦，我已经再也不想那么辛苦了。\n\n$\\ \\ \\ \\ \\ \\ \\ $接下来这段话也许并不应该放在这一部分，但是我也不知道应该放在哪里。这段话和第五部分有一些关联，但是比较负面，不想放在第五部分。\n\n$\\ \\ \\ \\ \\ \\ \\ $我爸妈一直都不让我打游戏，虽然我前段时间有偷偷打 florr，但是后来打着也没什么意思，所以退了。前段时间，我爸妈不让我刷短视频了，觉得我刷短视频刷太多了。然后昨天（2025.7.19），他们问老师说做作业（或者刷题之类）的时候听歌对效率有没有影响，老师说有，然后我昨天晚上为了稳妥一点就没听歌，然后被我妈表扬了，意思就是说也不让我在做作业或者刷题的时候听歌了，而我在家里的时候整天就在书房里，要么写作业要么刷题要么做一些自己的事情（比如写这篇文章）。现在他们又不让我做自己的事情，所以每次我做自己的事情时，只能跟他们说我在刷题，所以我做自己的事情的时候也不能听歌，所以我在家里的时候不能听歌；他们又害怕我在学校戴耳机太多导致听力下降，所以让我在学校少戴耳机。总而言之，就是他们不让我听歌，虽然我在学校的时候他们管不到，只是要是哪天把我耳机收了就老实了。\n\n$\\ \\ \\ \\ \\ \\ \\ $综上所述，我爸妈不让我打游戏不让我刷短视频不让我听歌，并且说“该努力了”。他们说他们也心疼我，但是觉得该冲一冲了。可是他们心疼只是他们心疼而已，甚至从来没想过我的感受。我可以努力学习，可是他们的要求却是想让我成为学习机器。\n\n### Part. 4.6 “就挺抑郁的”\n\n$\\ \\ \\ \\ \\ \\ \\ $前面也写了那么多了，一些重复的内容我也不反复阐述。前两天，有一天晚上，我和一个同学晚上聊了很久，把前面写的许多内容都给他讲了。另外还说了一些，比如说到我对知心朋友的定义的时候，我就提到：我之前的定义是能和我谈心，或者有共同话题并且愿意和我讨论的人，要说共同话题，那么无非就是 OI 和音乐。可是现在看来，我似乎没有之前那么喜欢 OI 了，说不清为什么，但就是没有之前那种热情了。尽管我知道接下来的任务很艰巨，但是我还是经常迷失方向。\n\n$\\ \\ \\ \\ \\ \\ \\ $然后同学听完我把所有说完过后，想了一会儿，说：\n\n> 其实这就显得挺抑郁的。抑郁的一种表现就是对之前喜欢的事物渐渐失去兴趣。\n\n$\\ \\ \\ \\ \\ \\ \\ $原话也许不是这样，但是是这个意思。然后我又崩溃了。后面他又和我聊了一些，比如有关自残和紫砂的内容。（然后恰好在第二天，我就看到了一篇有关生命教育的文章，我猜测可能我同学在之前就看到了那篇文章，然后恰好就把里面写的一些内容讲给我听了。）\n\n$\\ \\ \\ \\ \\ \\ \\ $不过好在，我现在还没有彻底放弃吧。（这是我和他聊完之后得到的结论。）所以还有希望。\n\n### Part. 5 两年之约\n\n$\\ \\ \\ \\ \\ \\ \\ $前面也有提到，我在学习上并不属于努力型。而现在我已经新初三了，想要拿到金牌并保送，其实非常困难。这一个月内，我家长、教练都已经给我鼓气了好几次，我自己也知道，我该努力了。看着洛谷上的 NOI 游记，之前我从未觉得这一切是多么残酷，打完两三天的比赛，该退役的就该退了，没有一点徘徊的余地。而现在，SC 已经成为了弱省，想要在弱省拿 NOI 金牌，真的很难。掰着手指算一算，距离高一参加 NOI，正好还有两年。要是高一拿不到金牌或者银牌高分，退役是必然的。两年有多长呢？回想两年之前发生了什么……小升初早培，这一切似乎还近在眼前。\n\n$\\ \\ \\ \\ \\ \\ \\ $我的实力也许确实比 NOI 金牌的（同期）水平差不少，但我现在确实该努力了。就算我水平不够，最后只能回归文化课，我也不希望将来的自己后悔现在没有努力。\n\n$\\ \\ \\ \\ \\ \\ \\ $可是客观来讲，前面提到的各种因素却成为了不小的困难，可是我也没有什么办法，只有麻醉自己，忘掉不好的事情吧。","tags":["记录"],"categories":["记录"]},{"title":"P3960 [NOIP 2017 提高组] 列队 题解","url":"/article/P3960-NOIP-2017-提高组-列队-题解/","content":"\n本文提供一种动态开点线段树做法。\n\n\n---\n\n> 这道题写的时候调了很久，原因是 ``while(q--)``，而处理询问时又用到了 $q$。\n\n另外，sjx 在讲义中这样写：\n\n> 为了解决空间问题，我们可以离线所有查询、删除和追加操作，然后 one by one 用线段树处理每个序列，每一个处理完后回滚到初始状态，再处理下一个。\n\n为了解决空间问题，直接动态开点不就是了。\n\n---\n\n我们发现，每一行是相对独立的，所以考虑单独处理。对于每一行的前 $m - 1$ 个元素与最后一列，我们需要维护单点查询、单点删除与末尾插入。暴力的单点删除显然不可取，那么容易想到用线段树标记每个元素是否已被删除，查询时用线段树二分找到被查询元素的真实位置。由于有末尾插入的操作，所以我们可以对每棵线段树先多开 $q$ 个位置。对于新加入的元素，我们并不把它实际地插入到线段树中，而是放到这一行（或列）对应的一个 ``vector`` 里面。\n\n具体地，对于一次操作，需要进行以下操作（假设 $y \\ne m$）：\n\n- 在第 $x$ 棵线段树上二分找到 $a_{x, y}$ 的真实位置，从而得到 $a_{x, y}$ 的值（并输出）；\n- 将 $a_{x, y}$ 插入到第 $n + 1$ 棵线段树（用于维护最后一列）的末尾；\n- 从第 $x$ 棵线段树中删除 $a_{x, y}$；\n- 在第 $n + 1$ 棵线段树上二分找到 $a_{x, m}$ 的位置，从而得到 $a_{x, m}$ 的值；\n- 将 $a_{x, m}$ 插入到第 $x$ 棵线段树的末尾；\n- 从第 $n + 1$ 棵线段树中删除 $a_{x, m}$。\n\n$y = m$ 时也类似，不再展开阐述。\n\n时间复杂度 $O(q \\log n)$。\n\n关于线段树节点数量，估算下来理论上限是 $1.2 \\times 10^7$，而实测下来 $4 \\times 10^6$ 已经足够了。\n\n---\n\n在代码实现中，线段树中的 ``0`` 指未被删除，``1`` 指已被删除，这样处理的目的是在末尾插入元素时不需要访问线段树元素。\n\n由于每个询问一定有解，所以线段树二分时没必要判断无解，整个过程也不需要考虑下标越界的问题，没什么细节，个人认为比较好写。\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\n\nint n, m, q, x, y, rt[300005], ps, val;\nvector<int> num[300005];\nstruct Segtree {\n    int tr[4000005], ls[4000005], rs[4000005], cnt;\n    void update(int l, int r, int& p, int s) {\n        if(!p) p = ++cnt;\n        if(l == r) return tr[p] = 1, void();\n        int mid = (l + r) >> 1;\n        if(s <= mid) update(l, mid, ls[p], s);\n        else update(mid + 1, r, rs[p], s);\n        tr[p] = tr[ls[p]] + tr[rs[p]];\n        return;\n    }\n    int query(int l, int r, int& p, int d) {\n        if(!p) p = ++cnt;\n        if(l == r) return l;\n        int mid = (l + r) >> 1, tmp = (mid - l + 1) - tr[ls[p]];\n        if(d > tmp) return query(mid + 1, r, rs[p], d - tmp);\n        else return query(l, mid, ls[p], d);\n    }\n} tr;\n\nsigned main() {\n    scanf(\"%lld %lld %lld\", &n, &m, &q);\n    for(int _ = 1; _ <= q; ++_) {\n        scanf(\"%lld %lld\", &x, &y);\n        if(y < m) {\n            ps = tr.query(1, m - 1 + q, rt[x], y); // step 1\n            if(ps < m) val = (x - 1) * m + ps;\n            else val = num[x][ps - m];\n            printf(\"%lld\\n\", val);\n            num[n + 1].push_back(val); // step 2\n            tr.update(1, m - 1 + q, rt[x], ps); // step 3\n            ps = tr.query(1, n + q, rt[n + 1], x); // step 4\n            if(ps <= n) val = ps * m;\n            else val = num[n + 1][ps - n - 1];\n            num[x].push_back(val); // step 5\n            tr.update(1, n + q, rt[n + 1], ps); // step 6\n        }\n        else {\n            ps = tr.query(1, n + q, rt[n + 1], x); // step 1\n            if(ps <= n) val = ps * m;\n            else val = num[n + 1][ps - n - 1];\n            printf(\"%lld\\n\", val);\n            num[n + 1].push_back(val); // step 2\n            tr.update(1, n + q, rt[n + 1], ps); // step 3\n        }\n    }\n    return 0;\n}\n```","tags":["数据结构"],"categories":["OI","题解"]},{"title":"[CF2119D] Token Removing 题解","url":"/article/CF2119D-Token-Removing-题解/","content":"\n将题意转化一下，即我们要把 $n$ 个标记中的若干个放到区间 $[l_i, r_i]$ 内，且右端点各不相同的方案数。设 $dp_{i, j}$ 表示已经考虑了标记 $i \\sim n$，当前还剩 $j$ 个右端点没有使用的方案数。为什么要倒序遍历呢？因为标记 $i + 1 \\sim n$ 能使用的右端点，标记 $i$ 一定能使用。转移分两种情况讨论。\n\n- 若不选择当前这个标记，那么就多出了一个右端点。此时贡献是 $dp_{i + 1, j - 1}$。\n\n- 若选择当前这个标记，包含它的区间的左端点有 $i$ 中情况（$1 \\sim i$），区间右端点有 $j + 1$ 种情况（原本的 $j$ 个空余的右端点加上位置 $i$ 新产生的一个）。此时贡献是 $i(j + 1) \\cdot dp_{i + 1, j}$。\n\n所以 $dp_{i, j} = dp_{i + 1, j - 1} + i(j + 1) \\cdot dp_{i + 1, j}$，初始状态是 $dp_{n + 1, 0} = 1$，答案是 $\\sum_{i = 0}^n dp_{1, i}$。\n\n[提交记录](https://codeforces.com/contest/2119/submission/327725477)。","tags":["DP","计数"],"categories":["OI","题解"]},{"title":"2025 年 7 月日祭","url":"/article/diary/2025/07/","content":"\n### 2025.7.1 好的标题\n\n> 为什么你不写标题了呀？——@[_O_v_O_](https://www.luogu.com.cn/user/782941)\n>\n> 因为没想到**好的标题**。——@[Getaway_Car](https://www.luogu.com.cn/user/725640)\n\n另外，注意到，我一月到六月的日祭数量如下：\n\n|     月份      | 数量 | 有标题数量 |\n| :-----------: | :--: | :--------: |\n| $\\text{Jan.}$ | $10$ |    $10$    |\n| $\\text{Feb.}$ | $12$ |    $12$    |\n| $\\text{Mar.}$ | $11$ |    $8$     |\n| $\\text{Apr.}$ | $7$  |    $7$     |\n| $\\text{May.}$ | $6$  |    $4$     |\n| $\\text{Jun.}$ | $4$  |    $1$     |\n\n我们的日祭正在蒸蒸日下！\n\n---\n\n- [[Codeforces 1610G] AmShZ Wins a Bet](https://www.luogu.com.cn/problem/CF1610G)\n\n  CF 3300* 远古题，洛谷黑，所以也算是第二道黑吗。\n\n  赛时想到了每次删除的是一段合法的括号序列，可是竟然连最基本的 DP 都没想到，how sweet！\n\n  考虑倒序做，设 $dp_{i}$ 表示 $[i, n]$ 的答案，那么它可以由 $s_i + dp_{i +1}$ 与 $dp_j$ 转移而来，其中 $j$ 是能与 $i$ 匹配的第一个位置。时间复杂度 $O(|s|^2)$。\n\n  发现比较字符串还是太慢了，所以考虑使用倍增与哈希实现字符串比较，具体实现类似于树上跳 LCA，一直跳直到 $j$ 跳到边界或者 $s_i \\ne s_j$，即可知道两者的大小关系。\n\n### 2025.7.2\n\n- [[CS Academy] Sugarel in Love](https://csacademy.com/contest/archive/task/Sugarel-in-Love)\n\n  我还是太唐了，这样的唐题都不会。\n\n  设 $dp_{i, 0/1/2}$ 表示 $i$ 的子树中，$i$ 目前度为 $0/1/2$ 的最大答案。直接转移即可。\n\n- [[CS Academy] Divided Kingdom](https://csacademy.com/contest/archive/task/divided-kingdom)\n\n  对于任意两条相邻的边 $u$ 与 $v$，答案不会超过 $w_u + w_v$，因此可以初步确定答案上界 $p$。另外，看到最小值的最大值，很容易想到二分。二分答案 $x$，那么有对于任意在同一集合内的 $a, b$，满足 $dis(a, b) \\ge x$。转化一下，即对于任意 $a, b$ 满足 $dis(a, b) \\lt x$，都有 $a, b$ 不在同一集合内。那么我们可以把所有满足 $dis(a, b) \\lt x$ 的边 $a \\leftrightarrow b$ 建出来，当且仅当新图是一个二分图，$x$ 合法。此时时间复杂度为 $O(n^3 + n^2\\log m)$。又注意到，对于新图中两个点 $a, b$，存在关系 $dis(a, b) \\lt x \\le p$，由于 $p$ 是原图中相邻两条边权值和的最小值，而 $dis(a, b) \\lt p$，这意味着 $a, b$ 一定在原图就已经相连。所以只需要从原图上把满足 $dis(a, b) \\lt x$ 的边拿出来建为新图即可。时间复杂度 $O(m \\log m)$。\n\n### 2025.7.3\n\n- [[Codeforces 407D] Largest Submatrix 3](https://codeforces.com/problemset/problem/407/D)\n\n  一道唐题，可是竟然不会。\n\n  设 $dp_{u, l, r}$ 表示下界为 $u$、左界为 $l$、右界为 $r$ 的最小上界。注意到 $dp_{u, l, r} \\le \\min\\{dp_{u - 1, l, r}, dp_{i, l + 1, r}, dp_{i, l, r - 1}\\}$，发现在这基础上，还需要满足 $a_{u, l} \\ne a_{i, r}, a_{u, r} \\ne a_{i, l}$。维护 $lst_{i, j}$ 表示第 $i$ 列中 $j$ 最后一次出现的位置即可。注意要特判一下 $l = r$。\n\n- [[Atcoder ABC176F] Brave CHAIN](https://atcoder.jp/contests/abc176/tasks/abc176_f)\n\n  第一眼感觉这个题好像来财啊。我们把每次操作剩下的左侧的两张牌叫做手牌。考虑什么时候能够产生贡献。\n\n  - 三张新牌相同。此时手牌状态不变。\n\n  - 有两张新牌相同，且手牌中有一张与它们相同。此时会将手牌中的相同的那张打出，并换来新牌中不同的那张。\n  - 两张手牌相同，且新牌中有一张与它们相同。此时会打出两张手牌，并换来新牌中不同的两张牌。\n\n  上面三项对应的状态更新如下。（$\\leftarrow$ 默认取 $\\max$）\n\n  - 直接全局 $+1$。\n  - （假定 $x = y \\ne z$）$dp_{i, z} \\leftarrow dp_{x, i} + 1$\n  - （假定 $x$ 与两张手牌相同）$dp_{y, z}\\leftarrow dp_{x, x} + 1$\n\n  引入通配符 $0$，表示 $f(0) = \\max\\{f(x)\\}$。以下是无贡献的状态更新。（$x, y, z$ 可相互替换。）\n\n  - $dp_{i, x} \\leftarrow dp_{i, 0}$\n  - $dp_{x, y} \\leftarrow dp_{0, 0}$\n\n  容易发现每一轮一共只有 $O(n)$ 级别的状态更新，所以我们只需要在当前状态的基础上修改即可。另外注意，以上所有操作都是同时进行，所以需要提前存储操作信息。时间复杂度 $O(n^2)$。\n\n### 2025.7.4\n\n- [[洛谷 P2568] GCD](https://www.luogu.com.cn/problem/P2568)\n\n  推式子即可。并不想打公式，~~详见原题题解~~。\n\n- [[Codeforces 1114F] Please, another Queries on Array?](https://codeforces.com/problemset/problem/1114/F)\n\n  ~~看题的时候没看到 $a_i, x \\le 300$，所以想了一会儿直接去看题解了。~~\n\n  要维护区间乘与区间积的欧拉函数，发现区间积可能很大，不能直接分解质因数。所以考虑维护原数的质因子，发现 $\\le 300$ 的质数个数恰好是 $62$，可以用 ``long long`` 维护。而一些数的乘积的质因子状态，即其中每个乘数的质因子状态的或和。区间修改也是类似的道理。\n\n### 2025.7.6 蒸蒸日上\n\n这已经是七月的第 $5$ 篇日祭了，我们的日祭正在**蒸蒸日上**！\n\n- [[Codeforces 2119D] Token Removing](https://codeforces.com/contest/2119/problem/D)\n\n  神秘 DP。[题解](/article/CF2119D-Token-Removing-题解/)。\n\n### 2025.7.7\n\n今天 VP [Codeforces Round 1036, Div. 1 + Div. 2](https://codeforces.com/contest/2124)。\n\n- [[Codeforces 2124E] Make it Zero](https://codeforces.com/contest/2124/problem/E)\n\n  沟槽的构造题，并不想记严格的证明。大概就是找到一个位置 $pos$ 满足 $s_{pos - 1} \\lt \\frac{s_n}2 \\le s_{pos}$，然后分为 $[1, pos), \\{pos\\}, (pos, n]$ 三段，设三段的和分别是 $x, y, z$，我们只需要找到一个 $w$ 使得 $(x - w) + (z - w) = y$，接下来可以在两步内解决。再把前两步合并，就变为了第一段清空，第二段减去 $x - w$，第三段减去 $w$，剩下的就是第二步。\n\n### 2025.7.8\n\n模拟赛挂了 $200\\ pts$，不然 $310\\ pts$。\n\n第四题不会，所以也没什么题需要改。\n\n### 2025.7.9\n\n- [[Atcoder JOISC2014J] 電圧](https://atcoder.jp/contests/joisc2014/tasks/joisc2014_j)\n\n  要使这条边端点颜色相同，且删掉这条边后图形成二分图，那么这条边在所有奇环中，且不在任意一个偶环中。\n\n  考虑建 DFS 树。对于树边，我们可以通过树上差分维护出当前边属于的奇环与偶环数量。对于非树边，根据奇环数量来讨论：若有且仅有一个奇环，则该非树边合法；若有多个奇环，且存在一对奇环没有交集，那么没有树边合法；若有多个奇环，且这些奇环都相交，那么必定会形成更大的偶环，那么没有树边合法。综上所述，只用讨论合法的树边数量，并特判奇环是否只有恰好一个即可。\n\n### 2025.7.10\n\n- B - 树\n\n  题意转化后即动态维护树的直径，具体需要支持向树中加点。\n\n  考虑当两棵树合并的时候直径会怎样。容易发现，新树直径的端点一定由原树直径的端点产生，一一判断即可。考虑使用线段树维护区间直径，支持单点修改即可。\n\n### 2025.7.12\n\n~~线段树合并要把我的左脑和右脑合一起了。~~\n\n这篇日祭是线段树合并学习笔记，未来会有补充。\n\n线段树合并顾名思义，就是把两棵线段树的信息按照特定的规则合并起来，一般与动态开点配合使用。\n\n线段树合并常用于优化 DP，尤其是树形 DP（与 DAG 上的 DP），用来优化 DP 转移。（或者是一些需要在树 / DAG 上进行信息转移的东西。）\n\n比如一个树形 DP 的转移方程如下：\n$$\ndp_{u, i} \\mathop{\\leftarrow}_{v \\in son(u)} dp_{v, ?}\n$$\n我们需要将儿子的信息转移到父亲上，而每个节点存储的又是一个数组，常规的做法是一一合并，转移的时间复杂度为 $O(n^2)$。\n\n而对于一些转移方程，我们会发现合并信息的操作可以用线段树合并来优化。于是我们就将转移的时间复杂度优化为了 $O(\\log n)$（线段树合并的时间复杂度）。\n\n具体的，假设现有 $n$ 棵线段树，每颗线段树维护的是 $dp_i$，那么对于 $u$，转移操作就是将 $\\forall v \\in son(u), dp_v$ 合并到 $dp_u$ 上。\n\n可这时我们会发现，开 $n$ 棵线段树空间显然不够，又发现在 DP 过程中其实有很多空节点（$dp_{u, i} = 0$），这些空节点是无用的。所以自然地会想到动态开点。\n\n于是你就写出了线段树合并。\n\n---\n\n- [[Vani有约会] 雨天的尾巴 /【模板】线段树合并](https://www.luogu.com.cn/problem/P4556)\n\n  首先可以把区间修改通过差分变成单点修改。\n\n  对于 $u$，我们需要维护它每种救济粮的数量与最多的救济粮的种类，显然使用线段树维护。因为我们做了树上差分，所以 DFS 的时候要做一次树上前缀和，即将 $dp_u$ 和 $\\forall v \\in son(u), dp_v$ 合并起来。\n\n  于是就做完了。时间复杂度 $O(n \\log n)$，但常数极大。\n\n  > 另外记一种树链剖分的做法，其实就是离线的树剖。\n  >\n  > 先正常树剖一下，然后你就会得到 $\\log n$ 个 dfn 序连续的区间。\n  >\n  > 由于是离线，所以可以用差分标记这些区间。\n  >\n  > 所有操作结束后，用权值线段树进行一次前缀和即可。\n  >\n  > 时间复杂度 $O(n \\log^2 n)$，常数极小。\n\n- 【TBD】\n\n### 2025.7.13\n\n- A - [[UVA 12170] Easy Climb](https://onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=243&page=show_problem&problem=3322) & [[SPOJ CCROSS] Cross Mountain Climb](https://www.spoj.com/problems/CCROSS/)\n\n  ~~赛时基本想到了但是没做出来。~~\n\n  显然有 $O(nV)$ 的朴素 DP（单调队列优化）。\n\n  可以感知到，$\\forall i \\in [1, n], \\exists j \\in [1, n], h_i' \\equiv h_j (\\mathrm{mod}\\ d)$。（我也不知道我赛时是怎么感知到的，总之就是感知到了。）\n\n  即，$\\forall i \\in [1, n], \\exists j \\in [1, n], h_i' \\in \\{h_j + kd \\mid j \\in [1, n], k \\in [-n, n]\\}$，那么有效的值的个数就来到了 $O(n^2)$。（为什么我想到了又没做出来呢？因为我思考的时候把 $k$ 取到 $[-10^9, 10^9]$ 了，然后就不会了。）\n\n  进行一下离散化再 DP 即可。\n\n- B - [[黑暗爆炸 4160] Exclusive Access 2](https://vjudge.net/problem/%E9%BB%91%E6%9A%97%E7%88%86%E7%82%B8-4160)\n\n  赛时写了一个没有正确性的乱搞做法，得了 70 pts。\n\n  我们可以把原题转化一下，看成把原图分成若干层（若干部，更严格的说法是用反链覆盖原图，即 dilworth 定理），使得每一层内两个点互不直接相连，求最小层数。发现就是求图的色数。先 $O(n2^n)$ 预处理一个子集是否有直接相连的元素，再 $O(3^n)$ 做 DP 即可。\n\n### 2025.7.14\n\n- [[洛谷 P3623] [APIO2008] 免费道路](https://www.luogu.com.cn/problem/P3623)\n\n  一个做法是直接取 $k$ 条鹅卵石路。\n\n  可是发现这么做没有正确性。\n\n  因为容易发现有一些鹅卵石路是必选的。\n\n  那么我们可以先做一次 kruskal，并且先选水泥路，再选鹅卵石路。第一次被选中的鹅卵石路就一定包含了必选的鹅卵石路。\n\n  所以接下来只用再做一次 kruskal，先取够 $k$ 条鹅卵石路，再取水泥路。\n\n- [[洛谷 P8386] [PA 2021] Od deski do deski](https://www.luogu.com.cn/problem/P8386)\n\n  看了题解觉得很简单但是自己就是做不起的 DP。\n\n  首先容易发现一个合法的序列一定可以表示为若干个首尾相同的串相连。\n\n  换句话说，我们可以在一个合法的序列后面再加上一个首尾相同的串以得到一个新序列。\n\n  再换句话说，对于任意一个序列，我们可以通过在末尾增加一个特定的元素，让它与原序列中的某个相同元素匹配成一个区间，以让新序列合法。\n\n  考虑 DP，设 $dp_{i, j, 0/1}$ 表示考虑了 $[1, i]$，当前有 $j$ 个左端点（新数与它们匹配后能使新序列合法，并且它们被匹配一次后依旧可以被匹配），当前序列是否合法的方案数。那么有四种 DP 转移。\n\n  - $dp_{i - 1, j, 1} \\times j \\to dp_{i, j, 1}$，新加的元素与左端点匹配，原本合法的序列现在依旧合法。\n  - $dp_{i - 1, j - 1, 1} \\times (m - j + 1) \\to dp_{i, j, 0}$，原本合法且有 $j - 1$ 个左端点，现在增加一个无法匹配的元素使它不合法，但增加了一个左端点。\n  - $dp_{i - 1, j, 0} \\times j \\to dp_{i, j, 1}$，原本的序列不合法，现在增加了一个可以匹配的元素，使新序列合法。\n  - $dp_{i - 1, j, 0} \\times (m - j) \\to dp_{i, j, 0}$，原本不合法的序列，现在加一个无法匹配的元素，依旧不合法。\n\n  答案是 $\\sum_{j = 1}^n dp_{n, j, 1}$。注意到 $j \\le i$，所以时间复杂度是 $O(n^2)$。\n\n- HJJOI Day2 A 堆\n\n  先转化一下题意，看成先插入元素再删除元素。注意到，如果插入的元素是当前的最大元素，那么直接删除它；在这样的条件下，其它被删除的元素一定是单调不增的。所以只需要一个桶与一个指针维护当前的最大元素即可。\n\n- [[洛谷 P3960] [NOIP 2017 提高组] 列队](https://www.luogu.com.cn/problem/P3960)\n\n  [题解](/article/P3960-NOIP-2017-%E6%8F%90%E9%AB%98%E7%BB%84-%E5%88%97%E9%98%9F-%E9%A2%98%E8%A7%A3/)。\n\n- [[LOJ 6029] [雅礼集训 2017 Day1] 市场](https://loj.ac/p/6029)\n\n  挺有趣的势能线段树。\n\n  看到取模、开根这一类运算容易想到势能线段树，除法也是。但这道题的难点就在于难以看出是哪个数据最终会趋于不变。\n\n  动用人类智慧，发现是极差。对于加法操作，并不会改变极差，而除法至少可以让极差减半，即在 $\\log V$ 次内变为 $0$。\n\n  先写一个正常的线段树，然后单独实现除法操作。\n\n  注意到，当一个区间的极差为 $0$ 即所有元素相同时，区间除法相当于区间加法，所以直接做一个区间加标记即可。\n\n  另一个可以像上面这样处理的情况是，最初极差为 $1$，操作后极差依然为 $1$，此时区间除法与区间加法也是等价的。\n\n  单独讨论一下上述两种情况并直接返回，其它情况继续递归下去即可。\n\n  时间复杂度是 $O(q \\log n \\log V)$，不会证。\n\n  > 在 sjx 的讲义中，还讨论了最初极差为 $1$，操作后极差为 $0$ 的情况，此时区间除法等价于区间覆盖，所以似乎还要单独实现区间覆盖，导致代码更屎，所以干脆不讨论这种情况，直接暴力递归即可。（甚至可能会赢过两个 lazy tag 的常数。）\n\n### 2025.7.15\n\n- [[洛谷 P8990] [北大集训 2021] 小明的树](https://www.luogu.com.cn/problem/P8990)\n\n  终于也是洛谷首黑了。这题的转化好妙啊。\n\n  美丽的定义的转化如下：对于任意一个白点，它的子树中都是白点 $\\to$ 对于任意一个黑点，它的父亲一定是黑点 $\\to$ 所有的黑点构成一个连通块 $\\to$ 黑点个数减去黑边个数等于 $1$。当一棵树是美丽的，因为所有黑点构成一个连通块，所以白色连通块的数量等于黑白边的数量。于是我们就可以用一棵线段树维护每个时刻的黑色连通块数量（即黑点个数减去黑边数量）与白色连通块数量（即黑白边数量）。对于每一条边，容易处理出它在哪个时间段是一条黑边（可以给黑色连通块数量带来 $-1$ 的贡献），在哪个时间段是一条黑白边（可以给白色连通块数量带来 $+1$ 的贡献），当然改边也是容易处理的，实际就是撤销一条边再加一条新边。\n\n  这个时候还缺了一步。我们要求的并不是每个时刻的白色连通块数量之和，而是**黑色连通块数量为 $1$** 时的白色连通块数量之和。我们可以通过维护黑色连通块数量的 $mn, mncnt$ 与当黑色连通块数量取到 $mn$ 时对应时刻的白色连通块数量之和 $sum$ 来解决这个问题。修改白色连通块数量时，我们只需要将 $sum$ 加上 $mncnt \\cdot \\Delta$ 即可。由于在第 $n - 1$ 个时刻（与第 $n$ 个时刻）黑色连通块数量一定为 $1$，所以 $mn$ 一定为 $1$。\n\n- [[QOJ 7980] 区间切割](https://qoj.ac/contest/1457/problem/7980)\n\n  这不是人类智慧是什么？\n\n  先考虑离线下来，记 $time_i$ 表示位置 $i$ 被切割的时间，那么依次处理区间 $[1, n]$，就可以做到实时记录 $time$。对于一个区间，发现它在随机数据下，长度会快速减小，且最多被切割 $\\log m$ 次，所以可以每次直接找到当前区间内 $time$ 的最小值，然后从最小值对应位置处切割。但是对于非随机数据，一个区间可能会被切割 $m$ 次（从左往右切），显然不能沿用上面的做法。区间被切割的次数多的原因是有许多切割的位置都很靠近端点，导致长度减小缓慢。所以我们充分发扬人类智慧，对于一些靠近端点的切割操作，直接更新端点；对于一些处于区间中部的切割操作，再沿用上述做法。\n\n  可是“靠近端点”具体又应该是处于区间的什么位置呢（比如前 $\\frac 1 4$）？或者说“区间中部”的长度应该取到多少，才能既保证正确性又保证时间复杂度呢？\n\n  若中间块太长，则会导致区间长度减小依然缓慢，而当中间块较短时则可保证区间长度较快减小。所以我们要尽可能最小化中间块长度。若中间块太短，在进行一系列对区间两端的切割操作后，我们并不能保证中间块一定会被保留下来；而当中间块长度大于两侧长度时，在进行一系列对区间两端的切割操作后，我们一定可以保证中间块被保留。综上所述，我们只需要将区间三分即可。\n  \n  具体实现上，我们需要一棵线段树维护 $time$，它需要支持单点修改、区间查询（查询区间中间段的最小值）、查询给定位置左 / 右侧第一个小于给定值的位置（查询两端的切割情况）。对于第二类查询，需要使用线段树二分。对于区间的迭代，只需要按题解模拟即可，先直接更新左右端点，再进行区间切割。时间复杂度 $O(n \\log^2 m + m \\log m)$。\n  \n- [[Codeforces 461B] Appleman and Tree](https://codeforces.com/problemset/problem/461/B)\n\n  设 $dp_{i, 0/ 1}$ 表示考虑到第 $i$ 个点，当前点是否与黑点在一个连通块的方案数。转移时直接考虑是否删除当前边即可。\n\n- [[洛谷 P3177] [HAOI2015] 树上染色](https://www.luogu.com.cn/problem/P3177)\n\n  直接考虑染色对答案的贡献。设 $dp_{i, j}$ 表示考虑到第 $i$ 个点，以当前点位根的子树中有 $j$ 个黑点的贡献。做一个树上背包，价值是以儿子为根的子树与其他节点能产生的匹配次数（即经过当前边的次数）乘以当前边的权值。注意转移时要控制好变量的上下界，否则会被卡成 $O(n^3)$。\n\n### 2025.7.16\n\n踩一脚 2025.1.17，现在比那时候还是有了一些进步。（现在很难想象之前有段时间天天都只考几十分，接近垫底，但是竟然没觉得什么。）\n\n怎么说呢，教练和家长也都给我聊了好多次了，也是该到努力的时候了。我之前确实学习就没有真正用过全力，所以今天教练说我潜力很足，我也这么认为。只是说面临的困难也挺多的，比如我心理上的一些问题。我无法解决，所以只有尝试不想那些事情，尝试逃避问题。\n\n---\n\n今天上午考试，一道不会。下午应该是因为天气比较热，所以人有些浮躁，状态不是特别好，效率很低，听课也没怎么听进去，一天只做了一道题，也是成为了 HJJOI 集训期间的前缀最小值。\n\n- [[Codeforces 1967D] Long Way to be Non-decreasing](https://codeforces.com/problemset/problem/1967/D)\n\n  就当是学习基环树了。\n  \n  赛时看出来这题与基环树有关，可是居然没看出来是二分（打脸）。\n  \n  二分答案 $x$，转化为判定性问题，我们需要对 $a$ 中每个元素操作最多 $x$ 次使其单调不降。由于目标是单调不降，所以只需要使用一个变量 $lst$ 表示当前 $a$ 中的最后一个元素，那么一个新元素就需要在 $x$ 次操作以内变为一个不小于 $lst$ 的数。将 $lst$ 从小到大枚举，找到最小的 $lst$ 满足这个新元素可以在 $x$ 次操作以内变为 $lst$，若 $lst \\gt m$ 则无解，否则有解。\n  \n  那么现在就转化为了计算一个数在几次操作后能变为另一个数。对于所有 $i \\to b_i$ 建图，此时会形成一个内向基环树森林，我们只需要计算基环树上两点的距离，就是一个数转化至另一个数的操作次数。\n  \n  对于基环树的处理，可以使用并查集维护连通性，形成环时忽略当前边，使其形成一棵树。计算两点距离时需要分讨一下两点的位置关系。\n\n### 2025.7.17\n\n这两天状态不好，所以 7.17 和 7.18 都没做什么题，日祭也是 7.19 才补的。\n\n- [[洛谷 P5903] 【模板】树上 K 级祖先](https://www.luogu.com.cn/problem/P5903)\n\n  长链剖分的主要用法就是求树上 $K$ 级祖先和优化 DP。优化 DP 就类似于 dsu on tree，只是一个与树的大小有关，一个与树的深度有关。\n\n  求树上 $K$ 级祖先的方法如下：树剖时对于长度为 $len$ 的链，需要预处理出链顶的 $1 \\sim len$ 级祖先与 $1 \\sim len$ 级儿子（即链中元素）。另外还需要预处理出 $2^x$ 级祖先。对于每组询问，先向上跳 $2^{\\log K}$，此时当前点所在长链的长度至少为 $2^{\\log K}$。接下来再跳到当前链链顶，再向下或向上把剩下的跳了。\n\n### 2025.7.18\n\n- [[P4719] 【模板】动态 DP](https://www.luogu.com.cn/problem/P4719) & [[P4751] 【模板】动态 DP（加强版）](https://www.luogu.com.cn/problem/P4751) & [[P5024] [NOIP 2018 提高组] 保卫王国](https://www.luogu.com.cn/problem/P5024)\n\n  三倍经验是个好东西。\n\n  并不想记具体的过程，所以就大概记一下。\n\n  对于 P4719，可以先写一个朴素的 DP。对于每一次修改，就需要更新从当前点到根路径上的每个点。因为是路径更改，所有考虑~~熟练剖粪~~树链剖分。尝试把原来的 DP 方程写成一种神秘的矩乘形式，然后对于每一次修改就变成了修改路径上轻边的转移方程（矩阵），答案就是整棵树重链上的矩阵的乘积。\n\n  对于 P4751，我们只需要使用动态开点线段树，对于每一条重链单独开线段树，这样可以减少线段树的查询次数，可以优化至少 $\\frac 2 3$ 的常数。\n\n  对于 P5024，容易注意到最小覆盖集 = 全集 - 最大独立集，那么就可以直接做了。对于修改操作，若要强制选则将权值设为极小值，否则将权值设为极大值。注意算出来的答案是改变权值后的答案，所以输出时还要稍微处理一下。\n\n### 2025.7.21\n\n- [[洛谷 P8352] [SDOI/SXOI2022] 小 N 的独立集](https://www.luogu.com.cn/problem/P8352)\n\n  DP 套 DP 板子。设 $dp_{u, i, j}$ 表示考虑到点 $u$，强制不选的答案为 $i$，不强制不选的答案为 $i + j$，直接转移即可。（其实是我不想写。）\n\n- [[洛谷 P5904] [POI 2014] HOT-Hotels 加强版](https://www.luogu.com.cn/problem/P5904)\n\n  长链剖分优化 DP 板子。\n\n  对于原题，容易写出一个 $O(n^2)$ 的 DP，发现 DP 数组的大小与深度有关，所以进行长链剖分即可。","tags":["日祭"],"categories":["OI","记录"]},{"title":"【数据删除】机房规则怪谈","url":"/article/CW-机房规则怪谈/","content":"\n原文作者为 [$\\text{\\color{red}{T}\\color{black}{wilight\\_star}}$](https://www.luogu.com.cn/user/749406)，本文由 [$\\text{\\color{red}{G}\\color{black}{etaway\\_Car}}$](https://www.luogu.com.cn/user/725640) 补充。\n\n以下内容如果你认为侵犯了你的隐私或引起了你的不满，请联系我删除；如需修正或投稿，也请私信我。\n\n另：本文不区分“他”、“她”与“它”。\n\n# 【数据删除】 机房规则怪谈\n\n## 常规篇\n\n- 如果你早上 7:30 以后才到机房并且在路上 or 机房门口遇见一个戴眼镜、板着脸的中年男子。请$\\color{red}不要与他对视$，并且要尽可能将自己装成是国际部的学生。注意，$\\color{red}\\text{他}$ 不属于这个机房，请不要让他注意到你是信竞学生。\n\n- 如果你在早上 7:40 发现机房里有除了上一条所述的中年男子以外的其他成年人在机房，请保持镇定并且快速离开。记住，$\\color{red}\\text{【数据删除】}\\ 信竞老师从不在\\ 7:40\\ 以前到达教室$，$\\color{red}\\text{他}$ 不是你的老师。\n\n- 如果你看到从门数第四列最靠近讲台的学生 [$\\text{\\color{red}{T}\\color{black}{wilight\\_star}}$](https://www.luogu.com.cn/user/749406) 上午没有睡觉，请立即联系祝老师，$\\color{red}\\text{他}不是$ [$\\text{\\color{red}{T}\\color{black}{wilight\\_star}}$](https://www.luogu.com.cn/user/749406)。\n\n- 当你早上十分困时，可以选择在机房睡觉，这样你会体验到 [$\\text{\\color{red}{y}\\color{black}{ishu2}}$](https://www.luogu.com.cn/user/17126) 专属叫醒服务。如果他不让你在机房睡，你可以去外面小桌子处睡觉。记住，你无法在困的时候做题，睡眠是最重要的。\n\n- 记住，每节课间 [$\\text{\\color{red}{d}\\color{black}{onaldqian}}$](https://www.luogu.com.cn/user/1033933) 都会贴在某个人后面，或者待在自己位置上看原神视频。如果他没有这样做，那么你眼前的人$\\color{red}绝对不是$ [$\\text{\\color{red}{d}\\color{black}{onaldqian}}$](https://www.luogu.com.cn/user/1033933)。请联系班长解决。\n\n- 如果你的电脑在开机时$\\color{red}没有卡顿$，请立即换一台电脑，小心 $\\color{red}他$ 在你写代码写到 $\\text{5KB}$ 时突然蓝屏。时刻记住，$\\color{red}\\text{【数据删除】}\\ 没有不卡顿的电脑$。\n\n- 如果有一天中午你发现 [$\\text{\\color{red}{W}\\color{black}{WW\\_bilibili\\_com}}$](https://www.luogu.com.cn/user/999916) 比你到机房更晚，请$\\color{red}\\text{立刻将他驱逐出境}$，因为他$\\color{red}绝对不是$ [$\\text{\\color{red}{W}\\color{black}{WW\\_bilibili\\_com}}$](https://www.luogu.com.cn/user/999916)。\n\n## 学习篇\n\n- 请不要相信 vjudge 专题上的排行榜，因为$\\color{red}有人藏题$。请不要藏题，这会使得大家都很愤怒。\n\n- 当你听 [$\\text{\\color{red}{J}\\color{black}{DScript0117}}$](https://www.luogu.com.cn/user/910593) 讲题时，如果你听不懂，必须保持微笑并适当地回应 [$\\text{\\color{red}{J}\\color{black}{DScript0117}}$](https://www.luogu.com.cn/user/910593) 的问题，可以点头但是频率不能太快。$\\color{red}不要被他发现你听不懂$，不然$\\color{red}会有严重后果$。\n\n\n## 考试篇\n\n- 当你遇见 [$\\text{\\color{red}{J}\\color{black}{DScript0117}}$](https://www.luogu.com.cn/user/910593) 出的模拟赛时，你可以选择请假，如果无法请假，请提前准备好消遣时间的方式，并且$\\color{red} 不要让他发现$，否则会有$\\color{red} 可怕的事情发生$。 \n- 考试时，如果发现 [$\\text{\\color{red}{J}\\color{black}{DScript0117}}$](https://www.luogu.com.cn/user/910593) 四处走动并且询问你的做题情况。$\\color{red}请不要理会他$，因为他要 $\\color{red}【数据删除】$ 了。此行为会让你的心态大幅下降，并影响你的专注度。\n- 你可以选择在开考后 1 min 开始猛敲键盘，让大家以为你已经切了一道题。不过，请适当使用该方法，$\\color{red}不然有可能被别人真实$。\n- 输出样例是一个好方法。\n- 当你发现有人 AK 模拟赛时，请立即仔细阅读其代码，并严格比对正解并尝试 hack，记住 $\\color{red}\\text{【数据删除】}\\ 模拟赛的 \\ \\text{AK}\\ 频率是\\ 1\\ 位/\\ 20\\ 场$（[$\\text{\\color{red}{J}\\color{black}{DScript0117}}$](https://www.luogu.com.cn/user/910593) 除外）。\n\n## 班长篇\n\n- 你可以永远相信你的班长，他会帮助你。\n- 当班长让大家保持安静时，请务必保持安静。不然$\\color{red}你会为此付出代价$。\n- 班长会视奸你们每一个人。\n\n# 机房生物图鉴\n\n## [$\\text{\\color{red}{y}\\color{black}{ishu2}}$](https://www.luogu.com.cn/user/17126)\n\n- 刷新频率：$\\text{\\color{green}{Common}} \\sim \\text{\\color{darkgrey}{Unique}}$\n\n  有时一整天都在机房，有时几天都不来机房。\n\n- 属性：~~**敌对**，会随时视奸机房里的每一个人~~\n\n- 获得好感方式：\n\n  - 认真学习 OI\n  - 在模拟赛 or 正式比赛中取得优异的成绩\n  - 造数据\n  - 讲题\n\n- 可能激怒他的行为：\n\n  - 在机房打游戏（激怒概率 $+\\infty\\%$）\n  - 在上课时段水（激怒概率 $90\\%$）\n  - 在上课时段说话（激怒概率 $80\\%$）\n  - 不认真对待模拟赛（激怒概率 $90\\%$）\n  - 上课睡觉（$100\\%$ 提供叫醒服务）\n  - whk 选手 whk 没考好（激怒概率 $200\\%$）\n\n- 应对方法：\n\n  - **认真学习 OI！**\n\n## [$\\text{\\color{red}{J}\\color{black}{DScript0117}}$](https://www.luogu.com.cn/user/910593)\n\n- 刷新频率：$\\color{purple} \\text{Epic}$\n\n  经常 disappear 去打球，晚自习经常消失。在机房刷新概率较低，经常说批话。\n\n- 属性：**中立**，可能具有攻击性\n\n- 获得好感方式：\n\n  - 陪他一起打羽毛球\n  - 给他彩虹糖\n  - 听他讲课并且完完全全听懂并且能回答对他的所有问题\n  - 帮他调**对**NOI模拟赛的代码\n  - 帮他验对他出的题并给出更优做法\n\n- 可能激怒他的行为：\n\n  - 听不懂还装懂（激怒概率 $101\\%$）\n  - 不听他讲题（激怒概率 $90\\%$）\n  - 模拟赛分数比他低（$110\\%$ 触发嘲讽技能）\n  - 做不起“唐B题”、“板子题”或询问“很唐的问题”（ $80\\%$ 概率触发辱骂技能，$50\\%$ 概率触发愤怒 ）\n  - 他自己挂分了（会触发红温技能）\n\n- 应对方法：\n\n  - 变得比他更强\n  - 在模拟赛中考得比他高\n  - 在他讲题前将题目 A 掉，这样 [$\\text{\\color{red}{y}\\color{black}{ishu2}}$](https://www.luogu.com.cn/user/17126) 就不会找他讲题了（最优解法）\n  - 在听他讲题时全部听懂\n  - 在听他讲题时没听懂，但是仍然笑脸相迎，时不时点头，注意频率不能过快。\n\n## [$\\text{\\color{red}{T}\\color{black}{wilight\\_star}}$](https://www.luogu.com.cn/user/749406)\n\n- 刷新频率：$\\text{\\color{red}{Lengendary}}$\n\n  经常请假，原因是身体不好，实则是自己在家里内卷。\n\n- 属性：**友方**，是一位友善的班长\n\n- 获得好感方式：\n\n  - ？\n\n- 可能激怒他的行为：\n\n  - 在他做题的时候揉他的脸（激怒概率 $30\\%$）\n  - 莫名奇妙揉他（激怒概率 $50\\%$）\n  - 上课时段太吵（$70\\%$ 触发管理技能）\n\n- 应对方法：\n\n  - 揉他适可而止，注意察言观色\n  - 在上课时段保持安静","tags":["休闲娱乐"],"categories":["休闲娱乐"]},{"title":"比亚迪吹气球大战","url":"/article/比亚迪吹气球大战/","content":"\n## SCCPC 游记\n\n### Day $-\\infty$\n\n前两天才打完 CQ CCPC 并被 jmr 带飞并写了[游记](https://www.luogu.com.cn/article/0lgncx4c)，今天就听说 SC CCPC 已经分组了。\n\n太好了，终于不和 jmr 一组了，这次和 Kaka 一组。（甚至还是二人队伍。）~~上次连上机的机会都没有呜呜呜。~~\n\n### Day $-\\infty + x$\n\n诶诶诶，初三的那几天要军训，所以不能和 Kaka 一组了。\n\n最后和 @[_O_v_O_](https://www.luogu.com.cn/user/782941) 大佬讨论了一下，和他与 @[maichong](https://www.luogu.com.cn/user/955369) 大佬一组了。\n\n### Day $-\\infty + x + 1$\n\n取队名了，叫做 ``rk -1 蒟蒻``。\n\n### Day $-\\infty + y$\n\n结果初三的军训可以请假，他们又可以去了。\n\n### Day $-1$\n\n今天早上从 CD 出发去 LS，中午去吃了临江鳝丝，下午在酒店写作业，晚上和 @[_O_v_O_](https://www.luogu.com.cn/user/782941) 与 @[JDScript0117](https://www.luogu.com.cn/user/910593) 一起吃饭逛街。\n\n### Day $0$\n\n酒店就在学校旁边可是还开了车。~~路上因为买包子还被开了罚单，How sweet~~!\n\n到了学校，签了到，面积了两个人，入场准备开始。\n\n本来说好一人看几道题，结果开赛后也是直接开始乱看，我们的 _O_v_O_ 大佬也是在开赛 $50\\mathrm{min}$ 内贡献了 $I\\ -3$。接下来 maichong 大佬于 $65\\mathrm{min}$ 贡献了 $J\\ +$。在接下来的 $20\\mathrm{min}$ 内，我又想了想 $H$，_O_v_O_ 继续在想 $I$。我在 $88\\mathrm{min}$ 终于贡献 $H\\ +$。\n\n接下来，_O_v_O_ 觉得 B 及其简单，于是开始写 B，结果挂了。后来 _O_v_O_ 觉得是他的实现太差，然后就又给我讲了做法并让我写。我读了题可依旧没发现这个做法有什么问题，于是就开始写。写完了，交，又挂了。再仔细思考，发现是 _O_v_O_ 看错了题，最终贡献 $B\\ -2$。\n\n在这期间，我写了 $F$，可是中间因为一个小问题与见祖宗去了贡献 $F\\\\ -2\\\\ \\\\& +$。这期间其实 _O_v_O_ 和 maichong 也写了 $A$，一直没调出来，结果发现题目是单向边，他们写的双向边。\n\n此时时间是 $215\\mathrm{min}$。我也不知道为什么做得这么慢啊。\n\n接下来，我们的 _O_v_O_ 和 maichong 继续在写 $A$，最终贡献 $A\\ -9$，依旧没调出来。_O_v_O_ 转战 $K$，以为是什么玄学时间复杂度的暴力，结果挂了。\n\n在写完 $F$ 之后，我发现一个气球极其漏气，于是取下来各种方式吹，各种方式玩。（比如把气球的气放到自己嘴巴里之类的。）后来另一个气球也有点漏气（谴责 LSSFXY 打气球时没绑紧），于是 _O_v_O_ 也加入了我，我们 **一 起 吹 气 球**！只剩下 maichong 一个人还在专心做题，因为 $A$ 是调不出来一点。\n\n$310\\mathrm{min}$ 完赛，中间是因为设备原因全场推迟了 $10\\mathrm{min}$ 结束。于是就真成 CW rk -1 了。","tags":["XCPC","ACM"],"categories":["OI","游记"]},{"title":"2025 年 6 月日祭","url":"/article/diary/2025/06/","content":"\n### 2025.6.2 问我怎么挂的\n\n今天做题。\n\n- [[洛谷 P2833] 等式](https://www.luogu.com.cn/problem/P2833) & [[SGU 106] The equation](https://codeforces.com/problemsets/acmsguru/problem/99999/106)\n\n  板子题啊，可是改了好久。主要死在向下、向上取整时没用 ``double``（因为有负数）。\n\n- [[SPOJ NWERC11A] Binomial coefficients](https://www.spoj.com/problems/NWERC11A/)\n\n  这道题自己想到了枚举 $k$，二分 $n$，也想到了会爆 ``long long``，可是没想到枚举。\n\n  对于 $k \\in [1, 6]$，进行二分；对于 $k \\in [7, 30]$，枚举即可。\n\n  做的时候因为各种小问题挂了 $+\\infty$ 发。\n\n- [[洛谷 P2421] [NOI2002] 荒岛野人](https://www.luogu.com.cn/problem/P2421)\n\n  挺简单的呀。**问我怎么挂的**，其实是把 $y$ 写成 $b$ 了。还有另外一些小错。（比如步长写错了，还有负数导致的一些奇怪的问题。）\n\n  枚举 $m$ 与每一对人，解 $c_i + p_ik \\equiv c_j + p_jk\\ (\\mathrm{mod}\\ m)$ 即可。\n\n- [[SGU 107] 987654321 problem](https://codeforces.com/problemsets/acmsguru/problem/99999/107)\n\n  没想到是打表题。打表发现满足要求的九位数有 $8$ 个，十位数自然就有 $72$ 个。（原有基础上在开头加一个数。）十位数以上，每多一位，答案自然就 $\\times 10$。九位数以下答案为 $0$。\n\n### 2025.6.3\n\n- [[SGU 126] Boxes](https://codeforces.com/problemsets/acmsguru/problem/99999/126)\n\n  神秘结论题。设 $n = a + b$。模拟一个倒推的过程，容易发现，当且仅当 $a, b = \\frac{i}{2^m} n$ 时有解，其中 $i$ 是奇数，$m$ 是整数。若有解，模拟即可。\n\n### 2025.6.27\n\n也是莫名其妙断更了一个月。\n\n也是终于把别样的 whk 草过去了。\n\n今天补日祭。\n\n**欧拉函数、欧拉定理与线性筛专题**\n\n- 欧拉函数 $\\varphi(n) = \\sum_{i = 1}^n [\\gcd(i, n) = 1]$\n- 欧拉定理 $a^{\\varphi(n)} \\equiv 1 \\mod n$\n- 满足 $\\gcd(i, n) = m$ 的数的个数 $\\Leftrightarrow$ 满足 $\\gcd(i, \\frac n m) = 1$ 的个数 $\\Leftrightarrow\\ \\varphi(\\frac n m)$。\n- $\\sum_{i \\in [1, n] \\land \\gcd(n, i) = 1} i = \\frac{n \\cdot \\varphi(n)} 2 (n \\ne 1)$\n\n利用以上结论即可完成：\n\n- [[HDU 2588] GCD](https://acm.hdu.edu.cn/showproblem.php?pid=2588)\n- [[51Nod 1040] 最大公约数之和](https://vjudge.net/problem/51Nod-1040)\n- [[UVA 11426] GCD - Extreme (II)](https://onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=2421)\n- [[洛谷 P1891] 疯狂 LCM](https://www.luogu.com.cn/problem/P1891)\n\n---\n\n- [[Codeforces 1149D] Abandoning Roads](https://codeforces.com/problemset/problem/1149/D)\n\n  CF 3000* 远古题，洛谷黑，所以也算是首黑吗。\n\n  这题复杂度鬼能想出来。\n\n  首先先把重边断掉，这样就会形成若干个连通块。将这些连通块“缩点”之后，用 dij 做新图的最小生成树即可。具体地，设 $dp_{i, st}$ 表示当前在第 $i$ 个点，已经到达的连通块为 $st$ 的最短路径。显然每个连通块只会被访问一次，所以复杂度是 $O(2^nm\\log 2^nm)$ 的。注意到当一个连通块的大小 $\\le 3$ 时，若先离开这个连通块再回到这个连通块，至少要经过 $2$ 条重边，而走连通块内部只需要最多 $2$ 条轻边，所以显然不需要考虑这个连通块，因为跑 dij 的时候显然会选择走连通块内部而不会重复经过。那么连通块数量被优化到了 $\\frac n 4$，时间复杂度 $2^{\\frac n 4}m \\log 2^{\\frac n 4}m$。\n\n### 2025.6.30\n\n今日歌曲：Down Bad\n\n昨天终于也是稳 1= 了。\n\n今天补题。\n\n- [[Atcoder ARC180D] Division into 3](https://atcoder.jp/contests/arc180/tasks/arc180_d)\n\n  很久之前一场模拟赛的题了。\n\n  一件显然的事情，就是一个区间的最大值 $mx$ 一定会做出贡献。若 $mx$ 放在第二段，那么当第一段与第三段的长度为 $1$ 时可以取到最小值，用 ST 表维护即可。若 $mx$ 放在第一段，那么当第二段长度为 $1$ 可以取到最小值。设 $x = \\min_{i = l}^r i \\cdot [a_i = mx], f_i = a_i + \\max_{j = i + 1}^r a_j$，那么答案即为 $mx + \\min_{i = x + 1}^{r - 1} f_i$。将询问离线再用单调栈与线段树维护 $f_i$ 即可。若 $mx$ 放在第三段，则与放在第一段类似。\n\n- [[洛谷 P6864] [RC-03] 记忆](https://www.luogu.com.cn/problem/P6864)\n\n  这道题显然是之前记过的，今天终于补了。","tags":["日祭"],"categories":["OI","记录"]},{"title":"[ABC407F] Sums of Sliding Window Maximum 题解","url":"/article/ABC407F-Sums-of-Sliding-Window-Maximum-题解/","content":"\n一眼题啊。设 $a_i$ 左侧第一个**不比它小**的数的位置为 $lft_i$，它右侧第一个**比它大**的数的位置为 $rgt_i$。（这样可以保证既不漏算又不重复计算。）那么对于 $a_i$，它可能作为最大值的极长区间显然是 $(lft_i, rgt_i)$。这个区间又被 $a_i$ 分为左右两段。设两段中较短的一段长度为 $mn = \\min\\\\{i - lft[i], rgt[i] - i\\\\}$，较长一段长度为 $mx = \\max\\\\{i - lft[i], rgt[i] - i\\\\}$，总长度为 $len = rgt_i - lft_i + 1$。那么 $a_i$ 可以带来以下贡献：\n\n- $\\forall k \\in [1, mn], ans_k \\leftarrow ans_k + k \\cdot a_i$；\n\n- $\\forall k \\in (mn, mx], ans_k \\leftarrow ans_k + mn \\cdot a_i$；\n\n- $\\forall k \\in (mx, len], ans_k \\leftarrow ans_k + (len + 1 - k) \\cdot a_i$。\n\n将第三组式子拆为：\n\n- $\\forall k \\in (mx, len], ans_k \\leftarrow ans_k + (len + 1) \\cdot a_i, ans_k \\leftarrow ans_k - k \\cdot a_i$。\n\n于是维护两个差分数组即可。第一个差分数组 $c1_i$ 维护的实际值就是 $c1_i$，第二个差分数组 $c2_i$ 维护的实际值是 $i \\cdot c1_i$。\n\n于是就做完了。\n\n[提交记录](https://atcoder.jp/contests/abc407/submissions/66119295)。","tags":["数据结构","计数"],"categories":["OI","题解"]},{"title":"[ARC147C] Min Diff Sum 题解","url":"/article/ARC147C-Min-Diff-Sum-题解/","content":"\n本文提供一种另类做法。~~虽然我的代码从实现以及常数上都更劣一些。~~\n\n考虑原式的几何意义，即在数轴上的 $n$ 个区间内各选一个点使得这 $n$ 个点两两距离之和最小。\n\n考虑什么时候距离之和最小，显然是所有点都尽量向某一个位置靠拢时。所以钦定中心点，让其它所有点都尽量向这个点靠拢，再暴力计算贡献。时间复杂度 $O(n^2V)$。\n\n注意到，中心点取在非端点显然时不会更优，所以可以离散化。时间复杂度 $O(n^3)$ 。\n\n现在考虑优化计算原式的过程。考虑拆贡献。$n$ 个点把数轴分成 $n - 1$ 条线段（以及两条射线）,那么第 $i$ 条线段就会被计算 $i \\cdot (n - i)$ 次。这是显然的。那么我们可以现将这 $n$ 个点排序，再按上述过程计算。时间复杂度 $O(n^2 \\log n)$。\n\n容易发现，在中心点移动的过程中，有许多点的位置并不会随着中心点位置的改变而改变，所以考虑动态维护每个点的位置以及贡献。设当前中心点位置为 $pos$，可以把 $n$ 个点分成 $3$ 段：\n\n- $r_i \\lt pos$，这些点的位置固定在了 $r_i$，不会再改变。\n\n- $l_i \\le pos \\le r_i$，这些点的位置会随着中心点位置的改变而改变，且它们的位置都是 $pos$。\n\n- $pos \\lt l_i$，这些点的位置暂时固定在了 $l_i$。\n\n那么我们可以动态维护这三段的端点。当 $pos$ 遇到了一个左端点时，相当于将一个点从第三段移到第二段；当 $pos$ 遇到了一个右端点时，相当于把一个点从第二段移到了第一段。\n\n在此同时，动态维护每段内部的贡献。第一三段的贡献只需要在遇到端点时更新，第二段内部显然没有贡献。$总贡献 = 第一段的贡献 + 一二段交界处贡献 + 二三段交界处贡献 + 第三段的贡献$。\n\n于是这道题就做完了。\n\n[提交记录](https://atcoder.jp/contests/arc147/submissions/66184899)。","tags":["模拟"],"categories":["OI","题解"]},{"title":"别样的罚时大战","url":"/article/别样的罚时大战/","content":"\n本文是一篇 **CQ CCPC** 流水帐游记，想了解题目做法的请移步。\n\n### Day $-\\infty$\n\n和 qcz, jmr 分到一组了。赛后一结算，jmr 是 MVP，hyc 是躺赢狗。\n\n队名叫作 grass8cao。\n\n### Day $-\\infty + 1$\n\n时间安排出来了，结果是当天坐高铁往返，早上 6:20 就出发呜呜呜。\n\n### Day 0\n\n早上 5:50 就起床了。\n\n9 点左右高铁到达重庆西。\n\n10点过一点到考场开始比赛。策略是 jmr 和 qcz 轮着写代码，我负责翻译和想点子。\n\n1:18 AC 了 6 道题，~~一共吃了整整 4 发罚时~~。\n\n接下来的 50 分钟内，jmr 把 E 过了，甚至还是首 A。\n\n随后又用了半个小时写 D。\n\n之后 jmr 开始写 DS G 题。写了一个小时，~~吃了 5 发罚时后~~，终于在封榜之前过了，还是首 A。这几道题我们的策略是：“赢在过题数上，不赢在罚时上，~~罚时已经不重要了~~！”\n\n在封榜之前，基本都是 Zi_Gao 的队第一，我们以同样的 AC 数~~与优秀的罚时~~紧随其后。\n\n于是 qcz 又继续写前面没写完的 J。在 jmr 的 $+\\infty$ 组 hack 与~~**整整 9 发罚时**~~之后，也是终于调过了。\n\n此时已经 4:31。我在 jmr 休息的时候告诉他 I 可做，可是最开始我没讲清楚，他也没听。后来他突然会 I 了，相比 K 的 NTT，这道欧拉回路显然更好写。于是 jmr 果断选择 I，20 分钟后 AC。~~中间吃了一发罚时~~。\n\n此时 4:51，基本已经没有悬念了（吗？）。\n\n可这时我们发现了几个 BYD 藏题哥，于是开始担心。不过算一算，前五是没问题，因为算上 Zi_Gao 一个队在前面，还有大概三队藏题哥。\n\n比赛结束了，可还没解榜。后来问 Zi_Gao 他们队，结果他们封榜之后就没写了，最终定格在 9 题。\n\n后来吃了火锅上了大巴不知道过了多久，终于看到榜单了。结果那几队藏题哥的许多题都没过。于是就以 11 道题与~~优秀的 21 发罚时~~的成绩成为榜一。\n\n于是我就真的成为躺赢狗了。躺着拿（成绩等同）金牌与家长老师的各种表扬。","tags":["XCPC","ACM"],"categories":["OI","游记"]},{"title":"[ABC145F] Laminate 题解","url":"/article/ABC145F-Laminate-题解/","content":"\n想必大家都会积木大赛。\n\n若修改 $h_i$，考虑如何让它带来的贡献最小。根据积木大赛的结论，只需让 $h_i' \\in [\\min\\{h_{i - 1}, h_{i + 1}\\}, \\max\\{h_{i - 1}, h_{i + 1}\\}]$，这个位置就不会带来任何的贡献，可以认为我们删除了第 $i$ 个位置。显然，$\\forall i \\in [1, n]$，总存在 $h_i'$ 满足以上条件。\n\n那么问题就变成了，原本有 $n$ 个位置，可以删除最多 $k$ 个位置，求最小答案。于是自然而然地想到了 DP。\n\n设 $dp_{i, j, k}$ 表示现在在第 $i$ 个位置，删除了 $j$ 个位置，上一个没有被删除的位置是 $k$ 的最小答案。转移方程：\n\n$$\ndp_{i, j, k} =\n\\left \\\\{\n\\begin{aligned}\n& dp_{i - 1, j - 1, k},\\ k \\in [0, i) \\newline\n& \\min_{p \\in [0, i)}\\{dp_{i - 1, j, p} + \\max\\{h_i - h_p, 0\\}\\},\\ k = i\n\\end{aligned}\n\\right.\n$$\n\n时间复杂度 $O(n^3)$。\n\n[提交记录](https://atcoder.jp/contests/abc145/submissions/65585483)。","tags":["DP"],"categories":["OI","题解"]},{"title":"[ARC197D] Ancestor Relation 题解","url":"/article/ARC197D-Ancestor-Relation-题解/","content":"\n好题啊好题。记 $b_i$ 表示矩阵的第 $i$ 行的内容（用 bitset 维护）。\n\n考虑什么时候有 $a_{u, v} = 1$。因为与孩子有关系的节点一定与祖先有关系，但与祖先有关系的节点不一定与孩子有关系。所以有 $b_u | b_v = b_u$ 或 $b_u | b_v = b_v$，前者对应 $u$ 是 $v$ 的祖先，后者则对应 $v$ 是 $u$ 的祖先。容易证明这是一个充要条件，那么若 $a_{u, v} = 0$，则一定不存在 $b_u | b_v = b_u$ 与 $b_u | b_v = b_v$。\n\n接下来考虑一种特殊情况：$b_u = b_v$，此时 $u, v$ 在一条没有任何分岔的一条“链”上，那么这条链上的节点的位置就可以互换。设一组 $b_i$ 相同的点的数量为 $sz$，那么这一组点可以带来 $sz!$ 的贡献。\n\n此外，$\\forall i \\in [1, n]$，显然需要有 $a_{i, 1} = 1, a_{1, i} = 1$。那么我们就总结出以下三条条件或贡献：\n\n- $\\forall i \\in [1, n], a_{i, 1} = 1, a_{1, i} = 1$。\n- $b_u | b_v = b_u$ 或 $b_u | b_v = b_v$，当且仅当 $a_{u, v} = 1$。（等价于：$a_{u, v} = 1$，当且仅当 $b_u | b_v = b_u$ 或 $b_u | b_v = b_v$。）\n- 对于极多的 $sz$ 个 $b_i$ 相同的数，可以带来 $sz!$ 的贡献。\n\n于是按以上三点计算即可。时间复杂度 $O(\\frac{n^3}{w})$。\n\n[提交记录](https://atcoder.jp/contests/arc197/submissions/65525469)。","tags":["计数","bitset"],"categories":["OI","题解"]},{"title":"2025 年 5 月日祭","url":"/article/diary/2025/05/","content":"\n今日歌曲：Fifteen\n\n又断更了半个月。\n\n前几周学了一下 AC 自动机，~~但是**学了跟学了一样**。~~\n\n前几天终于把那套题出完了，~~但是**出了跟出了一样**。~~\n\n昨天考试，听了评讲，~~但是**改了跟改了一样**。~~\n\n晚上打 ARC，~~但是**打了跟打了一样**。~~\n\n- [[Atcoder ARC197C] Removal of Multiples](https://atcoder.jp/contests/arc197/tasks/arc197_c)\n\n  唐题啊，但是赛时一直在想整除分块之类的，结果没想出来。\n\n  但是这题也就真纯唐，用线段树维护区间内留下的数的数量即可。需要证个上界。\n\n- [[Atcoder ARC197D] Ancestor Relation](https://atcoder.jp/contests/arc197/tasks/arc197_d)\n\n  好题啊好题。记 $b_i$ 表示矩阵的第 $i$ 行的内容（用 bitset 维护）。\n\n  考虑什么时候有 $a_{u, v} = 1$。因为与孩子有关系的节点一定与祖先有关系，但与祖先有关系的节点不一定与孩子有关系。所以有 $b_u | b_v = b_u$ 或 $b_u | b_v = b_v$，前者对应 $u$ 是 $v$ 的祖先，后者则对应 $v$ 是 $u$ 的祖先。容易证明这是一个充要条件，那么若 $a_{u, v} = 0$，则一定不存在 $b_u | b_v = b_u$ 与 $b_u | b_v = b_v$。\n\n  接下来考虑一种特殊情况：$b_u = b_v$，此时 $u, v$ 在一条没有任何分岔的一条“链”上，那么这条链上的节点的位置就可以互换。设一组 $b_i$ 相同的点的数量为 $sz$，那么这一组点可以带来 $sz!$ 的贡献。\n\n  此外，$\\forall i \\in [1, n]$，显然需要有 $a_{i, 1} = 1, a_{1, i} = 1$。那么我们就总结出以下三条条件或贡献：\n\n  - $\\forall i \\in [1, n], a_{i, 1} = 1, a_{1, i} = 1$。\n  - $b_u | b_v = b_u$ 或 $b_u | b_v = b_v$，当且仅当 $a_{u, v} = 1$。（等价于：$a_{u, v} = 1$，当且仅当 $b_u | b_v = b_u$ 或 $b_u | b_v = b_v$。）\n  - 对于极多的 $sz$ 个 $b_i$ 相同的数，可以带来 $sz!$ 的贡献。\n\n  于是按以上三点计算即可。\n\n### 2025.5.18 宇宙射线\n\n由于**宇宙射线**的影响，这里遗失了一篇日祭。主播不想补日祭了。\n\n前几天又断更了，应该是在补 CQ CCPC 的题吧。主播不想补日祭了。\n\n（我明明写了的，可不知道这篇日祭怎么就消失了。）\n\n### 2025.5.22 主播不想补日祭\n\n今日歌曲：High Infidelity\n\n前天又学了一下 exgcd。**主播不想补日祭**了。\n\n今天考试。\n\n- A - 三重移位 （[[Atcoder ARC136B] Triple Shift](https://atcoder.jp/contests/arc136/tasks/arc136_b)）\n\n  略为神秘。观察到，进行一次操作后，逆序对个数的变化量一定是偶数，所以 $a$ 与 $b$ 的逆序对个数的差值必须是偶数。另外，当 $a$ 中存在重复的元素，那么相当于可以造一对逆序对出来，此时一定有解。\n\n- B - 最小差分和 （[[Atcoder ARC147C] Min Diff Sum](https://atcoder.jp/contests/arc147/tasks/arc147_c)）\n\n  [题解](/article/ARC147C-Min-Diff-Sum-题解/)。\n\n  更好的做法如下：假设当前 $x$ 有序，那么可以拆贡献。拆下来是 $\\sum_{i = 1}^\\frac{n}{2} (n - 2i + 1)(x_{n +1 - i} - x_i)$。于是让 $x_{n + 1 - i}$ 尽量小，$x_i$ 尽量大。将 $l$ 降序排序，将 $r$ 升序排序即可。（主播不想写了，看不懂就去看原题题解吧。）\n\n- C - 前缀与后缀 （[[洛谷 P9180] [COCI 2022/2023 #5] Slastičarnica](https://www.luogu.com.cn/problem/P9180)）\n\n  [To do]\n\n- D - 贪吃蛇 （[[洛谷 P7078] [CSP-S2020] 贪吃蛇](https://www.luogu.com.cn/problem/P7078)）\n\n  [To do]\n\n### 2025.5.24 竟然草过去了\n\n今日歌曲：You're on Your Own, Kid\n\n今天叕考试。\n\n- A - 红魔乡 （[[TopCoder 15693] Fixed Point Reversals](https://vjudge.net/problem/TopCoder-15693)）\n\n  显然好做。把翻转区间看成交换元素即可，唯一的限制是当交换的两个元素在 $pos$ 的两侧时，这两个元素需要关于 $pos$ 对称。\n\n- B - 妖妖梦 （[[洛谷 P4576] [CQOI2013] 棋盘游戏](https://www.luogu.com.cn/problem/P4576)）\n\n  当且仅当黑棋和白棋出生在一起时，白棋能赢，否则赢家一定是黑棋。那么黑棋就尽量快速解决战斗，白棋就尽量多拖延，所以白棋转移状态时取最大值，黑棋选择状态时取最小值即可。\n\n- C - 永夜抄 （[[TopCoder 10945] Rectangular Island](https://vjudge.net/problem/TopCoder-10945)）\n\n  ``long double`` 还是太玄学了，**竟然草过去了**。发现左右移动和上下移动其实是相对独立的，所以单独处理即可。设 $row_i$ 表示在左右方向上移动了 $i$ 步，还在格子里的概率，$col_i$ 同理，它们是可以 $O(ns)$ 处理出来的。接下来枚举 $i$ 表示左右方向上移动的次数，那么此时的贡献应该是 $row_i \\cdot col_{s - i} \\cdot {s \\choose i} \\cdot \\frac{1}{2^s}$。$s \\choose i$ 显然容易维护，可是发现 $\\frac{1}{2^s}$ 这东西容易炸掉，又发现在计算 $row_i$ 和 $col_{s - i}$ 时一共恰好迭代了 $s$ 次，所以在计算 $row$ 和 $col$ 时每迭代一次时乘上 $\\frac{1}{2}$ 即可。\n\n- D - 花映冢\n\n  题目：给定一个图，点数和边数都是 $10^5$ 级别的，可能有环、自环和重边，求是否存在一条从 $1$ 出发的路径可以经过所有点至少一次。（可以重复经过边或点）。\n\n  题解：显然先把自环和重边判了，接下来 Tarjan 缩点，再拓扑排序即可。\n\n### 2025.5.26\n\n今天补题。见 5.22 与 5.24。\n\n### 2025.5.29\n\n今日歌曲：Cruel Summer\n\n今天继续补题。见 5.22。","tags":["日祭"],"categories":["OI","记录"]},{"title":"[ARC196A] Adjacent Delete 题解","url":"/article/ARC196A-Adjacent-Delete-题解/","content":"\n假设 $n$ 是偶数。如果我们忽略删除相邻数的条件，即可以任选两个数相减，那么答案应该是前 $\\frac{n}{2}$ 大的数（记作“较大数”）的和减去前 $\\frac{n}{2}$ 小的数（记作“较小数”）的和。\n\n容易发现，当我们只能选相邻的数相减时，依然可以达到这个答案，因为在任意时刻，总存在至少一对较大数与较小数相邻。\n\n当 $n$ 是奇数，那么一定有一个元素不被选，且这个元素一定在奇数位，这样才能把数组分成长度为偶数的两段。枚举不被选的位置，用对顶堆维护前后两段的答案即可。\n\n时间复杂度 $O(n \\log n)$。\n\n[提交记录](https://atcoder.jp/contests/arc196/submissions/64670397)","tags":["数据结构","模拟"],"categories":["OI","题解"]},{"title":"[ABC400F] Happy Birthday! 3 题解","url":"/article/ABC400F-Happy-Birthday-3-题解/","content":"\n考虑正难则反。问题转化为：\n\n> 一个环上有 $n$ 个物品，颜色分别为 $col_i$，每次操作选择两个数 $i, j$ 使得 $\\forall k \\in [i, j],  col_k = col_i \\lor col_k = 0$，将 $[i, j]$ 中的每个物品的颜色都设为 $0$。（下文将这种操作称为“漂白”。）一次操作的代价为 $j - i + 1 + x_{col_i}$。求将整个环漂白的最小总代价。\n\n先断环为链。设 $dp_{i, j}$ 表示将 $[i, j]$ 漂白的最小代价，那么显然有 $dp_{i, j} = \\min_{k = i}^{j - 1} dp_{i, k} + dp_{k + 1, j}$。\n\n设 $f_{i, j}$ 表示使 $[i, j]$ 能够漂白的最小代价，那么显然有 $f_{i, j} = \\min_{k = 1}^{j - 1} f_{i, k} + dp_{k + 1, j}$。当 $col_i = col_j$ 时，有 $f_{i, j} = \\min (f_{i, j}, f_{i, j - 1}), dp_{i, j} = \\min (dp_{i, j}, f_{i, j} + j - i + x_{col_i})$。\n\n答案即为 $\\min_{i = 1}^n dp_{i, i + n - 1}$。","tags":["DP"],"categories":["OI","题解"]},{"title":"[CF2086E] Zebra-like Numbers 题解","url":"/article/CF2086E-Zebra-like-Numbers-题解/","content":"\n确简单的啊，可是自己就是想不到。\n\n考虑计算一个数的斑马值。贪心地，尽量选大的斑马数减即可。\n\n考虑 DP，设 $dp_{i, j}$ 表示 $[1, i]$ 中斑马值为 $j$ 的数的个数。那么显然有 $dp_{i, j} = dp_{i - mx, j - 1} + dp_{mx - 1, j}$，其中 $mx$ 是不大于 $i$ 的最大的斑马数。具体地，$dp_{i - mx, j - 1}$ 表示 $[mx, i]$ 中斑马值为 $j$ 的数的个数，$dp_{mx - 1, j}$ 表示 $1, mx - 1$ 中斑马值为 $j$ 的数的个数。\n\n记搜即可。","tags":["DP","计数","搜索"],"categories":["OI","题解"]},{"title":"2025 年 4 月日祭","url":"/article/diary/2025/04/","content":"\n### 2025.4.1 愚人节\n\n今日歌曲：Forever Winter\n\n我的日祭之前断更了一段时间，今天终于补上了。\n\n今天改不动题，于是在出题。\n\n### 2025.4.6 水讨论区\n\n今日歌曲：Guilty Pleasure\n\n讨论区居然真的回来了，又可以**水讨论区**了（。\n\n今天 VP [Codeforces Round 1015, Div. 1 + Div. 2](https://codeforces.com/contest/2084)，赛后结算时，发现机房网络得了 MVP。详见犇犇。\n\n前四题都是沟槽构造，不再赘述。\n\n- [[Atcoder ABC400F] Happy Birthday! 3](https://atcoder.jp/contests/abc400/tasks/abc400_f)\n\n  考虑正难则反。问题转化为：\n\n  > 一个环上有 $n$ 个物品，颜色分别为 $col_i$，每次操作选择两个数 $i, j$ 使得 $\\forall k \\in [i, j],  col_k = col_i \\lor col_k = 0$，对 $[i, j]$ 进行“漂白”，即将颜色都设为 $0$。一次操作的代价为 $j - i + 1 + x_{col_i}$。求将整个环漂白的最小总代价。\n\n  先断环为链。设 $dp_{i, j}$ 表示将 $[i, j]$ 漂白的最小代价，那么显然有 $dp_{i, j} = \\min_{k = i}^{j - 1} dp_{i, k} + dp_{k + 1, j}$。\n\n  设 $f_{i, j}$ 表示使 $[i, j]$ 能够漂白的最小代价，那么显然有 $f_{i, j} = \\min_{k = 1}^{j - 1} f_{i, k} + dp_{k + 1, j}$。当 $col_i = col_j$ 时，有 $f_{i, j} = \\min (f_{i, j}, f_{i, j - 1}), dp_{i, j} = \\min (dp_{i, j}, f_{i, j} + j - i + x_{col_i})$。\n\n  答案即为 $\\min_{i = 1}^n dp_{i, i + n - 1}$。\n\n- [[Codeforces 2086E] Zebra-like Numbers](https://codeforces.com/contest/2086/problem/E)\n\n  确简单的啊，可是自己就是想不到。\n\n  考虑计算一个数的斑马值。贪心地，尽量选大的斑马数减即可。\n\n  考虑记搜，设 $dp_{i, j}$ 表示 $[1, i]$ 中斑马值为 $j$ 的数的个数。那么显然有 $dp_{i, j} = dp_{i - mx, j - 1} + dp_{mx - 1, j}$，其中 $mx$ 是不大于 $i$ 的最大的斑马数。具体地，$dp_{i - mx, j - 1}$ 表示 $[mx, i]$ 中斑马值为 $j$ 的数的个数，$dp_{mx - 1, j}$ 表示 $1, mx - 1$ 中斑马值为 $j$ 的数的个数。\n\n### 2025.4.8 过水了\n\n今日歌曲：it's time to go\n\n**过水了**今天。\n\n### 2025.4.10 证明略\n\n今日歌曲：The Albatross\n\n- [[Atcoder ARC196A] Adjacent Delete](https://atcoder.jp/contests/arc196/tasks/arc196_a)\n\n  唐题啊，可是和我相比还是我更唐。\n\n  假设 $n$ 是偶数。如果我们忽略删除相邻数的条件，即可以任选两个数相减，那么答案应该是前 $\\frac{n}{2}$ 大的数（记作“较大数”）的和减去前 $\\frac{n}{2}$ 小的数（记作“较小数”）的和。\n\n  容易发现，当我们只能选相邻数相减时，依然可以达到这个答案，因为在任意时刻，总存在至少一对较大数与较小数相邻。\n\n  当 $n$ 是奇数，那么一定有一个元素不被选，且这个元素一定在奇数位，这样才能把数组分成长度为偶数的两段。枚举不被选的位置，用对顶堆维护前后两段的答案即可。\n\n- [[Atcoder パ研合宿2024 第3日 E] Roller Coaster](https://atcoder.jp/contests/arc196/tasks/arc196_a)\n\n  人类智慧啊。选高度差最大的边即可。**证明略。**\n\n- [[Atcoder パ研合宿2024 第3日 G] Bracket Sequence](https://atcoder.jp/contests/pakencamp-2024-day3-2/tasks/pakencamp_2024_day3_2_g)\n\n  极一眼啊，大概十分钟切了吧。跟翻转括号序列的一个区间那题差不多，这题还简单一点。\n\n  注意到位置 $i$ 可由 $i - 1$ 与跟 $i$ 位置高度相同的位置转移而来。拿一个桶维护后者即可，遇到右括号时记得清零。\n\n### 2025.4.12 写了跟写了一样\n\n今日歌曲：august\n\n模拟赛。\n\n- A - 倒水\n\n  题目：有三个容量分别为 $x, y, z$ 的杯子与一个容量为 $n$ 的一个桶，每次可以：\n\n  - 把一个杯子灌满；\n  - 把一个杯子的水倒出去；\n  - 把一个杯子的水倒到另一个杯子直到这个杯子空了或另一个杯子满了；\n  - 把一个杯子的水倒到桶里。\n\n  对于 $[1, N]$ 中的每一个 $n$，求要使桶装满水，最少的操作次数。\n\n  题解：$\\mathrm{yishu2}$ 发的题解**写了跟写了一样**。\n\n  容易发现，经过转化，可以得到两种操作：向桶里加 $x / y / z$ 单位水与从桶里舀出 $x / y / z$ 单位水回到对应的杯子（后者是操作一与操作三的结合），每次操作的代价都为二。注意到，对于某一个水杯，若我们用它进行的最后一个操作是操作二，那么代价为一，因为不用把舀出来的水倒出去。设 $dp_{i, j}$ 表示桶里有 $i$ 单位水的最小代价，$j$ 表示三个水杯是否最后用于操作二，那么先正着 DP 一遍，即全部使用操作一，再反着 DP 即可。统计答案时应统计 $dp_{i, j} - popcount(j)$。\n\n- B - 让他们连通 （[[Codeforces 1706E] Qpwoeirut and Vertices](https://codeforces.com/problemset/problem/1706/E)）\n\n  居然能场切 $2300$。\n\n  要让区间 $[l, r]$ 连通，等价于 $\\forall i \\in [l, r)$，$i$ 与 $i + 1$ 连通。设 $time_i$ 表示 $i$ 与 $i + 1$ 连通的时间，则答案为 $\\max_{i = l}^{r - 1} time_i$，可以用 ST 表维护，常数又小又好写。\n\n  对于 $time_i$，考虑启发式合并。在合并时，枚举较小的集合的元素，并判断它是否与另一个集合中的元素相邻即可。赛时因为没判 $fa_x = fa_y$ 被硬控了半个小时。\n\n### 2025.4.15 不想证明\n\n今日歌曲：cardigan\n\n- [[Atcoder パ研合宿2024 第3日 G] 門松](https://atcoder.jp/contests/pakencamp-2024-day3-1/tasks/pakencamp_2024_day3_1_k)\n\n  无脑做啊，**不想证明**。\n\n- [[Atcoder パ研合宿2024 第3日 H] Big XOR Game](https://atcoder.jp/contests/pakencamp-2024-day3-1/tasks/pakencamp_2024_day3_1_H)\n\n  ~~这题评分比括号序列还要低。~~\n\n  从高到低讨论，对于每一位，设当前位上是 $1$ 的数的个数是 $cnt$，那么有：\n\n  ```cpp\n  if(((cnt + 1) / 2) & 1 and (cnt / 2) & 1 ^ 1) Alice;\n  if(((cnt + 1) / 2) & 1 ^ 1 and (cnt / 2) & 1) {\n    if(n & 1) Bob;\n    else Alice;\n  }\n  ```\n\n  不想详细说明。\n\n### 2025.4.19 输入挂了\n\n今日歌曲：Sad Beautiful Tragic\n\nTTPD 一周年了。\n\n今天模拟赛因为**输入挂了** $76 pts$，机房 rating ~~暴涨~~暴跌。\n\n- A - 说唱入门教学\n\n  题目：给定一首歌的歌词（以拼音形式），每两句话一一匹配，$\\forall i \\in [1, m]$，求出 $i$ 押的个数。\n\n  题解：题面好唐。先把韵母处理出来，然后 trie 树即可。常数极大。\n\n- B - 画画入门教学\n\n  构造题，手动推一推小样例即可。","tags":["日祭"],"categories":["OI","记录"]},{"title":"联合省选 2025 游记","url":"/article/联合省选-2025-游记/","content":"\n**感谢 [@fan_xiaoyi](https://www.luogu.com/user/1495223) 提供的部分文本故事。**\n\n**作者是初二蒟蒻，实力有限，不喜勿喷。**\n\n---\n\n在遥远的**傻子谷**，生长着一棵特殊的树，名为**二叉树**。它以结构规则、枝繁叶茂而闻名，被谷民们视为神树，而神树也庇佑着这片土地。\n\n二叉树所结的果实被称为**提姆**，其颜色从红到黑，颜色越深，价值越高。此外，还存在一种**灰色提姆**，这类果实尚未成熟，在生长过程中会**随机变化**，无法预测其最终状态。每颗提姆都包含 **100** 颗种子，被称为**芬书**，而谷民们的目标便是收集尽可能多的芬书。\n\n然而，在**2025**年，由**莲荷绳玄**施加的魔法影响了二叉树，使其结出了**六颗灰色提姆**。这六颗提姆竟化作六只强大的怪物，若想获得这些提姆中的芬书，便必须先战胜这些怪物。\n\n经过谷民们的推选，我被派往迎战这些怪物，试图夺取属于傻子谷的芬书。据智者**犊子嘚**所言，若能收集到足够的芬书，神树将在**恩欧艾**的力量影响下，再次结出**六颗灰色提姆**，并衍生出新的怪物。然而，我深知自己的能力有限，未必能达成这一目标，因此只希望尽力而为。\n\n---\n\n第一只怪物名为**幸运数字**，从外观来看，它属于**计数型**怪物，体型庞大，似乎难以应对。我仔细思考后，首先运用**离散化**的方法进行预处理，这一步是必不可少的。随后，我发现该怪物的核心机制是**区间加、单点查询**，于是决定采用**差分**进行优化。最后，在 $O(n \\log n)$ 的时间复杂度内，我成功击败了它，并获得 **100** 颗芬书。\n\n尽管最终取得了胜利，但由于思考时间过长，我竟花费了**两个半小时**才找到合适的策略，这无疑是一个警示——若不能提高效率，接下来的挑战将更加艰难。\n\n第二只怪物是**追忆**，它的特性与前者完全不同，更像是一位擅长语言与文学的**文科高手**。这只怪物防御极其严密，正面突破几乎不可能。我尝试以 $O(nq)$ 的方式逐步削弱其防御，并借此消灭了部分附属怪物，最终勉强获得 **20** 颗芬书，但也只能匆匆离开，未能彻底战胜对手。\n\n第三只怪物名为**图排列**，从它出现的瞬间，我便感受到了一股强大的**压迫感**，甚至无法展开有效的对抗。在尚未理清思路之前，我便被迫撤退，最终一无所获。\n\n至此，第一天的战斗结束，我一共收集到了 **120** 颗芬书。 \n\n---\n\n第二天的第一只怪物是**推箱子**。面对它时，我迅速想到了解决方案——**线段树维护区间覆盖**。这一策略在理论上可行，然而，我的实现方式时间复杂度为 $O(n \\log^2 n)$，或许并不足以完全击败怪物。尽管如此，我仍尽力施展此计，希望能尽可能多地收集芬书。\n\n第二只怪物是**岁月**，又是一只**计数**类怪物。它似乎拥有深厚的力量，让人难以撼动。我尝试采用**暴力**方式试图窃取芬书，但也许是**法力不足**，无论如何努力，都未能战胜它。最终，我只能带着遗憾撤退，未能获得任何芬书。\n\n最后一只怪物是**封印**，依旧是一只**计数**类怪物。由于时间紧迫，我无法深思熟虑，只能匆忙迎战。在激烈的战斗中，我设法获得了**8** 颗芬书，随后便匆匆离开。\n\n最终，我在第二天获得了**大约 100** 颗芬书。\n\n---\n\n所有的战斗已经结束，我也该带着这**大约 220** 颗芬书回到傻子谷了。而在返回的路途中，我还幸运地捡到了来自**岁月**的 **4** 颗芬书，最终我总共获得了 **232** 个芬书。\n\n**接下来，便又是新一年的征途！**","tags":["省选"],"categories":["OI","游记"]},{"title":"2025 年 3 月日祭","url":"/article/diary/2025/03/","content":"\n### 2025.3.1&2 正常说话\n\n这两天参加省选。这里用**正常的说话**方式补充一些有关考试题目的内容。\n\n- [[洛谷 P11830] [省选联考 2025] 幸运数字](https://www.luogu.com.cn/problem/P11830)\n\n  钦定中位数为 $x$，设可重集中小于 $x$ 的数的个数为 $l$，等于的是 $e$，大于的是 $r$，那么有 $l + e \\ge r, r + e \\gt l$，所以 $l - e \\lt r \\le l + e$。为了让 $x$ 尽量成为中位数，那么考虑让 $e$ 尽可能大，即能取 $x$ 的都取 $x$。同时可以得到 $l, r$ 的范围，便可判断。用差分维护即可。\n\n- [[洛谷 P11833] [省选联考 2025] 推箱子](https://www.luogu.com.cn/problem/P11833)\n\n  先考虑打一个暴力，随后发现是区间覆盖（覆盖成 $x + i$，其中 $x$ 是给定值，$i$ 是下标。）与区间查询。线段树维护即可。（可是我不会告诉你我写的双 $\\log$ 可能要挂分。）\n\n### 2025.3.4 难度偏高\n\n今日歌曲：The Lucky One\n\n今天补了一下 USACO25JAN，铜组**难度感觉偏高**啊。\n\n- [[洛谷 P11667] [USACO25JAN] Astral Superposition B](https://www.luogu.com.cn/problem/P11667)\n\n  思维题。先处理 ``B``，这两颗星星一定一颗在当前位置，一颗在左上方对应的位置。接下来处理 ``G``，如果当前位置能够由已有的星星移动而来，则忽略；否则当前位置需要一个星星。即可。\n\n- [[洛谷 P11672] [USACO25JAN] Table Recovery S](https://www.luogu.com.cn/problem/P11672)\n\n  这题一直没改，今天终于改了。先统计出每个数出现了多少次，仅出现了一次的两个数中的一个便是第一个数。又由于第一个数所在的行/列中的每个数的出现次数是不重复的，于是就可以根据第一个数推出整个表格。比较两个答案中更小的一个输出即可。\n\n### 2025.3.6 正难则反\n\n今日歌曲：Naked In Manhattan\n\n今天中午 C 老师请吃饭，回来就出省选成绩了。省选总分 $232$，折合 $58.71$，$\\mathrm{CW\\ Junior\\ rk\\ 3}$。（其实一共也就 $6$ 个初中生。）\n\n今天略水。\n\n- [[洛谷 P11672] [USACO25JAN] Reachable Pairs G](https://www.luogu.com.cn/problem/P11674)\n\n  有趣的**正难则反**。对于 $1$ 操作，相当于把当前点换成一个超级原点并不参与计数。所以考虑倒推，先建边（并查集合并）再加贡献。具体地，对于一条边 $u \\to v (u \\lt v)$，若：\n\n  - $s_u = 1, s_v = 1$：由于两个点都是超级原点，直接合并 $u, v$ 所在的块。\n\n  - $s_u = 1, s_v = 0$：当枚举到 $v$ 时合并 $u, v$ 所在的块。\n\n  - $s_u = 0$：当枚举到 $u$ 时合并 $u, v$ 所在的块。\n\n  枚举到一个点再加入贡献即可。\n\n### 2025.3.8 ~~打表可得~~\n\n今日歌曲：Starlight\n\n$\\\\%0\\sin$。\n\n- A - 114514\n\n  题目：定义函数 $f(x)$，其中 $x$ 是一个长度为 $n$ 的序列。这个函数的值 $y$ 满足：\n\n  - $y$ 的长度为 $n$。\n\n  - $y$ 中的元素互不相同。\n\n  - $\\forall i \\in [1, n], x_i \\le y_i$。\n\n  - $y$ 是满足上述条件的序列中，字典序最小的。\n\n  现给定 $y$，求有多少个序列 $x$ 使得 $f(x) = y$。\n\n  题解：__~~打表可得~~__，每个位置可能的值是独立的，即对于任意一个**位置** $i$，$a_i$ 的取值集合不会随其他值的改变而改变。设 $vis_i$ 表示**值** $i$ 是否出现过，那么对于 $a_i$ 的取值范围就是 $[l, i]$，其中 $l$ 满足 $\\forall k \\in [l, i], vis_k = 1$ 且 $vis_{l - 1} = 0$。并查集维护即可。\n\n- C - 深黯「军团」\n\n  题目：给定 $n, k, mod$ 与一个长度为 $n$ 排列 $a$。计算从 $a$ 开始的接下来 $k$ 个排列的逆序对个数之和。\n\n  题解：神秘数位 DP。这题赛时还是想到了许多，但是考试时误认为 $a$ 的较高位不会改变，所以挂成 $20$ 分（数据好水）。\n\n  赛时想到了通过求一个排列的逆序对来算排名，也想到了要求的就是排名在一个区间内的排列的逆序对数之和，还**~~通过打表~~**想到了全排列的逆序对个数的 DP，甚至还想到了类似于阶乘进制的东西，可是因为不会[康托展开](https://oi-wiki.org/math/permutation/#%E6%8E%92%E5%90%8D)而没写出来。\n\n  具体地，将 $k$ 与排列 $a$ 康托展开。由于康托展开的值的数位之和就是逆序对个数，所以答案为 $\\sum_{i = a}^{a + k} count(i)$，其中 $count(i)$ 表示 $i$ 的数位之和。对于重复的部分，直接 DP 即可。\n\n### 2025.3.11 观察样例\n\n今日歌曲：Getaway Car\n\n要改名了。今天 VP [Codeforces Round 1008 (Div. 2)](https://codeforces.com/contest/2078)，打得烂的一匹，最开始只做了 A 和 B，不过幸好在 2:28 把 E AC 了，不然今天晚上整个人都不好了。\n\n- [[CodeForces 2077A & 2078C] Breach of Faith](https://codeforces.com/contest/2077/problem/A)\n\n  赛时一直在求 $a_1$，然后就被卡死了。\n\n  事实上，发现 $a_2$ 更好求一些。$a_2 = a_1 + a_{2n + 1} + a_3 - a_4 + a_5 - a_6 + \\dots + a_{2n - 1} - a_{2n}$。显而易见，把最大值作为 $a_1$ 即可不重复。排序即可。\n\n- [[CodeForces 2077B & 2078E] Finding OR Sum](https://codeforces.com/contest/2077/problem/B)\n\n  神秘交互题。以下均讨论八位整数。**观察样例**发现，询问 $0$ 似乎比较有用，可以直接得到 $x + y = sum$。再~~根据直觉~~，考虑询问 $01010101$，将得到的答案 $ans$ 再减去 $sum$ 就可以得到 $1$ 的贡献。为了不让每一位的贡献重叠，我们便想到空一个位置放一个 $1$。这样，我们就可以根据这些数位的贡献来算出这些数位的和（指 $x, y$ 对应数位之和）。剩下未知的数位也便可以根据 $sum$ 与已知的数位求出。显而易见，求答案时我们并不在意当前数位具体的值，只在意数位和。所以对于 $m$ 的每一位只用分讨 $0$ 或 $1$ 即可。\n\n  这种题确实挺直觉的，个人觉得也比较靠运气。~~比如我 C 想了半天就是想不到，这题基本是看一眼就有点想法而且就对了，甚至还是一发入魂。~~\n\n### 2025.3.15 嗨克数据\n\n今日歌曲：This Is Why We Can't Have Nice Things\n\n$\\\\%0\\sin$。\n\n- D - 完美的答卷\n\n  题目：给定长度为 $n$ 的数组 $a$，设 $f_{l, r} = (\\max_{i = l}^r a_i) \\oplus (\\min_{i = l}^r a_i)$，求 $\\max_{1 \\le i \\le j \\le n} f_{i, j}$。\n\n  题解：本题数据过水，以至于赛时对拍拍出了问题但是交到 OJ 上过了。赛时这题也想到了许多，可是逻辑并不清晰，最后还是看了题解并与 dpfs 讨论才想出了以下的解法。\n\n  钦定 $a_i$ 是一个区间的最大值，$a_j$ 是这个区间的最小值，且 $j \\lt i$。设 $pre_i$ 表示 $i$ 左侧第一个比 $a_i$ 大的位置，则 $j \\in (pre_i, i)$，且 $j$ 在 $[1, i]$ 的单调（递增）栈中，单调栈 + 01trie 维护即可。可是，上述两个集合的交集不一定从 $1$ 开始，所以对于 trie 树中的一个节点 $i$，维护 $mx_i$ 表示经过该点的数的**下标的最大值**，便可以解决。可是删除又成为了一个问题。考虑用 vector 暴力维护每个 $mx_i$ 的历史值，理论上时间复杂度不变，只是常数巨大。\n\n  改完之后，就开始造 **hack 数据**了。似乎有用但不多。\n\n### 2025.3.18 极限 AC\n\n今日歌曲：Paper Rings\n\n今天 VP [Codeforces Edu Round 176](https://codeforces.com/contest/2075)。由于准备 VP 时 CF 还在系统测试，所以并不算严格意义上的 VP。最后一共做了 4 道，而 D 是在 VP 1:54 时才 AC，此前还有 3 发罚时。也是**极限 AC**。\n\n- [[CodeForces 2075C] Two Colors](https://codeforces.com/contest/2075/problem/C)\n\n  先将 $a$ 排序。发现对于某一种颜色，能够与其搭配的颜色都是连续的一段。所以前缀和并动态维护能够搭配的区间即可。注意略特判 $a_i = n$ 的情况。\n\n- [[CodeForces 2075D] Equalization](https://codeforces.com/contest/2075/problem/D)\n\n  注意到花费不能重复，所以考虑背包 DP。设 $dp_{i, j}$ 表示将 $x$ 右移 $i$ 位、将 $y$ 右移 $j$ 位的最小代价，转移十分显然，即可 $O(\\log_2^2 n)$ 无脑做。然而由于我赛时**太有脑了**，非要写 $O(\\log_2 n)$，最后调了好久才过。~~下次再也不长脑子了。~~\n\n### 2025.3.20 疑似双休\n\n今日歌曲：I Hate It Here\n\n后天不用上课，这周**疑似可以双休**了！\n\n今天在补好题推荐。\n\n- [[CodeForces 2078D] Scammy Game Ad](https://codeforces.com/contest/2078/problem/D)\n\n  很符合“时下流行”的题目了。\n\n  考虑 DP，设 $dp_{i, 0/1}$ 表示从第 $i$ 个左/右门开始，到最后一个门的**最大倍率**。转移也是十分显然的。对于第 $i$ 对门通过加法新产生的人数 $x$，将答案加上 $x \\cdot \\max(dp_{i + 1, 0}, dp_{i + 1, 1})$ 即可。注意最初还有 $2$ 个人。\n\n### 2025.3.22\n\n并不是双休，在家里 VP 模拟赛。\n\n### 2025.3.25\n\n打 USACO，菜得银组一道都不会。\n\n### 2025.3.27\n\n- [[CodeForces 2077C] Binary Subsequence Value Sum](https://codeforces.com/contest/2077/problem/C)\n\n  极其有趣的题目了。\n\n  显而易见，$F(v, l, r) = one(v, l, r) - zero(v, l, r)$，所以一个字符串的权值 $W(v) = \\lfloor \\frac{(one(v) - zero(v))^2}{4} \\rfloor$。把 $0$ 换 $-1$，那么 $W(v) = \\lfloor \\frac{sum^2(v)}{4} \\rfloor = \\frac{sum^2(v) - (sum(v) \\mod 2)}{4}$。继续将这个式子化简即可，~~这里不再赘述~~。\n\n- [[CodeForces 2082B] Floor or Ceil](https://codeforces.com/contest/2082/problem/B)\n\n  从二进制角度思考，向上取整等同于先加一再右移一位，向下取整则是直接向右移一位。所以，若一个向上取整操作后还有一个向下取整操作，那么这个向上取整操作相当于是无效的。又有在 $n + m$ 次操作之后，**最大值最多比最小值大一**。所以对于最小值，先向上取整再向下取整即可，最大值反之。\n\n- [[CodeForces 2081A] Math Division](https://codeforces.com/contest/2081/problem/A)\n\n  考虑多操作一次的期望。多操作一次，则代表在第 $n$ 位上产生了进位，又因为 $a_n = 1$，所以前 $n - 1$ 位产生了进位（第 $n$ 位是最高位）。设 $dp_i$ 表示前 $i$ 位进位的期望，则：\n\n  $$\n  dp_i = \\begin{cases}\\frac{1}{2} \\times dp_{i + 1},\\ a_i = 0\\newline\\frac{1}{2} \\times (1 - dp_{i + 1}) + dp_{i + 1},\\ a_i = 1\\end{cases}\n  $$\n\n  直接 DP 即可。","tags":["日祭"],"categories":["OI","记录"]},{"title":"2025 年 2 月日祭","url":"/article/diary/2025/02/","content":"\n### 2025.2.8 水讨论区\n\n今日歌曲：Bigger Than The Whole Sky\n\n今天洛谷讨论区关闭了。（以后不能**水讨论区**了。）\n\n这个寒假，什么也没干。一看进度，已经和初二的差不多。但是他们第一遍拉得挺快，估计效果不大。\n\n我如果现在回去，在那边又吃不饱。于是，就只有多肝一肝，把之前的进度补上来。\n\n晚上打[ABC392](https://atcoder.jp/contests/abc392)。\n\n- [[Atcoder ABC392E] Cables and Servers](https://atcoder.jp/contests/abc392/tasks/abc392_e)\n\n  略考细节的题。先找连通块，之后再找每个连通块中的返祖边（即无用的边），再把连通块连通即可。\n\n  （可是这题我赛时AC，后来突然想到一个hack。还没改，烦死了。）\n\n### 2025.2.9 终于战胜\n\n今日歌曲：Holyground\n\n[综合题1](https://vjudge.net/contest/691948)。\n\n- [[Gym 103466I] Space Station](https://codeforces.com/gym/II/problem/I)\n\n  神奇搜索题，暴搜+剪枝+略微组合数学即可。\n\n  神奇卡常题目，拼尽全力，2700ms+，终于冲进3s。\n\n- [[Gym 101982D] Count The Bits](https://codeforces.com/gym/101982/attachments)\n\n  很普通的一道DP题，可是赛时都在想组合数学。\n\n  $dp_{i, j}$ 表示到第 $i$ 位模 $k$ 的值为 $j$ 的数中 $1$ 的数量，$cnt_{i, j}$ 表示到第 $i$ 位模 $k$ 的值为 $j$ 的数的数量，直接转移即可。\n\n- [[Gym 102428F] Fabricating Sculptures](https://codeforces.com/gym/102428/problem/F)\n\n  神奇DP题。最开始看题解都没看懂，一是自己确实不理解是怎么算的，二是题解写得比较简略，看了好久才看懂。\n\n  设 $dp_{i, j}$ 表示从上往下一层层放，当前一共放了 $i$ 个，最下面一层放了 $j$ 个的方案数。有方程 $dp_{i, j} = \\sum_{k = 1}^j dp_{i - j, k} * (j + 1 - k)$（希望没写错）。将这个式子拆开再维护前缀和即可。（开了long long见祖宗。）\n\n- [[Gym 104172F] Sum of Numbers](https://codeforces.com/gym/104172/problem/F)\n\n  很有趣的一道题。很容易发现，两个相邻字符串长度之差（的绝对值）为 $0$ 或 $1$。暴搜即可。\n\n  赛时的想法是，将原字符串平均分，再给 $0$ 或 $1$ 的偏移。可是偏移少了一些，虽然没 TLE 但一直 WA，拼尽全力无法战胜。\n\n  赛后再改一改，拼尽全力**终于战胜**。\n\n今天本来说再补补昨天的 F，改改昨天的 E，结果今天的第三题看半天看不懂，昨天的 E 和 F 都没做。\n\n最终今天做了四道题。\n\n感觉心态有点崩。（尤其是看第三题的时候。）\n\n……\n\n### 2025.2.10 ~~放弃即可~~\n\n今日歌曲：Peace\n\n[综合题2](https://vjudge.net/contest/692168)。\n\n今天还做出了一道题。\n\n- [[Gym 100861E] Extreme Programming](https://codeforces.com/gym/100861/attachments)\n\n  看了题解真的好简单。首先我们先确定这些问题的顺序。推推式子，排序即可。现在，我们不用考虑顺序，只用直接背包，找出最大的 $EV$ 与最小的 $ET$ 即可。\n\n  可是这道题不知道哪里写挂了，WA on test 15。**~~放弃即可~~**。\n\n- [[Gym 100217I] Sharing the Sweets](https://codeforces.com/gym/100217/attachments)\n\n  分拆数板子题。（可是我不会。）写板子即可。\n\n  [分拆数 OI Wiki](https://oi-wiki.org/math/combinatorics/partition/)。\n\n- [[Gym 100202A] Little Brackets](https://codeforces.com/gym/100202/attachments)\n\n  这题着实简单。设 $dp_{i, j, 0/1}$ 表示放了 $i$ 个括号，当前高度为 $j$，是否到过最高点（深度为 $k$）的方案数。直接转移即可。\n\n  可是赛时想多了，一直在想组合数学。或许先设方程再推会好一些。\n\n  赛时还因为多测不清空挂了四发。\n\n今天还举办了 [CWOI ER 2 & 1 > 2 Round](https://www.luogu.com.cn/contest/228091)，感觉对于他们还是太难了。\n\n（今天字符数破 $1e4$ 了。）\n\n### 2025.2.11 ~~放弃即可~~\n\n今日歌曲：Pink Pony Club\n\n模拟赛 $40 + 40 + 100 = 180,\\ rank\\ 2$。\n\n- B - 刀言刀语 （[[洛谷 P6864] [RC-03] 记忆](https://www.luogu.com.cn/problem/P6864)）\n\n  今天给的题解以及同学讲解的都是非矩阵做法，可是听得迷迷糊糊。一下午尝试乱搞做法，结果没搞出来，最后，一道题都没改出来，**~~放弃即可~~**。晚上终于学习了矩阵，基本学懂了，这才发现矩阵有多好用。之后又看了这道题的矩阵+线段树做法，终于基本懂了。\n\n  将这些数据打包成矩阵：$\\begin{bmatrix} ans & cnt & 1 \\end{bmatrix}$。对于操作一，等同于 $\\begin{bmatrix} ans & cnt & 1 \\end{bmatrix} \\times \\begin{bmatrix} 1 & 0 & 0 \\newline 1 & 1 & 0 \\newline 1 & 1 & 1 \\end{bmatrix}$。对于操作二，等同于 $\\begin{bmatrix} ans & cnt & 1 \\end{bmatrix} \\times \\begin{bmatrix} 1 & 0 & 0 \\newline 0 & 0 & 0 \\newline 1 & 1 & 1 \\end{bmatrix}$。对于操作三，若是恢复某个操作，则与操作一二相同；若是删除某个操作，则将这个操作设为单位矩阵（$\\begin{bmatrix} 1 & 0 & 0 \\newline 0 & 1 & 0 \\newline 0 & 0 & 1 \\end{bmatrix}$），不会对答案产生影响。用线段树维护每个操作对应的矩阵，区间求和（求积）即可。\n\n  这道题记得比较详细，毕竟是第一次接触矩阵。\n\n- C - 刀妙构造\n\n  题目：给定一个长度为 $n$ 的排列 $a$，通过尽可能少的操作，使得 $\\forall a_i = i$。判断是否有解。若有解，输出具体的操作。操作的定义：选择 $x, y$ 满足 $1 \\le x, y \\le n, \\left | x - y \\right | = 1, a_x \\ne x, a_y \\ne y$，交换 $a_x$ 与 $a_y$。\n\n  题解：原本就满足 $a_i = i$ 的位置将原数组分割成若干个块。对于每个块，若是目标的一种排列则有解。设当前块为 $[l, r]$，则依次把数 $l \\sim r$ 移到位置 $l \\sim r$。要注意的是，在移动的过程中，可能会使得其它的 $a_i = i$ 成立。所以我们将这些即将成立的位置先进行偏移，再将当前的数移到目标位置即可。\n\n  扩展：尝试在 $O(n \\log n)$ 的时间复杂度内求出有解的排列个数，对 $998244353$ 取模。\n\n这几天强度还是比较高，因为跟进度跟得有点吃力了。今天晚上眼睛疼，难受。\n\n### 2025.2.12 罚时吃饱\n\n今日歌曲：two years\n\n今天上午VP [Codeforces Round 1004 (Div. 2)](https://codeforces.com/contest/2067)，下午改[Codeforces Round 1004 (Div. 1)](https://codeforces.com/contest/2066)。上午C题因为少判了一个条件，**罚时吃饱**了。\n\n- [[Codeforces 2066A & 2067D] Object Identification](https://codeforces.com/contest/2066/problem/A)\n\n  神奇交互题。观察到一个性质：对象 $A$ 的答案可能是 $0$，但对象 $B$ 的答案不可能是 $0$。\n\n  若 $x_1, x_2, \\dots, x_n$ 不是 $1 \\sim n$ 的一个排列，一定可以找到一个不在 $x$ 中的数 $k$，对其与另一个不同的数询问。若是对象 $A$，因为 $k$ 没有向任何点连边，所以答案一定为 $0$。若答案不为 $0$，则是对象 $B$。\n\n  若 $x_1, x_2, \\dots, x_n$ 是 $1 \\sim n$ 的一个排列，那么找到满足 $x_i = 1, x_j = n$ 的 $i, j$。询问 $(i, j)$ 与 $(j, i)$。若是对象 $B$，那么两个答案应该是相等的，并且都 $\\ge n - 1$（因为 $\\left | x_i - x_j \\right | = n - 1$）。然而如果是对象 $A$，那么当 $n \\ge 3$，不可能同时存在一条长度至少为 $n - 1$ 的 $i$ 到 $j$ 的路径与一条长度至少为 $n - 1$ 的 $j$ 到 $i$ 的路径（因为 $2(n - 1) \\ge n$）。综上所述，若两个答案相等并且都 $\\ge n - 1$，则是对象 $B$，否则是对象 $A$。\n\n  ~~按照题解模拟即可。~~\n\n- [[Codeforces 2066B & 2067E] White Magic](https://codeforces.com/contest/2066/problem/B)\n\n  这题似乎挺简单的，只是赛时看了一眼但是没多想。\n\n  首先可以注意到，没有 $0$ 的子序列一定是合法的，有两个及以上的 $0$ 的子序列一定是非法的。所以要么选所有非零元素，要么选所有非零元素与一个 $0$。\n\n  若是选一个 $0$，显而易见，选最左侧的 $0$ 是最优的。于是判断这么选是否合法即可。\n\n- [[Codeforces 2066C & 2067F] Bitwise Slides](https://codeforces.com/contest/2066/problem/C)\n\n  很有意思的 DP 题。\n\n  我们根据题意可以得出，对于时刻 $i$，记 $sum_i = \\oplus_{j = 1}^i a_j$，有 $P \\oplus Q \\oplus R = \\oplus_{j = 1}^i a_j$。于是对于某个时刻，有这三种状态：$\\{sum_i, x, x\\},\\ \\{x, sum_i, x\\},\\ \\{x, x, sum_i\\}$。设 $dp_{i, x}$ 表示这三种状态的情况数，经过推导（具体过程略），可以得出 $dp_{i, sum_{i - 1}} = 3 \\times dp_{i - 1, sum_{i - 1}} + 2 \\times dp_{i - 1, sum_i}$。发现可以滚动。由于值域较大，用 map 维护 DP 即可。\n\n- [[Codeforces 2066D1] Club of Young Aircraft Builders (easy version)](https://codeforces.com/contest/2066/problem/D1)\n\n  有趣的组合数学题。\n\n  因为下面的楼层并不会影响上面的楼层，所以从下往上考虑。对于某一个高度，丢飞机的次数最多为 $c$，假设它实际丢 $k$ 个，则有 $c \\choose k$ 种情况。所以设 $dp_{i, j}$ 表示到了第 $i$ 层楼，已经丢了 $j$ 个飞机的情况数。有转移方程 $dp_{i, j} = \\sum_{k = 0}^ c {c \\choose k} \\cdot dp_{i - 1, j - k}$。\n\n  答案为 $dp_{n, m}$。直接 DP 即可。\n\n  扩展：求证答案为 $nc - c \\choose m - c$。\n\n今天晚上略水……没做题。但是今天一天综合下来……还将就吧。\n\n### 2025.2.13 笑点解析\n\n今日歌曲：evermore\n\n今天 jmr 终于回来了。\n\n今天学习了李超线段树。\n\n- [[洛谷 P4097] 【模板】李超线段树 & [HEOI2013] Segment](https://www.luogu.com.cn/problem/P4097)\n\n  刚开始学李超线段树，觉得挺简单的。其实它跟吉司机线段树有点像，只是维护的东西要少一些，并且代码更好写。\n\n  对于每个节点，考虑维护在它中点处的最高线段编号，那么用类似于吉司机线段树区间取 $\\mathrm{max}$：若当前线段完全优于原有线段，那么直接替换；若当前线段完全劣于原有线段，那么直接舍弃；若当前线段与原有线段有交点，那么递归更新当前线段较大的那一段。对于查询，直接把路径上所有的线段取 $\\mathrm{max}$ 即可。时间复杂度 $O(n\\log^2n)$\n\n- [[洛谷 P4069] [SDOI2016] 游戏](https://www.luogu.com.cn/problem/P4069)\n\n  纯堆码量的题。首先这题一眼树链剖分，一眼李超线段树。这题算是很基础的树剖，只是套的是李超线段树。\n\n  于是 LCA + 树剖 + 李超线段树 就算是码量炸弹了。也许树剖都这样，只是我没怎么写过。所以……先把模板题写了再说。\n\n  - [[洛谷 P3384] 【模板】重链剖分/树链剖分](https://www.luogu.com.cn/problem/P3384)\n\n    第一道真正意义上的树剖。之前倒是写过一个有点树剖思想的贪心（但那个好像是长链剖分）。\n\n    一共交了四发，**笑点解析**：前三发线段树没 pushup。由于当时另外没找到问题，于是我严重怀疑是线段树的问题。然后用那个线段树，写了一个线段树的板子，一测挂了，才发现是没写 pushup，糖丸了。\n\n    第一次写树剖，稍微参考了一下题解代码，但整体还是自己在写。树剖其实挺好理解的。\n\n  写完模板题，该写这道题了。这道题从下午就开始写，一直调到晚上都没调出来，只有明天再补了。\n\n今天 $\\mathrm{CCF}$ 把 $\\mathrm{XXSs}$ 给 $\\mathrm{ban}$ 了。适度阻止竞赛低龄化是有道理的，没必要小学就开始竞赛，而且有些 $\\mathrm{HNO_3}$ 真的很没数值；但另一方面，以后的分数线会有所上升。\n\n今天晚上 $\\mathrm{yishu2}$ 让我们帮他帮另一个人验初赛题。那题……一言难尽。\n\n### 2025.2.14 绝世好题\n\n今日歌曲：Red Wine Supernova\n\n今天%你赛，$\\mathrm{only\\ 130\\ pts}$。\n\n- B - permutation （[[Codeforces 1827B2] [加强版] Range Sorting (Hard Version)](https://codeforces.com/problemset/problem/1827/B2)）\n\n  **绝世好题**之神秘计数（？）题。\n\n  又是一道正难则反。容易发现，答案为：\n\n  $$\n  \\sum_{i = 1}^n (i - 1) \\cdot (n - i + 1) - \\sum_{i, j, k}^{1 \\le i \\le j \\le k \\le n} [\\max_{p = i}^j a_p \\le \\min_{p = j + 1}^k a_p]\n  $$\n\n  考虑枚举 $a_x$ 满足 $a_x = \\max_{p = i}^j a_p$，那么 $a_x \\le \\min_{p = j + 1}^k a_p$。显而易见，$a_{j + 1}$ 是 $a_x$ 右侧第一个比它大的数，那么 $i \\in [p + 1, x], k \\in [j + 1, q - 1]$，其中 $p, q$ 满足 $a_p$ 是 $a_x$ 左侧第一个比它大的数，$a_q$ 是 $a_{j + 1}$ 右侧第一个比 $a_x$ 小的数。维护即可。\n\n  这题……题解给的用 set 维护，可惜常数太大，被 $\\mathrm{yishu2}$ 卡掉了。他又给了个链表的实现，不想看，于是自己开始研究。\n\n  由于要求的值都是最近的最大/最小值，所以考虑使用单调栈维护。$j + 1$ 与 $p$ 都非常好求，可是如何求 $q$ 是个问题。\n\n  当时做这道题的时候自己没想出来，后来看原题题解区才懂。做法是，对于前文所提到的 $i, j$，维护 $n$ 个集合 $S_i$，满足 $\\forall i \\in S_{j + 1}$。接下来倒序遍历 $a$，对于每个 $i$，顺序枚举 $j \\in S_i$，将单调栈中 $\\gt a_j$ 的数弹出，栈顶元素即为 $q$。在将每个 $j$ 操作完后，将 $a_i$ 加入单调栈。正确性证明如下（部分摘自原题题解）：\n\n  记 $(x, j + 1)$ 表示查询 $j + 1$ 右侧第一个比 $a_x$ 小的数。（$x, j$ 含义同上。）若这个询问弹出了 $a_l$，那么 $(x' \\gt x, j + 1)$ 的答案显然不为 $l$。现在需要证明 $(x', (j + 1)' < (j + 1))$ 的答案不为 $l$。\n\n  - 若 $(j + 1)' \\lt x$，因为 $a_x \\lt a_l$，所以 $x$ 可以作为答案，答案不可能是 $l$。\n\n  - 若 $(j + 1)' = x$，因为 $a_{x'} \\lt a_{(j + 1)'} = a_x \\lt a_l$，所以答案不可能是 $l$。\n\n  - 若 $x \\lt (j + 1)' \\lt (j + 1)$，那么 $a_{(j + 1)'} \\lt a_{x}$，否则 $a_x$ 右侧第一个比它的的数不可能是 $a_{j + 1}$，所以 $a_{x'} \\lt a_{(j + 1)'} \\lt a_x \\lt a_l$，答案不可能是 $l$。\n\n  终于证完了。按上述步骤维护即可。\n\n  这题本来就有一定的思维难度。如果用单调栈，这道题的思维难度就更高了。如果用有的数据结构（比如 set），倒是好想好写，**可是 $\\mathrm{yishu2}$ 卡常。**\n\n因为今天一下午加晚上一直苦攻 T2，所以昨天的题还没来得及补。\n\n今天写得很晚了，准确来说已经第二天凌晨了。今天就到这里。\n\n### 2025.2.18 无处不在\n\n今日歌曲：I Forgot You Existed\n\n> “我**无处不在**。”——$\\mathrm{yishu2}$\n\n\n今天在改游戏那道题，最终决定重构！\n\n### 2025.2.20 笑点解析\n\n今日歌曲：The Archer\n\n今天还是在改游戏，最后终于还是改出来了。**笑点解析**又来了。\n\n- 在 $dfs1$ 里计算了 $dfn$。\n\n- $dis$ 在线段树中的编号与实际编号混淆了。\n\n- 另外还有一些很糖的低级错误，比如右儿子写成 $p << 1$ 之类的。\n\n### 2025.2.22 显而易见\n\n今日歌曲：wish you were gay\n\n$\\\\%0\\sin$。\n\n- A - 怎么又是先增后减 （[[Atcoder joisc2014_b] [JOI Day2 T2] たのしい家庭菜園](https://atcoder.jp/contests/joisc2014/tasks/joisc2014_b)）\n\n  ~~论赛时代码只与正解相差两行，赛时是有多糖。~~\n\n  **显而易见**，一个数要么放左边，要么放右边。若放左边，则需要交换当前数与左边逆序对的个数，右边同理。**显而易见**，取较小的一侧的答案。用数据结构维护即可。\n\n### 2025.2.25 数组开小\n\n今日歌曲：mirrorball\n\n- [[Codeforces 241E] Flights](https://codeforces.com/problemset/problem/241/E)\n\n  神秘又简单的差分约束。显而易见，我们只关注在 $1$ 到 $n$ 路径上的点，并且 $1$ 到路径上每个点的距离都是唯一的。那么有 $1 \\le dis_v - dis_u \\le 2$。差分约束即可。\n\n  做的时候由于**数组开小**了，挂了若干发，也是糖丸了。\n\n- [[洛谷 P1993] 小 K 的农场](https://www.luogu.com.cn/problem/P1993)\n\n  模板题。\n\n### 2025.2.27 联合省选\n\n今日歌曲：It's Nice To Have A Friend\n\n今天写了一点[**联合省选** 2025 游记](/article/联合省选-2025-游记/)。\n\n- [[洛谷 P4926] 倍杀测量者](https://www.luogu.com.cn/problem/P4926)\n\n  模板题。\n\n- [[洛谷 P2474] [SCOI2008] 天平](https://www.luogu.com.cn/problem/P2474)\n\n  不怎么板但码量极小的题。\n\n  我们要求的是满足 $x_a + x_b \\lt x_i + x_j, x_a + x_b = x_i + x_j, x_a + x_b \\gt x_i + x_j (i \\ne j, i \\ne a, b, j \\ne a, b)$ 的无序二元组 $(i, j)$ 的个数。由于我们并不知道 $x$ 中的具体数值，只知道部分大小关系，又发现我们可以把上述和式转化为差式，所以维护两个数的差的范围即可。","tags":["日祭"],"categories":["OI","记录"]},{"title":"P6808 Candies 题解","url":"/article/P6808-Candies-题解/","content":"\n### 鲜花\n\n校内模拟赛T3，赛时想到了正解的 $60\\\\%$，所以就得了 $60$ 分……\n\n赛后 T 了若干发之后终于过了。\n\n---\n\n本文提供一种非回退背包的解法。\n\n在下文中，记 $k = \\sum_{i = 1}^n a_i$。\n\n### Solution 1\n\n假设我们修改 $a_i$，设用其他数拼出的方案数为 $cnt_ i$ ，那么当 $a_ i'$ 足够大时，有 ${cnt_ i'}_ {max} = 2cnt_ i + 1$。所以问题就转化到了求 $\\max_ {i = 1}^{n} cnt  _i$ 与 $i$。\n\n考虑枚举 $i$，并对于每个 $i$ 进行 DP 计算 $cnt_i$。求出最大值与最大值位置（即 $p$）后，需要求 $q$。\n\n设 $f_i$ 表示是否能凑出 $i$。很容易发现，当 $\\sum_{i = 1}^k [f_i = 1, f_{i + q} = 1] = 0$ 时，$q$ 合法。暴力枚举即可。\n\n时间复杂度 $O(n ^ 2k + k ^ 2)$，完全不能接受。\n\n### Solution 2\n\n我们发现，在第一种解法中，对于同一个物品，进行了太多次的背包 DP。我们尝试只进行一次DP，**并标记为了凑出当前这个数，有哪些位置必须被选取**。若不需要选取第 $i$ 个数，代表当我们修改 $a_i$ 时仍然能凑出这个数。\n\n具体地，设 $dp_{i, j}$ 表示为了凑出 $i$，是否需要 $a_j$。转移方程如下。\n\n$$\nf_i = \\mathop{bitor}\\limits_{1\\le k\\le n} f_{i - a_k}\\\\\n\\ \\\\\ndp_{i, j}=\n\\mathop{bitand}\\limits_{1\\le k\\le n,\\ f_{i - a_k} = 1}\n\\begin{cases}\ndp_{i - a_k, j}\\ (j \\ne k)\\\\\n1\\ (j = k)\n\\end{cases}\n$$\n\nDP 完之后统计 $cnt_i$，剩余步骤与解法一相同。\n\n时间复杂度仍然是 $O(n ^ 2k + k ^ 2)$，但常数好得多，在洛谷上取得了 $60$ 分的好成绩！（这也是我赛时的做法，个人认为特别符合直觉。）\n\n### Solution 3\n\n考虑优化一下求 $q$ 的过程。前文已推得，当 $\\sum_{i = 1}^k [f_i, f_{i + q}] \\ne 0$，$q$ 不合法。设全集（可重集）为 $U$，此时有可重集 $S, T$ 满足 $S, T \\subset U, (\\sum_{i \\in S} b_i) - (\\sum_{i \\in T} b_i) = q$。再正反做一次背包即可。总时间复杂度 $O(n^2k)$，还是卡。\n\n### Solution 4\n\n由于所有状态都是 $0$ 或 $1$，所以可以用 ``bitset`` 优化。最终复杂度 $O(\\frac{n ^ 2k}{w})$，趋近于 $O(nk)$，可以通过。\n\n### Code\n\n在代码中，``dp[i][0]`` 代表文中的 $f_i$，其余的 ``dp[i][j]`` 代表文中的 $dp_{i, j}$。\n\n```cpp\nint n, a[105], sum, cnt[105], mx, p;\nbitset<105> dp[700005];\nbitset<1400005> tmp;\n\nint main() {\n\tread(n);\n\tfor(int i = 1; i <= n; ++i)\n\t\tread(a[i]), sum += a[i];\n\t// 初始化 dp 数组\n\tsort(a + 1, a + 1 + n);\n\tdp[0] = 1, dp[1][0] = 0;\n\tfor(int i = 1; i <= n; ++i)\n\t\tdp[1][i] = 1;\n\tfor(int i = 2; i <= sum; ++i)\n\t\tdp[i] = dp[i - 1];\n\t// 计算 dp 数组\n\tfor(int i = 1; i <= n; ++i)\n\t\tfor(int j = sum; j >= a[i]; --j)\n\t\t\tif(dp[j - a[i]][0]) {\n\t\t\t\tdp[j] &= dp[j - a[i]];\n\t\t\t\tif(!dp[j][0]) dp[j][i] = 1;\n\t\t\t\tdp[j][0] = 1;\n\t\t\t}\n\t// 统计 cnt 并计算 p\n\tfor(int i = 1; i <= sum; ++i)\n\t\tif(dp[i][0])\n\t\t\tfor(int j = 1; j <= n; ++j)\n\t\t\t\tif(!dp[i][j])\n\t\t\t\t\t++cnt[j];\n\tmx = p = 0;\n\tfor(int i = 1; i <= n; ++i)\n\t\tif(cnt[i] > mx) mx = cnt[i], p = i;\n\t// 计算 q\n\ttmp[7000 * n] = 1;\n\tfor(int i = 1; i <= n; ++i)\n\t\tif(i != p)\n\t\t\ttmp = tmp | (tmp << a[i]) | (tmp >> a[i]);\n\tfor(int i = 1; i <= sum - a[p] + 1; ++i)\n\t\tif(!tmp[7000 * n + i])\n\t\t\treturn printf(\"%d %d\\n\", a[p], i), 0;\n}\n```\n\n这代码截止发题解当天竟然还跑出了[洛谷最优解](https://www.luogu.com.cn/record/200199228)。（不过做这道题的人少。）","tags":["DP","bitset","DP 优化"],"categories":["OI","题解"]},{"title":"2025 年日祭","url":"/article/diary/2025/","content":"\n- [2025 年 1 月日祭](/article/diary/2025/01/)\n- [2025 年 2 月日祭](/article/diary/2025/02/)\n- [2025 年 3 月日祭](/article/diary/2025/03/)\n- [2025 年 4 月日祭](/article/diary/2025/04/)\n- [2025 年 5 月日祭](/article/diary/2025/05/)\n- [2025 年 6 月日祭](/article/diary/2025/06/)\n- [2025 年 7 月日祭](/article/diary/2025/07/)\n- [2025 年 8 月日祭](/article/diary/2025/08/)\n- [2025 年 9 月日祭](/article/diary/2025/09/)\n- [2025 年 10 月日祭](/article/diary/2025/10/)\n- [2025 年 11 月日祭](/article/diary/2025/11/)\n- [2025 年 12 月日祭](/article/diary/2025/12/)","tags":["日祭"],"categories":["OI","记录"]},{"title":"2025 年 1 月日祭","url":"/article/diary/2025/01/","content":"\n### 2025.1.4 新的一年\n\n今日歌曲：**New Year's Day**\n\n去年停课的时候是有记日祭的，但是有一些是手写的，一直都还没有整理好。今天看到一个简单的trick，想记下来。于是，就又开始写日祭了。\n\n- [[洛谷 P2831] [NOIP2016 提高组] 愤怒的小鸟](https://www.luogu.com.cn/problem/P2831)\n\n  一道远古状压题了。（一是指题目本身远古，二是指这道题是好久之前就该做的题。）看到第一篇题解的trick，想起去年暑假集训的时候也有这样一个trick，但是忘了是哪道题。这个trick挺简单的，但也挺好用：状压时，如果目标状态是全0或全1，并且转移顺序不影响结果，那么可以直接从最低位的1或0转移，因为最低位最终一定会被转移，而顺序又不影响结果，所以这样做可以优化掉 $O(n)$ 的复杂度。其他的按正常状压即可。\n\n- [[Atcoder ARC100E] Or Plus Max](https://www.luogu.com.cn/problem/AT_arc100_c)\n\n  今天学了 SOSDP，挺神奇的一种 DP。这个题算是板子题吧。只用维护子集的最大值与次大值即可。\n\n今天下午给初二机房的办了一场比赛，整体比较顺利。（所以没做什么题。）比赛链接：[CWOI ER 1 & NYR](https://www.luogu.com.cn/contest/222438)。\n\n今天感觉要掉橙了，但是Rated的比赛还要等一周。想着把之前那篇被打回的题解改了交了，但是晚上写给初二机房的的题解了，没空。看明天改吧。\n\n### 2025.1.10 新的开始\n\n今日歌曲：Castles Crumbling\n\n今天考完期末，回来一看，天塌了，掉橙了。明天打一场比赛。\n\n现在终于确定15班后续的各种事项了。又是一个**新的开始**。\n\n另外，我就莫名奇妙地进省选了（尽管是体验名额）。还有一个有趣的事实：\n\n> 我没有提高组一等奖，然而我进了NOIP（体验名额）；我没有NOIP一等奖，但我进了省选（体验名额）。\n\n期待人生中的第一场SCOI（希望不要爆零）。\n\n### 2025.1.12 言而无信\n\n今日歌曲：Back To December （好吧其实是存货）\n\n我果然是一个**言而无信**的人。踩一脚前天的日祭，昨天还是没打比赛。\n\n今天%你赛，除了暴力的B和C，其它全挂了分。至于A，调试的时候把模数写掉了。被暴扣70分呜呜呜。\n\n最终荣获 $30 + 10 + 30 + 0 = 70$ 的**高**分。\n\n- A - 括号序列\n\n  题目：给一个由左右括号构成的字符串 $s$，对于每一个位置 $i$，输出有多少个子串，满足这个子串是一个合法的括号序列，并且 $i$ 这个位置在子串中。\n\n  题解：简单维护前缀与后缀的括号数量即可。（忘写**该死的**模数暴扣70pts。）\n\n- C - 矩阵删除\n\n  题目：给一个 $n \\times m$ 的 01 矩阵，我们想在每一行删除一个元素，得到一个 $n \\times (m - 1)$ 的矩阵。其中删除的元素的位置 $(i, a_i)(1 \\le i \\le n)$，满足 $\\vert a_{i} - a_{i + 1} \\vert \\le k(1 \\le i \\lt n)$。请问最后能得到多少种不同的矩阵。两个矩阵如果删除的元素位置不同，但最后得到的结果相同，我们认为是相同的。由于答案很大，输出答案对 $10^9+7$ 取模的值。\n\n  题解：比较板的DP，但是赛时思路没那么清晰，也没去推式子。分别维护对于每一个位置的方案数以及与旁边位置重合的方案数，推出式子后发现全都是求和，于是用前缀和维护即可。\n\n### 2025.1.13 乐极生悲\n\n今日歌曲：Wonderland\n\n今天期末考试考完了，整体还行，语文更是考到了惊人的 $127.5$，要知道我之前最高的一次也就 $122$ 左右，而且还经常上不了 $120$，这次简直是超常发挥。听到成绩的时候直接喜极而泣了。\n\n下午体育课，刚好初一体锻放歌，放得全是霉霉的歌，我还去点了几首。开心。\n\n然而下课要集合的时候，我小跑了一下，而这下就恰好被足球爆头，眼镜镜架直接断掉，箍牙的铁丝直接断掉，嘴皮直接被铁钉磨得烂掉，鼻子被眼镜压了一个印子，还在流鼻血。\n\n真是**乐极生悲**。\n\n### 2025.1.17 傻子游戏\n\n今日歌曲：Foolish One\n\n今天开始上课六天。\n\n昨天听说 jmr 拿了清华一等约。祝贺他。\n\n这周二（1.14）已经回到15班了。\n\n昨天晚上玩梗发癫，还玩了离谱的**傻子游戏**。达成成就：在5.5h里睡够8h。\n\n上午%你赛，T1忘了判零挂了10pts，T3是之前做过的一道原题，于是赛时死磕，最后没调出来。赛时的思路基本上是对的，但是没想到容斥；又因为我钦定的一个条件有问题，导致正确性略有问题，最后没调出来。\n\n喜提 $90$ 分。\n\n- A - 串\n\n  题目：在虱子王国，一句话由 $n$ 个词组成，其中恰好有 $k$ 个词是怪的，其它的词都不是怪的。众所周知，负负得正，我们定义一句话的一个区间是怪的，当且仅当其中含有奇数个怪词。请构造一句符合条件的话，使得其中怪的区间数量最多。\n\n  题解：发现答案为奇数块乘上偶数块。构造即可。\n\n- B - 艺术家\n\n  题目：给定一个长度为 n 的颜色序列 $c$。再给出 $m$ 个区间，第 $i$ 个区间为 $[li, ri]$，**保证任何两个区间都是不相交或包含的关系**。在接下来的 $q$ 个单位时间内，第 $i$ 个时间会给定 $x, y$，表示将 $c_x$ 变为 $y$。请对于每一个区间求出，最早的其中所有颜色都互不相同的时间。\n\n  题解：\n\n  > **保证任何两个区间都是不相交或包含的关系。**\n\n  所以可以把区间建成一棵树。当一个子区间合法，其父区间才有可能合法。在原数轴上维护 $lst_i$ 表示 $i$ 之前第一个颜色与 $i$ 相同的点，则一个区间内部颜色互不相同等价于 $\\max\\{lst_i, l \\le i \\le r\\}$。使用线段树维护。对于 $lst$ 的更新，用 set 维护。**即可**。（难写死了，还没写完。）\n\n- C - 黑白树 （[[Atcoder ARC108F] Paint Tree](https://atcoder.jp/contests/arc108/tasks/arc108_f)）\n\n  题解：画一个直径上吊着节点的图，讨论一个节点在什么时候可以带来贡献。容斥计算即可。\n\n晚上打了入门赛，可以加咕值了。\n\n晚自习最后10分钟，记一些话。\n\n> 我的信竞，在进步么？看起来好像是的。要是拿现在的我和一年前的我对比，那已足以 $k$ 倍杀。但……补过的题还是不会做，码量大一点的又不愿意写，一到晚自习就写不动了，于是写一会儿又开始划水。我倒有一个优点，就是一般不会去刷水题（除了入门赛）。但是，难一些的题……绿题效率低，蓝题想不全于是又看题解，紫题几乎无法独立完成。\n>\n> 最终做了的题似乎是白做。\n>\n> ……\n>\n> 终究还是人的问题。\n\n### 2025.1.18 正难则反\n\n今日歌曲：Wildest Dream\n\n这两天换了头像。\n\n今天上午VP [CodeForces Round 997 (Div. 2)](https://codeforces.com/contest/2056)。\n\n- [[CodeForces 2056A] Shape Perimeter](https://codeforces.com/contest/2056/problem/A)\n\n  计算重叠部分即可。\n\n- [[CodeForces 2056B] Find the Permutation](https://codeforces.com/contest/2056/problem/B)\n\n  我们总是建从小节点到大节点的**有向**边，对这个DAG进行拓扑排序。因为我们有时并不想让一个小节点往大节点连边，所以用堆维护入度为零的点即可。（可恶，赛时**多测不清空**卡了我一发。）\n\n- [[CodeForces 2056C] Palindromic Subsequences](https://codeforces.com/contest/2056/problem/C)\n\n  挺**玄学**的构造题。我们希望大概长这样的结构：\n\n  $$\\underbrace{1,\\ 1,\\ 1,\\ \\dots,\\ 1}_ {a个1},\\ 2,\\ 3,\\ 4,\\ \\dots, a + 3,\\ \\underbrace{1,\\ 1,\\ 1,\\ \\dots,\\ 1}_ {a - 1个1}$$\n\n  这样构造出的答案有 $a(a + 2) + 1 = a^2$ 个，可以通过。稍微分讨一下即可。\n\n  赛后看了一下题解，发现自己好唐：\n\n  $$1,\\ 2,\\ 3,\\ \\dots,\\ n-2, \\ 1,\\ 2$$\n\n- [[CodeForces 2056D] Unique Median](https://codeforces.com/contest/2056/problem/D)\n\n  又是一道**正难则反**，计算坏的序列的个数。这道题的trick挺巧妙的，但没接触过，确实想不出来。发现长度为奇数的序列一定不是坏的，所以只考虑偶数长度序列。对于一个序列的中位数 $x$，将序列中 $\\le x$ 的数化为 $-1$，其它的化为 $1$。若最终区间和为 $0$，那么这个序列就是坏的。另外要注意去重。维护前缀和即可。\n\n- [[CodeForces 2056E] Nested Segments](https://codeforces.com/contest/2056/problem/E)\n\n  组合数学。这个包含或不交的关系恰好和昨天的B差不多。我们想要尽可能多的节点数量，那么需要构造成二叉树。（这里具体不想证明。）对于某一个节点，设其儿子数量为 $cnt_u$，则计算 $\\prod C_{cnt_u - 1}$（卡特兰数）即可。\n\n下午先把E题改了，学习了一下吉司机线段树。这东西挺好理解的，写起来也很爽，但就是又臭又长又难调。\n\n- [[洛谷 P10639] [BZOJ4695] 最佳女选手](https://www.luogu.com.cn/problem/P10639)\n\n  这道题本来是第二道模板题的，但因为第一题相当于第二题的子问题，所以直接冲着这道题来了。写板子即可。（啊啊啊终于还是讨厌上吉司机线段树了啊。）\n\n今天整理了**一些**[去年的日祭](/article/diary/2024/)。还没把手写的整理上去。\n\n### 2025.1.19 简直糖丸\n\n今日歌曲：All You Have To Do Was Stay\n\n今天上午%你赛，T1爆零了，**简直糖丸**。一共得了 $60$ 分的**高**分。\n\n下午给初二讲题，讲得……**简直糖丸**。\n\n烦球，今天最后几乎啥都没干。\n\n啊不是为什么T1爆炸啊。\n\n### 2025.1.20 简直乐丸\n\n今日歌曲：Daylight\n\n昨晚又是在5.5h内睡满8h的一晚。\n\n今天上午VP [CodeForces Round 998 (Div. 3)](https://codeforces.com/contest/2060)。才做四道，糖丸了。\n\n- [[CodeForces 2060E] Graph Composition](https://codeforces.com/contest/2060/problem/E)\n\n  赛时就很唐。并查集查连通并算连通块即可。\n\n- [[CodeForces 2060F] Multiplicative Arrays](https://codeforces.com/contest/2060/problem/F)\n\n  一道很好的DP+组合数学题。赛时推式子感觉推出来了，结果赛后再一看伪了。很容易发现，$\\sum_{i=1}^{len}[a_i \\neq 1] \\le 16$，所以DP计算非 $1$ 元素的情况，再用组合数学即可。\n\n- [[CodeForces 2060G] Bugged Sort](https://codeforces.com/contest/2060/problem/G)\n\n  这个题就挺有意思的。[这篇题解](https://zhuanlan.zhihu.com/p/19369211716)感觉讲得比官方题解还要清晰。可以观察到，当 $n \\ge 3$，我们可以任意（正常）交换两组的位置。因此，我们可以将两组数进行翻转。换而言之，进行翻转的次数必须是偶数次。这里记翻转次数为 $cnt$。我们把较小的数放在 $a$，较大的放在 $b$。若按 $a$ 排序后 $b$ 有序，那么该组数据有解，当且仅当满足这三个条件之一：\n\n  - $2 \\mid cnt$\n  - $\\exists b_{i - 1} \\lt a_i,\\ 2 \\mid n,\\ 2 \\mid i$，此时可以选择交换奇数组数翻转以改变 $cnt$ 的奇偶性，处于“无敌”状态。\n  - $2 \\nmid n$，此时可以翻转全部以改变 $cnt$ 的奇偶性。\n\n  否则无解。判断**即可**。\n\n今天下午看了一个2025年度第一个[乐子](https://lglg.top/1042691)（[原帖](https://www.luogu.com.cn/discuss/1042691)，[内部帖](https://discourse.xinyoudui.com/t/topic/34584)），**简直乐丸**。\n\n又一个[新梗](https://lglg.top/r/7170050)诞生了：\n\n> @chen_zhe 管理制度错了就要改，不能让无辜的人以泪洗面，如果管理制度还是这样的话，**洛谷将会越来越腐败！！**，我大不了就棕名，我要让洛谷知道瞎诬陷的严重性！\n\n### 2025.1.21 反则难证\n\n今日歌曲：deja vu\n\n今天上午VP [CodeForces Round 999 (Div. 1 + Div. 2)](https://codeforces.com/contest/2061)，状态还好。\n\n- [[CodeForces 2061C] Kevin and Puzzle](https://codeforces.com/contest/2061/problem/C)\n\n  有点思维的DP，题目挺好的。\n\n- [[CodeForces 2061D] Kevin and Numbers](https://codeforces.com/contest/2061/problem/D)\n\n  又是一道正难则反。我们很难将 $a$ 合并，那就把 $b$ 中不合法的进行拆分。用 map 维护即可。其实这道题也好证 ~~，只是想凑一个小标题罢了~~。\n\n- [[CodeForces 2061E] Kevin and And](https://codeforces.com/contest/2061/problem/E)\n\n  这题有点……难评。为什么字典树过不了啊……\n\n  因为 $m$ 很小，所以对 $b$ 进行状压，再将 $a$ 的变化量压进堆里选最大的 $k$ 个即可。（好吧其实不是特别理解。）\n\nF 听不懂。\n\n附一张梗图。\n\n![](/images/2025-%E5%B9%B4%E6%97%A5%E7%A5%AD/pic1.png)\n\n（这里声明一下，不是 jmr 讲得不好，而是实在听不懂。）\n\n### 2025.1.22 比特塞特\n\n今日歌曲：Maroon\n\n年前最后一天了。\n\n上午%你赛 $100+10+60+0=170,\\ rank\\ 4$。T3没用 **bitset** 优化暴扣了 $40$ 分。可恶。\n\n- A - bins （[[洛谷 P6807] [BalticOI 2010 Day2] Matching Bins](https://www.luogu.com.cn/problem/P6807)）\n\n  差分即可。\n\n- C - candies（[[洛谷 P6808] [BalticOI 2010 Day2] Candies](https://www.luogu.com.cn/problem/P6808)）\n\n  [题解](/article/P6808-Candies-题解/)。","tags":["日祭"],"categories":["OI","记录"]},{"title":"NOIP + 游记（流水帐）","url":"/article/NOIP-游记/","content":"\n### 为什么是NOIP + 游记？\n\n因为其实是 ``NOIP游记`` 和 ``环球中心游记`` 。\n\n### Warning\n\n本文纯流水帐，想了解题目做法的请移步。\n\n### Day -34\n\n考 ``CSP-S`` 了，炸掉了。赛时估分只有120-160pts。\n\n### Day -26\n\n出分了，170pts。\n\n### Day -11\n\n出分数线了，SC180pts呜呜呜。\n\n### Day -??\n\n老师给我们报了NOIP。\n\n### Day -??\n\nNOIP线出来了，165pts，好险。\n\n### Day 0\n\n#### 7：50\n\n到嘉祥锦江了。\n\n#### 8：00\n\n在机房门口和同学们玩了一会儿，还上了个厕所（嘉祥的卫生间竟然有坐便。但是，很难评。。。）。\n\n#### 8：20\n\n发现我的键盘空格键回弹不好，找老师换了一个。\n\n#### 8：30\n\n开考了。大概看了一下题，第一眼T2、T3计数，感觉不可做；T1贪心，感觉可做；T4数据结构应该能骗点分。开写T1。\n\n#### 10：45\n\n由于本蒟贪心不好，再加上本来太菜了，T1花了约2.25h（其实中间也有摸鱼）才过大样例。做法：找两个字符串在“连通块”内0和1的个数，再尽量去匹配。又把剩下的题看了一遍，感觉T2是数学题，可做。开写T2。\n\n#### ??：??\n\n写了一下 $m = 1$ 和特殊性质A，预估35pts。这两个性质是很容易推出式子来的。\n\n#### 12：30\n\n边摸鱼边写迷惑行为边推式子，T2最后蒙猜凑测量斗过大样例了。做法：数学，推式子，这里不（想）详细展开。没时间写其它题了。开颓。\n\n#### 13：00\n\n考完了。赛时预估200pts。\n\n#### Summary\n\n本初中蒟蒻第一次打NOIP，还是太蒟了，主要在摸鱼或罚坐（还有写迷惑行为），不过感觉发挥比CSP-S要好。\n\n#### 13：10\n\n出考场，和家长、同学沟通，准备找个地方一起玩。最后选择去了[JDScript0117](https://www.luogu.com.cn/user/910593)家附近的环球中心。另外还有[hard_plan](https://www.luogu.com.cn/user/749406)和[HD0X](https://www.luogu.com.cn/user/545470)。\n\n路上浅浅讨论了一下。[hard_plan](https://www.luogu.com.cn/user/749406)说了一个关于T4LCA的trick，但是就算我赛时知道这个trick我也做不来（因为我现在还是做不来）。\n\n#### 13：??\n\n到环球中心了。吃的~和~麦~府~当~捞~劳~面~。它的薯~面~条都是用土豆做的！\n\n#### 14：??-15：??\n\n吃完了。不知道玩什么。先去喜茶坐着了。考虑剧本杀或桌游之类，最后说去买扑克牌，结果我妈让我16：00就要走，没买扑克牌。无语了。\n\n#### 15：40\n\n喜茶太多人了，到星巴克一人点了一杯拿铁。\n\n#### 16：00\n\n我走了，其他人说是去旁边公园骑车了。\n\n#### 17：00\n\n[JDScript0117](https://www.luogu.com.cn/user/910593)给我打电话让我立即马上随便发两条朋友圈，原来他们没有骑车，在公园里晒太阳、玩真心话大冒险。我本来以为他们这些大朋友不像我这个小朋友一样喜欢玩真心话大冒险，所以最开始就没提出来，最后一下午啥也没干。烦。\n\n#### 17：10\n\n重新写了T2的代码，洛谷上民间~故事~数据A了（民间故事->folklore）。\n\n#### 18：00\n\n[yishu2(教练)](https://www.luogu.com.cn/user/17126)说第一题是DP，有坑，贪心可能会挂一些。看运气吧。\n\n### Day 1\n\n洛谷上四道题的民间数据已经陆续在出了，中午测了T1，过了。最终自测200pts，希望不要写挂。看了一下去年的题和分数线，洛谷上给的难度是今年严格不小于去年，去年SC一等线200pts，今年就看运气了。\n\n### Day 2 - 6\n\n_Day 6 : 12月6日_\n\n这几天中间不定时地交民间数据（因为害怕数据更改被卡掉，不过事实上并没有），Waiting。\n\n### Day 7\n\n今天早上准备去高中的时候恰好碰到``LCY``，他说出分了。啊？不是12月9日才出分吗？（而且12月9日是我的生日。）结果提前了？这就是住校生的缺点——信息闭塞。于是赶紧跑到机房，查分——爽！没挂！200pts。\n\n虽然说啊，我还是够蒟的，但是该拿的分还是拿到了，还是比较开心。\n\n达成成就： $\\mathrm{S} \\lt \\mathrm{NOIP}$ 。","tags":["NOIP","休闲娱乐"],"categories":["OI","游记"]},{"title":"[ARC050C] LCM 111 题解","url":"/article/ARC050C-LCM-111-题解/","content":"\n## 一句话题解\n\n转化两个大数的 $\\gcd$，再用倍增求答案。\n\n## 题意\n\n[题目](https://www.luogu.com.cn/problem/AT_arc050_c)\n\n给你 $a, b, m$，其中 $1 \\leq a, b \\leq 10^{18}, 2 \\leq m \\leq 10^9$，让你求 $a$ 个 $1$ 拼接起来的数和 $b$ 个 $1$ 拼接起来的数的最小公倍数。\n\n## 思路\n\n我们构造一个函数 $\\mathrm{one}(x)$ 表示 $x$ 个 $1$ 拼接起来，用数学语言表述就是：\n\n$$\n\\mathrm{one}(x) = \\frac{10^x - 1}{9}\n$$\n\n同时又有 $\\mathrm{lcm}(a, b) = a \\cdot b \\div \\gcd(a, b)$，那么我们要求的就转化成了：\n\n$$\n\\mathrm{one}(a) \\cdot \\mathrm{one}(b) \\div \\gcd(\\mathrm{one}(a), \\mathrm{one}(b))\n$$\n\n因为 $\\mathrm{one}(a)$ 与 $\\mathrm{one}(b)$ 都比较好求，所以此时的问题就转移到了怎么求 $\\gcd(\\mathrm{one}(a), \\mathrm{one}(b))$ 上来。\n\n我们尝试感性理解一下。可以发现：\n\n$$\n\\gcd(\\mathrm{one}(a), \\mathrm{one}(b)) = \\mathrm{one}(\\gcd(a, b))\n$$\n\n此时答案就变成了：\n\n$$\n\\mathrm{one}(a) \\cdot \\mathrm{one}(b) \\div \\mathrm{one}(\\gcd(a, b))\n$$\n\n我们把这个式子分成两组：\n\n$$\n\\mathrm{one}(a)\n\\\\\n\\mathrm{one}(b) \\div \\mathrm{one}(\\gcd(a, b))\n$$\n\n对于每一组单独用倍增计算即可。详见代码。\n\n[提交记录 | 快得飞起](https://atcoder.jp/contests/arc050/submissions/57132805)\n\n## AC Code\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nint a, b, p, d;\n\nint gcd(int a, int b) {\n\tif (b == 0) return a;\n\treturn gcd(b, a % b);\n}\n\nint qpow(int x, int y) { // 快速幂\n\tint ans = 1;\n\twhile (y) {\n\t\tif (y & 1) ans = (ans * x) % p;\n\t\ty >>= 1;\n\t\tx = (x * x) % p;\n\t}\n\treturn ans;\n}\n\nint cal(int x, int y) { // 倍增计算答案\n\tint now = 1, npow = qpow(10, y), ans = 0;\n\twhile (x) {\n\t\tif (x & 1) ans = ((ans * npow) % p + now) % p;\n\t\tx >>= 1;\n\t\tnow = ((now * npow) % p + now) % p;\n\t\tnpow = (npow * npow) % p;\n\t}\n\treturn ans;\n}\n\nvoid solve() {\n\tcin >> a >> b >> p;\n\td = gcd(a, b);\n\tcout << cal(a, 1) * cal(b / d, d) % p << endl; // 对于第二组，gcd(a, b) 是一个循环节，一共有 b / gcd(a, b) 个循环。\n\treturn;\n}\n\nsigned main() {\n\tcin.tie(0);\n\tcout.tie(0);\n\tint T = 1;\n\twhile (T--) solve();\n\treturn 0;\n}\n```\n\n## 最后\n\n问我为什么不推式子？如果你直接开始推式子，你会推出一个带分母的式子。有分母就要求逆元，但是本题中并未保证模数的性质，所以不能直接求逆元。","tags":["数论","矩阵加速"],"categories":["OI","题解"]},{"title":"[COCI 2023/2024 #2] Zatopljenje 题解","url":"/article/COCI-2023-2024-2-Zatopljenje-题解/","content":"\n### 闲话\n\n考前集训，每日一练做到的题，~我写挂了五次~。自己想到**分块**的做法，看题解区没有，于是来发一篇。\n\n### 思路\n\n我们注意到，当海水高度为 $x$ 时，区间 $[l, r]$ 的小岛的个数可以这么计算：\n\n$$\n[h_l \\gt x] + \\sum_{i = l}^{r - 1}[h_i \\le x \\lt h_{i + 1}]\n$$\n\n所以第 $i$ 个位置产生贡献**当且仅当** $h_i \\le x \\lt h_{i + 1}$ ，考虑分块并预处理出每个块的答案。由于 $0 \\le h_i, x_i \\le 10^9$ ，所以要**离散化**。时间复杂度 $O((n + q)(\\sqrt{n} + \\log{n}))$ ，虽然比不上线段树或树状数组，但是思路还是比较好想的。\n\n具体细节见代码实现。\n\n**Tip : 不要开``long long``，不然会MLE。**\n\n### Code\n\n```cpp\n#include <bits/stdc++.h>\n#define PII pair<int, int>\nusing namespace std;\ntemplate <typename _Tp>\ninline void read(_Tp &x) {\n\tint neg = 1;\n\tchar ch;\n\twhile(ch = getchar(), !isdigit(ch)) if(ch == '-') neg = -1;\n\tx = ch - '0';\n\twhile(ch = getchar(), isdigit(ch)) x = (x << 3) + (x << 1) + (ch ^ '0');\n\tx *= neg;\n\treturn;\n}\n// bans[i][j] : 第 i 个块当 x = j 时的答案\nint n, q, a[200005], blk, cnt, bans[505][200005], x, l, r;\nPII p[200005];\nsigned main() {\n\tread(n), read(q);\n\tfor(int i = 1; i <= n; ++i) read(a[i]);\n\t// 加一个 0 ，方便离散化\n\ta[0] = 0, ++n;\n\t// 离散化\n\tfor(int i = 0; i < n; ++i) p[i] = {a[i], i};\n\tsort(p, p + n);\n\tfor(int i = 0; i < n; ++i) {\n\t\tif(i == 0) a[p[i].second] = 1;\n\t\telse {\n\t\t\tif(p[i].first == p[i - 1].first) a[p[i].second] = a[p[i - 1].second];\n\t\t\telse a[p[i].second] = a[p[i - 1].second] + 1;\n\t\t}\n\t}\n\t// 分块\n\tblk = sqrt(n);\n\tcnt = (n - 1) / blk + 1;\n\tfor(int i = 0; i < n - 1; ++i) if(a[i] < a[i + 1]) {\n\t\t\t// 差分计算答案\n\t\t\t++bans[i / blk][a[i]];\n\t\t\t--bans[i / blk][a[i + 1]];\n\t\t}\n\t// 前缀和\n\tfor(int i = 0; i < cnt; ++i) for(int j = 1; j <= n; ++j) bans[i][j] += bans[i][j - 1];\n\twhile(q--) {\n\t\tread(l), read(r), read(x);\n\t\t// 对 x 离散化，找到最后一个小于等于 x 的值\n\t\tint ind = lower_bound(p, p + n, (PII){x + 1, 0}) - p, ans;\n\t\tx = a[p[ind - 1].second];\n\t\t// l 点的答案\n\t\tans = a[l] > x;\n\t\tif(l / blk == r / blk) {\n\t\t\t// 在同一个块中\n\t\t\tfor(int i = l; i < r; ++i) ans += (a[i] <= x && a[i + 1] > x);\n\t\t}\n\t\telse {\n\t\t\t// 计算 l 所在块的答案\n\t\t\tfor(int i = l; i < (l / blk + 1) * blk; ++i) ans += (a[i] <= x && a[i + 1] > x);\n\t\t\t// 计算 r 所在块的答案\n\t\t\tfor(int i = r / blk * blk; i < r; ++i) ans += (a[i] <= x && a[i + 1] > x);\n\t\t\t// 计算中间块的答案\n\t\t\tfor(int i = l / blk + 1; i < r / blk; ++i)ans += bans[i][x];\n\t\t}\n\t\tprintf(\"%lld\\n\", ans);\n\t}\n\treturn 0;\n}\n```\n\n[Submisson](https://www.luogu.com.cn/record/183250736)\n\n---\n\n**完结撒花！！！✿✿ヽ(°▽°)ノ✿**","tags":["数据结构"],"categories":["OI","题解"]},{"title":"文章访问密码","url":"/article/password/","content":"\n对于设置密码的文章，你需要正确回答问题才能阅读。\n\n每篇文章包含了若干个问题，每个问题的答案要么全为数字，要么全为小写英文字母。密码中你需要依次输入每个问题的答案，用 `,` 分隔。\n\n- 自述\n  1. 我六年级下最喜欢的一首歌，同时这首歌对我有特殊含义？若干个小写字母，删去空格。\n  2. 我初一所在班级？若干个数字。\n  3. 我转班主要因为谁？人名拼音首字母。\n  4. 我初二上所在班级？若干个数字。\n  5. 我初二下所在班级的班主任？人名拼音首字母。\n- 祭我的 2025\n  1. 我初二上最喜欢的一首歌，同时我用这首歌形容我的初二下？若干个小写字母，删去空格。\n  2. 我初三上所在班级的班主任？人名拼音首字母。\n  3. 我九月停课时，我所在班级还有哪两个人和我一起停课，其中谁与我关系更好？人名拼音首字母。\n  4. 在哪次集体活动中，没有同学想起了我？活动的拼音首字母。\n  5. 我的生日？格式：`yyyymmdd`。\n- 数据删除\n  1. 本文记录了从多久开始的事情？格式：`yyyymmdd`。\n  2. 本文记录了到多久结束的事情？格式：`yyyymmdd`。\n  3. 在本文记录的这段时间内，我最喜欢的一首歌？若干个小写字母，删去空格。\n  4. 用一句歌词形容我对本文记录的事情结束的看法？若干个小写字母，删去空格。","tags":["公告"],"categories":["公告"]},{"title":"日祭","url":"/article/diary/","content":"\n- [2024 年日祭（部分）](/article/diary/2024/)\n- [2025 年日祭](/article/diary/2025/)\n- [2026 年日祭](/article/diary/2026/)","tags":["日祭"],"categories":["OI","记录"]},{"title":"2024 年日祭（部分）","url":"/article/diary/2024/","content":"\n此处仅展示了部分内容，其余内容将不会整理。\n\n### 2024.10.18\n\n由于时间久远，所以这一天的这一篇主要记录题目与思路。\n\n- A - 字符串\n\n  题目：给定两个字符串 $A_0$ ， $B_0$ ，且满足： $A_i = A_{i - 1} + B_{i - 1}$ ， $B_i = B_{i - 1} + A_{i - 1}$ ，求 $A_{935}$ 的第 $x$ 位。\n\n  题解：事实上， $935$ 并不影响答案，因为此时长度足够长。对于一个 $A$ 的“长串”，可以将其分成 $A, B, C, D$ 四段，发现 $A$ 与 $D$ 相同， $B$ 与 $C$ 相同。所以我们就一直从后面往前跳，直到无法跳为止。\n\n- B - 区间\n\n  题目：给定 $n$ 个区间 $[l_i, r_i]$ ，对于一个 $x$ ，若 $l_i \\lt x \\lt x$ ，则这个区间会被分割成 $[l_i, x]$ 与 $[x, r_i]$ 。尝试防止 $n$ 个 $x$ ，使得分割后的区间数尽量多。求最大区间数。\n\n  题解：先离散化，记录下每个区间的长度与价值（被几个原来的区间覆盖），再对新区间按价值排序去取 $x$ 。\n\n- C - 构树\n\n  题目：给定一棵有 $n$ 个结点的树，边有边权。判断是否有一个有 $n$ 个点的完全图，其边权都是 $[1, \\frac{n(n - 1)}{2}]$ 的不同整数，且给定的树是这个完全图的最小生成树。若有，输出完全图的数量与一种方案；若没有也请报告。\n\n  题解：显而易见，我们将两个树（并查集）合并时，会产生一定数量的“废物”边（也就是连接这两个树的其它的边）。而如果有一条边的边权比生成树中一条边的边权小且这条边没有被选，那么这条边肯定就是一条“废物”边，根据这个结论计算答案。构造时，把“废物”边甩到一个 ``queue`` 里面，要用“废物”边时从里面取一个即可。\n\n- D - 字典树\n\n  题目：有 $n$ 个数字串，对于每一个数字串都会以相同的几率变为它自己的一种排列。将这些数字串放到字典树里，求字典树大小的期望值。\n\n- [P9912 [COCI 2023/2024 #2] Zatopljenje](https://www.luogu.com.cn/problem/P9912)\n\n  [题解](/article/COCI-2023-2024-2-Zatopljenje-题解/)\n\n### 2024.10.19\n\n- A - Soso的并查集写挂了\n\n  题目：维护并查集的查询与合并。其中用 $find(x)$ 寻找 $x$ 的祖先时，操作的代价是 $x$ 到根的路径上每个点的点权之和。求总代价。\n\n  题解：我们知道每个点到根的距离，而当根更新时，向下传递增加的点权即可。\n\n- B - 迁跃\n\n  题目：给定一棵树，最开始你在 $1$ 号点（根）。接下来，你可以向下走，每经过一条边就可以获得这条边的权值。你可以花 $k$ 的代价向上走一条边，但一条边最多被经过两次（下去与上来）。你可以停在任意结点。问你最多获得多少的价值。\n\n  题解：第一遍 ``dfs`` 处理出以每个点为根并最终回到根所能获得的最大价值；遍历子树时，若这颗子树的价值大于 $k$ ，则选择这棵子树能带来正收益。第二遍 ``dfs`` 枚举最终在哪棵子树中停下：若这棵子树带来了正收益，则将答案减去这棵子树的答案并加上向上走所花费的 $k$ ，否则加上边权；接下来再继续向下遍历。\n\n- C - 回文回文回IV\n\n  题目：给定数组 $a$ ，问有多少种 $a$ 的排列，使得 $a$ 的前缀和数组 $s$ 是回文的。\n\n  题解：可以注意到，若要满足前缀和数组是回文的，需要满足 $i \\in [2, n], a[i] + a[n - i + 2] = 0$ 。我们记 $cnt_i$ 为数 $i$ 出现的次数。\n\n  - 当 $n$ 是奇数时，只能存在一对 $\\left|cnt[x] - cnt[-x]\\right| = 1$ ，多出来的那一个放在第一位。若不止一组或是相差超过 $1$ ，则无法满足上述条件。\n  - 当 $n$ 是偶数时，一定会有一个 $0$ 放在中间。所以要么所有数出现的次数都是偶数且至少有两个 $0$ （一个 $0$ 放在开头，一个 $0$ 放在中间），要么有奇数个 $0$ 且除此之外有且仅有一组 $\\left|cnt[x] - cnt[-x]\\right| = 1$ 。同理，若不止一组或是相差超过 $1$ ，则无法满足上述条件。\n \n  根据上面的条件，可以轻松得判断是否合法，但是如何计算还是一个大问题。\n\n  - 把每一对数看做整体，要在 $2 \\times \\lfloor\\frac{n - 1}{2}\\rfloor$ 个位置里面放置 $\\lfloor\\frac{n - 1}{2}\\rfloor$ 对，方案数： $(2 \\times \\lfloor\\frac{n - 1}{2}\\rfloor)!! = \\lfloor\\frac{n - 1}{2}\\rfloor! \\times 2 ^ {\\lfloor\\frac{n - 1}{2}\\rfloor}$ 。\n  - 第一位： $cnt_{ind}--$ 。\n  - $n$ 为偶数时中间的 $0$： $cnt_0--$ 。\n  - $0$ 的方案数： $\\frac{cnt_0!}{(\\frac{cnt_0}{2})!\\times2^{\\frac{cnt_0}{2}}}$ 。对于这些零的所有排列，要除以一个对中重复的情况与每个对的排列情况。\n  - 对于其它正负数对： $cnt_i!$ 。\n\n- D - 紫藤萝瀑布\n\n  题目：有 $n$ 朵花，每朵花有每朵花的颜色。有两种询问，第一种是要求两朵花的颜色相同（不独立），第二种是询问要使满足所有条件，要改变至少几朵花的颜色（独立）。\n\n  题解：显而易见，对于要求颜色相同的花可以看成一个连通块，需要修改的次数就是这个连通块的大小减去这个连通块的众数的个数。对于每个连通块维护权值线段树，合并两个块时也合并两个线段树即可。\n\n- [[CF1913D] Array Collapse](https://codeforces.com/problemset/problem/1913/D)\n\n  设 $dp_{i, 0/1}$ 表示前 $i$ 位是否保留第 $i$ 位的总种类数。若不留下，第 $i$ 位可以被第 $i$ 位前面的第一个比它小的数删掉，也可以让这个比较小的数与这个数一起被前面的更小的数删掉。若留下第 $i$ 位，那么考虑在哪些区间中它最小即可。用前缀和与单调栈维护。\n\n  补充[于2025.1.18]：这个题还可以用笛卡尔树来做。\n\n周六ABC打得还好，E做出来了，还是比较简单的。\n\n第一次打CF，打了两场 CF Div.2 ，做得烂得一批。感觉我做不动结论题，~猜~推不出结论。\n\n### 2024.10.21\n\n- A - 雷暴\n\n  题目：给定一个 $n \\times m$ 的矩阵，每个位置有颜色。对于每一种颜色的所有格子，你要用一个尽可能小的正方形覆盖它们。输出对于每个颜色，正方形的最小面积。\n\n  题解：处理出 $max_x, min_x, max_y, min_y$ 即可。\n\n- B - 神力\n\n  题目：你喜欢在~树~数轴上随机游走。最初你在原点。给定一个序列，由 $1$ 与 $-1$ 组成，表示第 $i$ 个时刻你会向正或负方向移动一格。但是对于每个时刻，你有 $p\\%$ 的概率不移动。问经过数轴上每个点的概率。\n\n  题解：设 $dp_{i, j}$ 为移动后 $i$ 次后经过 $j$ 的概率。对于移动与不移动两种情况分别讨论即可。\n\n- C - 之缘千里\n\n  题目：给定一个长度为 $2n$ 的序列 $a$ ，其中 $1$ 到 $n$ 各出现两次。尝试构造一个合法的且字典序尽量小的括号序列 $s$ ，使得当 $a_i = a_j$ 时， $s_i = s_j$ 。若不存在满足条件的括号序列，请报告。\n\n  题解：显而易见，第 $i$ 个左括号一定会出现在位置 $2i$ 之前，否则序列不合法。用 ``set`` 维护当前哪些位置之前还需要左括号。对于某一个位置与它的 ``friend`` ，尽量填左括号，在 ``set`` 中验证合法性并删除位置。若最终 ``set`` 不为空，则不存在合法的括号序列。\n\n### 2024.10.22\n\n今天是很水的一天，主要都在写 ``OIers' Lives`` 。\n\n- [[CF1919D] 01 Tree](https://codeforces.com/problemset/problem/1919/D)\n\n  我们可以看成最开始只有一个叶节点（根），再不断把现在已有的叶节点“分裂”成两个新的叶节点。我们把权值看成一个数组，那么分裂操作就是选择一个数 $x$ 并将 $x + 1$ 放在它的左侧或右侧。由此可得，这个序列中有且仅有一个 $0$ ；而对于权值不为 $0$ 的位置，要么它左侧第一个比它小的恰好比它小一，要么它右侧第一个比它小的恰好比它小一。否则无解。用单调栈维护即可。\n\n- [P9744 消除序列](https://www.luogu.com.cn/problem/P9744)\n\n  可以注意到，最优答案一定满足：对于某一个最终为 $1$ 的位置 $x$ ，将 $[1, x)$ 涂 $0$ 、将 $[1, x)$ 中是 $1$ 的位置涂 $1$ ，将 $[x + 1, n]$ 中是 $0$ 的位置涂 $0$ 。另外，我们将操作一、二放在一起用，可能能以更低的代价将 $[1, i]$ 变为 $0$ 。维护前后缀并对于每一个最终为 $1$\n\n### 2024.10.23\n\n今天略水。把 ``OIers' Lives`` 写完了，开始写 ``OI Cards Game`` 了。\n\n今天的考试题是 [【MX-S4】梦熊 CSP-S 2024 模拟赛](https://www.luogu.com.cn/contest/203482)。~话说这个出题人上辈子怕不是数据结构 + 二分和DP。~\n\n- A - [P11217 youyou 的垃圾桶](https://www.luogu.com.cn/problem/P11217)。\n\n  看起来还是一个比较板的数据结构（我写的线段树），但是要写一个线段树二分。最开始写的是一个双 $\\log$ （二分 + 查询），但是感觉可能被卡。后来自己想了一下，直接在线段树上二分，拿现成的区间和用，单 $\\log$ 解决。\n\n- B - [P11218 youyou 不喜欢夏天](https://www.luogu.com.cn/problem/P11218)。\n\n  对于对应位置的几种情况，贪心地尽量选价值大的即可，最后处理成最大子段和即可。\n\n### 2024.10.24\n\n今天有一点水。。。该听的题都听了，但是不想写。。。\n\n- A - 高维字符串匹配\n\n  题目： $k$ 维字符串匹配。\n\n  题解：暴力。\n\n- B - k 短路\n\n  题目：给定一个有向图，保证两点之间只有一条简单路径且每一个点最多在一个环中。求 $k$ 短路长度。\n\n  题解：显而易见，最终的路径一定是一条简单路径上挂一些环。算出路径长度与路径上每个点所在环的长度，之后二分或背包即可。","tags":["日祭"],"categories":["OI","记录"]},{"title":"About Me","url":"/about/index.html","content":"\nCW 初三蒟蒻，现役。\n\n![](https://api.jerryz.com.cn/about?id=725640)\n\n![](https://atrating.baoshuo.dev/rating?username=Getaway_Car)\n\n![](https://cfrating.baoshuo.dev/rating?username=Getaway_Car)"},{"title":"Categories","url":"/categories/index.html"},{"title":"Friends","url":"/friends/index.html"},{"title":"Tags","url":"/tags/index.html"}]